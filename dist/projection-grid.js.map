{"version":3,"sources":["webpack/universalModuleDefinition","webpack/bootstrap 8caf08fb0332dcfb5147","webpack-src:///projection-grid-example/js/index.js","webpack-src:///projection-grid-example/js/factory/grid-factory.js","external \"underscore\"","webpack-src:///projection-grid-example/js/factory/renderers-plugin.js","webpack-src:///projection-grid-example/js/layout/index.js","webpack-src:///projection-grid-example/js/layout/table.js","external \"jquery\"","external \"backbone\"","webpack-src:///projection-grid-example/js/layout/template/table.jade","webpack-src:///projection-grid-example/node_modules/jade/lib/runtime.js","ignored /Users/wewei/Repos/lyweiwei/projection-grid/node_modules/jade/lib fs","webpack-src:///projection-grid-example/js/layout/renderer/index.js","webpack-src:///projection-grid-example/js/layout/renderer/fixed-header.js","webpack-src:///projection-grid-example/js/layout/measure.js","webpack-src:///projection-grid-example/js/layout/px.js","webpack-src:///projection-grid-example/js/layout/renderer/virtualization.js","webpack-src:///projection-grid-example/js/factory/projection-plugin.js","webpack-src:///projection-grid-example/js/projection/index.js","webpack-src:///projection-grid-example/js/projection/aggregate-row.js","webpack-src:///projection-grid-example/js/projection/base.js","webpack-src:///projection-grid-example/js/model/response.js","webpack-src:///projection-grid-example/js/projection/column-i18n.js","webpack-src:///projection-grid-example/js/schema/properties.js","webpack-src:///projection-grid-example/js/projection/column-queryable.js","webpack-src:///projection-grid-example/js/projection/column-shifter.js","webpack-src:///projection-grid-example/js/projection/column-template.js","webpack-src:///projection-grid-example/js/projection/editable-string.js","webpack-src:///projection-grid-example/js/layout/template/row.editable.string.jade","webpack-src:///projection-grid-example/js/projection/editable.js","webpack-src:///projection-grid-example/js/layout/template/editable.jade","webpack-src:///projection-grid-example/js/popup-editor/index.js","external \"bluebird\"","webpack-src:///projection-grid-example/js/popup-editor/index.jade","webpack:///./less/editable.less?c2b0","webpack-src:///projection-grid-example/less/editable.less","webpack-src:///projection-grid-example/node_modules/css-loader/lib/css-base.js","webpack-src:///projection-grid-example/node_modules/style-loader/addStyles.js","webpack-src:///projection-grid-example/js/projection/jsdata.js","webpack-src:///projection-grid-example/js/projection/map.js","webpack-src:///projection-grid-example/js/projection/memory-queryable.js","webpack-src:///projection-grid-example/js/projection/memory.js","webpack-src:///projection-grid-example/js/projection/mock.js","webpack-src:///projection-grid-example/js/projection/odata.js","webpack-src:///projection-grid-example/js/projection/page.js","webpack-src:///projection-grid-example/js/projection/property-template.js","webpack-src:///projection-grid-example/js/projection/row-checkbox.js","webpack-src:///projection-grid-example/js/layout/template/selectable.jade","webpack-src:///projection-grid-example/js/projection/row-tri-state-checkbox.js","webpack-src:///projection-grid-example/js/layout/template/row.tri-state-checked.jade","webpack-src:///projection-grid-example/js/projection/row-index.js","webpack-src:///projection-grid-example/js/projection/sink.js","webpack-src:///projection-grid-example/js/projection/column-group.js","webpack-src:///projection-grid-example/js/projection/columns.js","webpack-src:///projection-grid-example/js/factory/grid-view-plugin.js","webpack-src:///projection-grid-example/js/grid-view.js","webpack-src:///projection-grid-example/js/model/index.js","webpack-src:///projection-grid-example/js/windowContainer.js","webpack-src:///projection-grid-example/js/containerBase.js","webpack-src:///projection-grid-example/js/elementContainer.js"],"names":[],"mappings":"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CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,kCAAkC,gBAAgB;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,wCAAuC,SAAS;AAChD;;AAEA,gCAA+B;AAC/B,2CAA0C,4BAA4B;AACtE;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ,gCAA+B;AAC/B,2CAA0C,4BAA4B;AACtE;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;;AAEA;AACA,EAAC;;AAED,+BAA8B,suBAA8vB;AAC5xB,E;;;;;;AC5QA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,EAAE;AACb,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,EAAE;AACb,aAAY;AACZ;AACA;AACA;AACA;AACA,gFAA+E,iBAAiB,EAAE;AAClG;AACA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,gBAAgB;AAC3B,aAAY;AACZ;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,MAAK,SAAS;AACd,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,wEAAuE;AACvE,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,Y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AO,MAAP,GAAgB,EAA1C;;AAEA,gBAAO,EAAP,CAAU,MAAV,EAAkB,UAAU,KAAV,EAAiB;AACjC,mBAAQ,KAAR;AACA,kBAAO,MAAP;AACD,UAHD;;AAKA,gBAAO,EAAP,CAAU,QAAV,EAAoB,YAAY;AAC9B;AACA,kBAAO,MAAP;AACD,UAHD;AAID,QAdM,CAAP;AAeD;AAjBI,IAAP;AAmBD,EAnED,gJ;;;;;;ACAA,iD;;;;;;ACAA;;AAEA;AACA;AACA;AACA;AACA,EAAC,mCAAmC,EAAE;AACtC,sCAAqC,gTAAgT,0GAA0G;AAC/b,E;;;;;;ACRA;;AAEA;AACA;AACA;AACA;AACA,iDAAgF;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,iCAAgC,UAAU,EAAE;AAC5C,E;;;;;;ACpBA;AACA;;;AAGA;AACA,gDAA+C,uBAAuB,GAAG,uCAAuC,kBAAkB,uBAAuB,aAAa,eAAe,oBAAoB,GAAG,6CAA6C,mBAAmB,GAAG;;AAE/Q;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA,yCAAwC,gBAAgB;AACxD,KAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;AACA,aAAY,oBAAoB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACjDA;AACA;AACA;AACA;AACA,qBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB,sBAAsB;AACtC;AACA;AACA,mBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,kBAAiB,2BAA2B;AAC5C;AACA;AACA,SAAQ,uBAAuB;AAC/B;AACA;AACA,IAAG;AACH;AACA,kBAAiB,uBAAuB;AACxC;AACA;AACA,4BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA,iCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA;AACA,GAAE;AACF;AACA,GAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wDAAuD;AACvD;;AAEA,8BAA6B,mBAAmB;;AAEhD;;AAEA;;AAEA;AACA;AACA;;;;;;;;;ACrPA,kCAAO,CACL,uBADK,EAEL,sBAFK,EAGL,uBAHK,EAIL,uBAJK,CAAP,kCAKG,UAAU,OAAV,EAAmB,CAAnB,EAAsB,cAAtB,EAAsC,gBAAtC,EAA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","file":"projection-grid.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"underscore\"), require(\"jquery\"), require(\"backbone\"), require(\"bluebird\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"underscore\", \"jquery\", \"backbone\", \"bluebird\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"projection-grid\"] = factory(require(\"underscore\"), require(\"jquery\"), require(\"backbone\"), require(\"bluebird\"));\n\telse\n\t\troot[\"projection-grid\"] = factory(root[\"underscore\"], root[\"jquery\"], root[\"backbone\"], root[\"bluebird\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_31__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 8caf08fb0332dcfb5147\n **/","import factory from './factory/grid-factory';\n\nmodule.exports = {\n  GridView: require('./grid-view'),\n  projections: require('./projection/index'),\n  layout: require('./layout/index'),\n  factory,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/index.js\n **/","import _ from 'underscore';\nimport renderersPlugin from './renderers-plugin';\nimport projectionPlugin from './projection-plugin';\nimport gridViewPlugin from './grid-view-plugin';\n\nconst configPlugin = definePlugin => definePlugin('config', [], function () {\n  return this.config;\n});\n\nclass GridFactory {\n  constructor() {\n    this.pluginIndex = {};\n    this.plugins = [];\n    this\n      .use(configPlugin)\n      .use(projectionPlugin)\n      .use(renderersPlugin)\n      .use(gridViewPlugin);\n  }\n\n  definePlugin(name, deps, callback) {\n    const plugin = { name, deps, callback };\n\n    this.pluginIndex[name] = plugin;\n    this.plugins.push(plugin);\n    _.each(deps, dep => {\n      if (!_.has(this.pluginIndex, dep)) {\n        throw new Error(`unresolved plugin dependency ${name} -> ${dep}`);\n      }\n    });\n  }\n\n  use(callback) {\n    callback(this.definePlugin.bind(this));\n    return this;\n  }\n\n  create(config) {\n    return _.reduce(\n      this.plugins,\n      (result, { name, deps, callback }) =>\n        _.extend(result, {\n          [name]: callback.apply(result, _.map(deps, dep => result[dep])),\n        }),\n      { config }\n    );\n  }\n\n}\n\nexport default function () {\n  return new GridFactory();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/factory/grid-factory.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 2\n ** module chunks = 0\n **/","import layout from '../layout/index';\n\nexport default definePlugin => definePlugin('renderers', [\n  'config',\n], function (config) {\n  const renderers = [];\n\n  if (config.scrollable) {\n    if (config.scrollable.virtual) {\n      renderers.push(layout.renderers.Virtualization);\n    }\n    if (config.scrollable.fixedHeader) {\n      renderers.push(layout.renderers.FixedHeader);\n    }\n  }\n\n  return renderers;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/factory/renderers-plugin.js\n **/","module.exports = {\n  TableLayout: require('./table'),\n  templates: {\n    table: require('./template/table.jade'),\n  },\n  renderers: require('./renderer/index'),\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/index.js\n **/","define([\n  'lib/underscore',\n  'lib/jquery',\n  'lib/backbone',\n], function (_, $, Backbone) {\n  var View = Backbone.View.extend({\n    events: {\n      'click th': 'thClick',\n      'click td': 'tdClick',\n      'change td>input.grid-text-input': 'editableStringChange',\n    },\n\n    initialize: function (options) {\n      _.bindAll(this, 'update', 'thClick', 'tdClick', 'dataFor');\n\n      this.options = _.extend(this.options, options);\n\n      // TODO [akamel] rename? this isn't a backbone data obj?\n      this.data = undefined;\n\n      this.container = options.container;\n      this.grid = options.grid;\n\n      this.renderers = _.map(this.options.renderers, function (Renderer) {\n        return new Renderer({ layout: this });\n      }.bind(this));\n\n      // TODO [akamel] make this conditional if these renderes are enabled\n      this.onViewPortChange = this.onViewPortChange.bind(this);\n      this.listenTo(this.container, 'scroll:container', this.onViewPortChange);\n      this.listenTo(this.container, 'resize:container', this.onViewPortChange);\n    },\n\n    onViewPortChange: function () {\n      this.scheduleDraw();\n    },\n\n    remove: function () {\n      this.container.stopListening(this.container);\n      Backbone.View.prototype.remove.apply(this, arguments);\n    },\n\n    thClick: function (e) {\n      var arg = this.dataFor(e.currentTarget);\n\n      if (arg.column) {\n        this.trigger('click:header', e, arg);\n      }\n    },\n\n    tdClick: function (e) {\n      var arg = this.dataFor(e.currentTarget);\n\n      if (arg.column) {\n        this.trigger('click:cell', e, arg);\n      }\n    },\n\n    editableStringChange: function (e) {\n      var arg = this.dataFor(e.currentTarget);\n      var colEditableStr = this.grid.projection.get('column.editable.string');\n\n      if (arg.column) {\n        if (_.isObject(colEditableStr) && !_.isUndefined(colEditableStr[arg.property])) {\n          this.grid.projection.get('projection:column-editable-string').trigger('change:string', e, arg);\n        } else {\n          this.trigger('change:editable.string', e, arg);\n        }\n      }\n    },\n\n    dataFor: function (el) {\n      if (!$.contains(this.el, el)) {\n        return undefined;\n      }\n\n      var $el = $(el);\n      // TODO [akamel] can we use target instead?\n      var $tr = $el.closest('tr', this.el);\n      var $closestTD = $el.closest('td', this.el);\n      var $closestTH = $el.closest('th', this.el);\n      var $td = _.size($closestTD) ? $closestTD : $closestTH;\n      var virtualizer = this.getRenderer('virtualization');\n      var i = $tr.index() + (virtualizer ? virtualizer.first : 0);\n      var j = $td.index();\n      // TODO [akamel] 1- check if $td is th; 2- throw if el is neither th or td as it is assumed in this function\n      var isHeader = $td.closest('thead', this.el).length;\n      var ret = { header: isHeader };\n\n      // we are not in header\n      if (isHeader) {\n        if (i === 0) {\n          ret.property = this.data.select[j];\n        } else if (i === 1) {\n          ret.property = this.data.subSelect[j];\n        } else {\n          ret.property = this.data.selectExpand[j];\n        }\n      } else {\n        ret.model = this.data.value[i];\n        if (this.data.selectExpand) {\n          ret.property = this.data.selectExpand[j];\n        } else {\n          ret.property = this.data.select[j];\n        }\n      }\n\n      ret.column = this.data.columns[ret.property];\n      if (ret.property === this.grid.projection.get('column.checked')) {\n        // TODO [akamel] this shouldn't be here\n        var checkbox = $el.find('.column-selection');\n        if (checkbox.length) {\n          ret.checked = checkbox[0].checked;\n        }\n      }\n      ret.grid = this.grid;\n\n      return ret;\n    },\n\n    // TODO [akamel] [perf] 8.5%\n    toHTML: function (value) {\n      var data = _.defaults({ value: value }, this.data);\n\n      _.each(data.columns, function (col) {\n        if (_.isObject(col.$metadata)) {\n          if (_.has(col.$metadata['attr.head'], 'class') && _.isArray(col.$metadata['attr.head'].class)) {\n            col.$metadata['attr.head'].class = col.$metadata['attr.head'].class.join(' ');\n          }\n\n          if (_.has(col.$metadata['attr.body'], 'class') && _.isArray(col.$metadata['attr.body'].class)) {\n            col.$metadata['attr.body'].class = col.$metadata['attr.body'].class.join(' ');\n          }\n\n         // TODO [akamel] merge attr that are on $metadata['attr']\n        }\n      });\n\n      return this.options.template(data);\n    },\n\n    update: function (model) {\n      _.each(this.renderers, function (renderer) {\n        renderer.update && renderer.update();\n      });\n\n      var value = model.get('value');\n      var columns = model.get('columns');\n      var columnsDelta = {};\n      var colOptions = this.options.columns || {};\n      var orderby = {};\n\n      _.each(this.grid.projection.get('orderby'), function (element, index) {\n        var key = _.first(_.keys(element));\n        orderby[key] = {\n          dir: element[key],\n          index: index,\n        };\n      });\n\n      _.each(columns, function (col, property) {\n      // TODO [akamel] consider filtering which props to copy/override\n        var delta = {};\n        var colOption = colOptions[property];\n        var orderName = property;\n\n        if (colOption && _.isString(colOption.sortable)) {\n          orderName = colOption.sortable;\n        } else if (col && _.isString(col.sortable)) {\n          orderName = col.sortable;\n        }\n\n        if (orderby[orderName]) {\n          delta.$orderby = orderby[orderName];\n        }\n\n        columnsDelta[property] = _.defaults(delta, colOption, col);\n      });\n\n      if (_.has(this.options.$metadata, 'class') && _.isArray(this.options.$metadata.class)) {\n        this.options.$metadata.class = this.options.$metadata.class.join(' ');\n      }\n\n      var delta = {\n        'value': value,\n        'columns': columnsDelta,\n        'columns.lookup': _.indexBy(columns, function (col) {\n          return col.property;\n        }),\n        '$metadata': this.options.$metadata,\n        'hideHeaders': this.options.hideHeaders,\n      };\n\n      this.data = _.defaults(delta, model.toJSON());\n\n      this.draw({ canSkipDraw: false });\n    },\n\n    scheduleDraw: function () {\n      if (!this.scheduledDraw) {\n        this.scheduledDraw = true;\n\n        window.requestAnimationFrame(function () {\n          this.scheduledDraw = false;\n          this.draw();\n        }.bind(this));\n      }\n    },\n\n    drawable: function () {\n      return this.data;\n    },\n\n    getRenderer: function (name) {\n      return _.find(this.renderers, function (r) {\n        return r.name === name;\n      });\n    },\n\n    draw: function (options) {\n      if (!this.drawable()) {\n        return;\n      }\n\n      this.trigger('render:beginning');\n\n      var renderers = this.renderers;\n      var i = 0;\n\n      var middleware = function (data, cb) {\n        var r = renderers[i++];\n        if (r) {\n          var clone = _.defaults({}, data, { css: {} });\n          delete clone.canSkipDraw;\n\n          r.draw(clone, _.once(function (err, res) {\n            res.canSkipDraw = data.canSkipDraw === true && res.canSkipDraw === true;\n            if (err) {\n              cb(err);\n            } else {\n              middleware(res || clone, cb);\n            }\n          }));\n        } else {\n          cb(undefined, data);\n        }\n      };\n\n      var canSkipDraw = _.has(options, 'canSkipDraw') ? options.canSkipDraw : true;\n\n      // this is _not_ and _cannot_ be async\n      middleware({ rows: this.data.value, canSkipDraw: canSkipDraw }, function (err, res) {\n        res.css && this.$el.css(res.css);\n\n        if (err) {\n          throw err;\n        }\n\n        if (res.canSkipDraw !== true) {\n          this.el.innerHTML = this.toHTML(res.rows);\n        }\n      }.bind(this));\n\n      this.trigger('render:finished');\n    },\n\n    render: function () {\n      this.grid.on('change:data', this.update);\n\n      // this.grid.projection.data.on('change', this.update);\n    },\n  });\n\n  View.partial = function (options) {\n    return View.extend({ options: options });\n  };\n\n  return View;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/table.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"backbone\"\n ** module id = 7\n ** module chunks = 0\n **/","var jade = require(\"/Users/wewei/Repos/lyweiwei/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function ($metadata, columns, hideHeaders, isApplyGroup, subSelect, undefined, value) {\njade_mixins[\"columnHeader\"] = jade_interp = function(column){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nif ( column.$orderby)\n{\nif ( column.$orderby.dir > 0)\n{\nbuf.push(\"<span class=\\\"grid-asc\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"grid-des\\\"></span>\");\n}\n}\nif ( (column && column.$html))\n{\nbuf.push(null == (jade_interp = column.$html) ? \"\" : jade_interp);\n}\nelse\n{\nbuf.push(jade.escape(null == (jade_interp = (typeof column.$text != 'undefined')? column.$text : (column.property || column)) ? \"\" : jade_interp));\n}\n};\njade_mixins[\"th\"] = jade_interp = function(column, hasGroup, isSubColumn){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nvar attr = (column.$metadata || {})['attr.head'] || {}\nvar cls = [];\nif ( column.sortable)\n{\ncls.push('sortable');\n}\nif ( column.$orderby)\n{\ncls.push('orderby');\n}\ncls = cls.join(' ');\nif ( isSubColumn )\n{\nvar colspan = 1, rowspan = 1;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \">\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</th>\");\n}\nelse if ( hasGroup && column.groupExpansion)\n{\nvar colspan = column.group.length, rowspan = 1;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \"><span class=\\\"pop-collapse glyphicon glyphicon-minus\\\"></span><div>\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</div></th>\");\n}\nelse if ( hasGroup && column.group)\n{\nvar colspan = 1, rowspan = 2;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \"><span class=\\\"pop-expand glyphicon glyphicon-plus\\\"></span><div>\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</div></th>\");\n}\nelse\n{\nvar colspan = 1, rowspan = 2;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \">\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</th>\");\n}\n};\njade_mixins[\"td\"] = jade_interp = function(row, column){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nvar attr = (column.$metadata || {})['attr.body'] || {}\nbuf.push(\"<td\" + (jade.attrs(jade.merge([attributes,attr]), true)) + \">\");\nvar res = row[column.property]\nif ( (res && res.$html))\n{\nbuf.push(null == (jade_interp = res.$html) ? \"\" : jade_interp);\n}\nelse\n{\nbuf.push(jade.escape(null == (jade_interp = res) ? \"\" : jade_interp));\n}\nbuf.push(\"</td>\");\n};\nbuf.push(\"<table\" + (jade.attrs(jade.merge([{\"class\": \"table table-hover grid\"},$metadata || {}]), true)) + \">\");\nif ( !hideHeaders)\n{\nbuf.push(\"<thead>\");\nif ( isApplyGroup && subSelect.length === 0)\n{\nbuf.push(\"<tr class=\\\"table__row--header\\\">\");\n// iterate locals['select'] || []\n;(function(){\n  var $$obj = locals['select'] || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n}\nelse if ( isApplyGroup)\n{\nbuf.push(\"<tr class=\\\"table__row--header\\\">\");\n// iterate locals['select'] || []\n;(function(){\n  var $$obj = locals['select'] || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr><tr class=\\\"table__row--header table__row--sub-header\\\">\");\n// iterate locals['subSelect']\n;(function(){\n  var $$obj = locals['subSelect'];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true, true);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true, true);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n}\nelse\n{\nbuf.push(\"<tr class=\\\"table__row--header\\\">\");\n// iterate locals['select'] || []\n;(function(){\n  var $$obj = locals['select'] || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName]);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName]);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n}\nbuf.push(\"</thead>\");\n}\nbuf.push(\"<tbody>\");\n// iterate value\n;(function(){\n  var $$obj = value;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var row = $$obj[i];\n\nvar attr = (row.$metadata || {}).attr || {}\nbuf.push(\"<tr\" + (jade.attrs(jade.merge([{\"class\": \"table__row--body\"},attr]), true)) + \">\");\n// iterate locals['selectExpand'] || locals.select\n;(function(){\n  var $$obj = locals['selectExpand'] || locals.select;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var row = $$obj[i];\n\nvar attr = (row.$metadata || {}).attr || {}\nbuf.push(\"<tr\" + (jade.attrs(jade.merge([{\"class\": \"table__row--body\"},attr]), true)) + \">\");\n// iterate locals['selectExpand'] || locals.select\n;(function(){\n  var $$obj = locals['selectExpand'] || locals.select;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tbody></table>\");}.call(this,\"$metadata\" in locals_for_with?locals_for_with.$metadata:typeof $metadata!==\"undefined\"?$metadata:undefined,\"columns\" in locals_for_with?locals_for_with.columns:typeof columns!==\"undefined\"?columns:undefined,\"hideHeaders\" in locals_for_with?locals_for_with.hideHeaders:typeof hideHeaders!==\"undefined\"?hideHeaders:undefined,\"isApplyGroup\" in locals_for_with?locals_for_with.isApplyGroup:typeof isApplyGroup!==\"undefined\"?isApplyGroup:undefined,\"subSelect\" in locals_for_with?locals_for_with.subSelect:typeof subSelect!==\"undefined\"?subSelect:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"value\" in locals_for_with?locals_for_with.value:typeof value!==\"undefined\"?value:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/table.jade\n ** module id = 8\n ** module chunks = 0\n **/","'use strict';\n\n/**\n * Merge two attribute objects giving precedence\n * to values in object `b`. Classes are special-cased\n * allowing for arrays and merging/joining appropriately\n * resulting in a string.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n * @api private\n */\n\nexports.merge = function merge(a, b) {\n  if (arguments.length === 1) {\n    var attrs = a[0];\n    for (var i = 1; i < a.length; i++) {\n      attrs = merge(attrs, a[i]);\n    }\n    return attrs;\n  }\n  var ac = a['class'];\n  var bc = b['class'];\n\n  if (ac || bc) {\n    ac = ac || [];\n    bc = bc || [];\n    if (!Array.isArray(ac)) ac = [ac];\n    if (!Array.isArray(bc)) bc = [bc];\n    a['class'] = ac.concat(bc).filter(nulls);\n  }\n\n  for (var key in b) {\n    if (key != 'class') {\n      a[key] = b[key];\n    }\n  }\n\n  return a;\n};\n\n/**\n * Filter null `val`s.\n *\n * @param {*} val\n * @return {Boolean}\n * @api private\n */\n\nfunction nulls(val) {\n  return val != null && val !== '';\n}\n\n/**\n * join array as classes.\n *\n * @param {*} val\n * @return {String}\n */\nexports.joinClasses = joinClasses;\nfunction joinClasses(val) {\n  return (Array.isArray(val) ? val.map(joinClasses) :\n    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :\n    [val]).filter(nulls).join(' ');\n}\n\n/**\n * Render the given classes.\n *\n * @param {Array} classes\n * @param {Array.<Boolean>} escaped\n * @return {String}\n */\nexports.cls = function cls(classes, escaped) {\n  var buf = [];\n  for (var i = 0; i < classes.length; i++) {\n    if (escaped && escaped[i]) {\n      buf.push(exports.escape(joinClasses([classes[i]])));\n    } else {\n      buf.push(joinClasses(classes[i]));\n    }\n  }\n  var text = joinClasses(buf);\n  if (text.length) {\n    return ' class=\"' + text + '\"';\n  } else {\n    return '';\n  }\n};\n\n\nexports.style = function (val) {\n  if (val && typeof val === 'object') {\n    return Object.keys(val).map(function (style) {\n      return style + ':' + val[style];\n    }).join(';');\n  } else {\n    return val;\n  }\n};\n/**\n * Render the given attribute.\n *\n * @param {String} key\n * @param {String} val\n * @param {Boolean} escaped\n * @param {Boolean} terse\n * @return {String}\n */\nexports.attr = function attr(key, val, escaped, terse) {\n  if (key === 'style') {\n    val = exports.style(val);\n  }\n  if ('boolean' == typeof val || null == val) {\n    if (val) {\n      return ' ' + (terse ? key : key + '=\"' + key + '\"');\n    } else {\n      return '';\n    }\n  } else if (0 == key.indexOf('data') && 'string' != typeof val) {\n    if (JSON.stringify(val).indexOf('&') !== -1) {\n      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +\n                   'will be escaped to `&amp;`');\n    };\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will eliminate the double quotes around dates in ' +\n                   'ISO form after 2.0.0');\n    }\n    return ' ' + key + \"='\" + JSON.stringify(val).replace(/'/g, '&apos;') + \"'\";\n  } else if (escaped) {\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will stringify dates in ISO form after 2.0.0');\n    }\n    return ' ' + key + '=\"' + exports.escape(val) + '\"';\n  } else {\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will stringify dates in ISO form after 2.0.0');\n    }\n    return ' ' + key + '=\"' + val + '\"';\n  }\n};\n\n/**\n * Render the given attributes object.\n *\n * @param {Object} obj\n * @param {Object} escaped\n * @return {String}\n */\nexports.attrs = function attrs(obj, terse){\n  var buf = [];\n\n  var keys = Object.keys(obj);\n\n  if (keys.length) {\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i]\n        , val = obj[key];\n\n      if ('class' == key) {\n        if (val = joinClasses(val)) {\n          buf.push(' ' + key + '=\"' + val + '\"');\n        }\n      } else {\n        buf.push(exports.attr(key, val, false, terse));\n      }\n    }\n  }\n\n  return buf.join('');\n};\n\n/**\n * Escape the given string of `html`.\n *\n * @param {String} html\n * @return {String}\n * @api private\n */\n\nvar jade_encode_html_rules = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\nvar jade_match_html = /[&<>\"]/g;\n\nfunction jade_encode_char(c) {\n  return jade_encode_html_rules[c] || c;\n}\n\nexports.escape = jade_escape;\nfunction jade_escape(html){\n  var result = String(html).replace(jade_match_html, jade_encode_char);\n  if (result === '' + html) return html;\n  else return result;\n};\n\n/**\n * Re-throw the given `err` in context to the\n * the jade in `filename` at the given `lineno`.\n *\n * @param {Error} err\n * @param {String} filename\n * @param {String} lineno\n * @api private\n */\n\nexports.rethrow = function rethrow(err, filename, lineno, str){\n  if (!(err instanceof Error)) throw err;\n  if ((typeof window != 'undefined' || !filename) && !str) {\n    err.message += ' on line ' + lineno;\n    throw err;\n  }\n  try {\n    str = str || require('fs').readFileSync(filename, 'utf8')\n  } catch (ex) {\n    rethrow(err, null, lineno)\n  }\n  var context = 3\n    , lines = str.split('\\n')\n    , start = Math.max(lineno - context, 0)\n    , end = Math.min(lines.length, lineno + context);\n\n  // Error context\n  var context = lines.slice(start, end).map(function(line, i){\n    var curr = i + start + 1;\n    return (curr == lineno ? '  > ' : '    ')\n      + curr\n      + '| '\n      + line;\n  }).join('\\n');\n\n  // Alter exception message\n  err.path = filename;\n  err.message = (filename || 'Jade') + ':' + lineno\n    + '\\n' + context + '\\n\\n' + err.message;\n  throw err;\n};\n\nexports.DebugItem = function DebugItem(lineno, filename) {\n  this.lineno = lineno;\n  this.filename = filename;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jade/lib/runtime.js\n ** module id = 9\n ** module chunks = 0\n **/","/* (ignored) */\n\n\n/*****************\n ** WEBPACK FOOTER\n ** fs (ignored)\n ** module id = 10\n ** module chunks = 0\n **/","module.exports = {\n  FixedHeader: require('./fixed-header'),\n  Virtualization: require('./virtualization'),\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/renderer/index.js\n **/","define([\n  'lib/jquery',\n  'lib/underscore',\n  'component/grid/layout/measure',\n  'component/grid/layout/px',\n], function ($, _, measure, px) {\n  function Renderer(options) {\n    this.options = options || {};\n\n    this.name = 'fixed-header';\n    this.layout = this.options.layout;\n  }\n\n  Renderer.prototype.draw = function (data, cb) {\n    data.vpMeasures = data.vpMeasures = measure.viewport.call(this.layout);\n    if (data.vpMeasures.top > 0) {\n      var $el = this.layout.$el;\n\n      // todo [akamel] assumes we have table rendered; measure/estimate otherwise\n\n      // a. compensate for header displacement\n      // .. as we set 'thead > tr' css position 'absolute'\n      var displacement = $el.find('thead tr').outerHeight();\n      _.extend(data.css, {\n        'padding-top': px.pixelify(px.parse(data.css['padding-top']) + displacement),\n      });\n\n      data.canSkipDraw = true;\n\n      // b. yield to render\n      cb(undefined, data);\n\n      // c. get newly rendered header\n      var $thead = $el.find('thead');\n      var $headTR = $el.find('thead > tr');\n      var $headTD = $headTR.first().children();\n      var $secondHeadTD = $headTR.eq(1).children();\n      var $bodyTD = $el.find('tbody > tr:first-child').children();\n\n      var $ref = $bodyTD;\n      var $target = $headTD;\n\n      // d. capture header col computed width\n      // todo [akamel] [perf] 16%\n      this.colWidth = this.colWidth || _.map($ref, function (td) {\n        return $(td).width();\n      });\n\n      // todo [akamel] [perf] 12% -- consider replacing with css rule generation\n      // e. freeze column width\n      // e.1 freeze col width\n      var colIndex = 0;\n      var secondHeadTDIndex = 0;\n      _.each($target, function (td) {\n        var colspan = parseInt($(td).attr('colspan'), 10);\n        var rowspan = parseInt($(td).attr('rowspan'), 10);\n        var width = 0;\n        for (var i = 0; i < colspan; ++i) {\n          var colWidth = px.pixelify(this.colWidth[colIndex + i]);\n          width += colWidth;\n          if (rowspan === 1) {\n            $secondHeadTD.eq(secondHeadTDIndex + i).width(colWidth);\n          }\n        }\n        $(td).width(width);\n        colIndex += colspan;\n        if (rowspan === 1) {\n          secondHeadTDIndex += colspan;\n        }\n      }.bind(this));\n\n      _.each($ref, function (td, index) {\n        $(td).width(px.pixelify(this.colWidth[index]));\n      }.bind(this));\n\n      // f. set position 'fixed' and lock header at top of table\n      $thead.css({\n        'position': this.layout.container.el === window ? 'fixed' : 'absolute',\n        'top': px.pixelify(this.layout.container.el === window ? 0 : this.layout.container.$el.scrollTop()),\n        'margin-left': px.pixelify(-data.vpMeasures.offsetLeft),\n        'z-index': 1000,\n      });\n    } else {\n      _.extend(data.css, {\n        'padding-top': px.pixelify(px.parse(data.css['padding-top'])),\n      });\n\n      cb(undefined, data);\n    }\n  };\n\n  Renderer.partial = function (options) {\n    return function (o) {\n      return new Renderer(_.defaults({}, o, options));\n    };\n  };\n\n  return Renderer;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/renderer/fixed-header.js\n **/","define([\n  'lib/jquery',\n  'lib/underscore',\n], function ($, _) {\n  function viewport(el, container) {\n    var $el = el ? $(el) : this.$el;\n\n    container = container || this.container;\n    var $viewport = container.$el;\n\n    var viewportTop = $viewport.scrollTop();\n    var viewportBottom = viewportTop + $viewport.height();\n    var viewportLeft = $viewport.scrollLeft();\n\n    var boundsTop = container.offset($el).top;\n    var boundsBottom = boundsTop + $el.innerHeight();\n    // var boundsLeft = $el.offset().left;\n\n    var visibleTop = Math.max(boundsTop, viewportTop);\n    var visibleBottom = Math.min(boundsBottom, viewportBottom);\n    // var visibleLeft = Math.max(boundsLeft, viewportLeft);\n\n    return {\n      top: visibleTop - boundsTop,\n      bottom: visibleBottom - boundsTop,\n      offsetLeft: viewportLeft,\n    };\n  }\n\n  function dimensions(el) {\n    var $el = el ? $(el) : this.$el;\n\n    // calculate heights\n    // a. header\n    var ret = {\n      rows: [],\n      thead: $el.find('thead > tr').outerHeight(),\n    };\n\n    // b. keep row info\n    $el.find('tbody').children('tr').each(function () {\n      ret.rows.push($(this).outerHeight());\n    });\n\n    // c. update average row height\n    var avg = _.reduce(ret.rows, function (memo, num) {\n      return memo + num;\n    }, 0) / (ret.rows.length === 0 ? 1 : ret.rows.length);\n\n    ret.avgRowHeight = avg;\n    ret.estimateHeight = (_.size(this.data.value) * avg) + ret.thead;\n\n    return ret;\n  }\n\n  function sample() {\n    // a. render test pass\n    var $tmpEl = $('<div style=\"visibility:hidden\" />');\n    var sample = _.first(this.data.value, 20);\n\n    this.$el.append($tmpEl);\n\n    $tmpEl[0].innerHTML = this.toHTML(sample);\n\n    // b. take measures\n    var ret = dimensions.call(this, $tmpEl);\n\n    // c. clean-up\n    $tmpEl.remove();\n\n    return ret;\n  }\n\n  return {\n    viewport: viewport,\n    dimensions: dimensions,\n    sample: sample,\n  };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/measure.js\n **/","// todo [akamel] move to /component\ndefine(['lib/underscore'], function (_) {\n  function parse(a) {\n    return abs(parseFloat(a));\n  }\n\n  function abs(a) {\n    return _.isFinite(a) ? a : 0;\n  }\n\n  function pixelify(a) {\n    return abs(a) + 'px';\n  }\n\n  return {\n    parse: parse,\n    pixelify: pixelify,\n  };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/px.js\n **/","// TODO [akamel] [bug] with large data set, jitters when scrolling to bottom\n\ndefine([\n  'lib/jquery',\n  'lib/underscore',\n  'component/grid/layout/measure',\n  'component/grid/layout/px',\n], function ($, _, measure, px) {\n  function rowHeight(row) {\n    return _.isNumber(row.__height) ? row.__height : this.__measures.avgRowHeight;\n  }\n\n  function estimateHeight(first, last) {\n    var rows = this.layout.data.value;\n\n    var ret = 0;\n    for (var i = first; i <= last; i++) {\n      ret += rowHeight.call(this, rows[i]);\n    }\n\n    return ret;\n  }\n\n  function rowAtOffset(offset) {\n    var rem = offset;\n\n    if (rem <= 0) {\n      return 0;\n    }\n\n    var ret = -1;\n    var count = _.size(this.layout.data.value);\n\n    while (rem > 0 && ret < count - 1) {\n      ret++;\n      rem -= rowHeight.call(this, ret);\n    }\n\n    return (ret < count) ? ret : -1;\n  }\n\n  function Renderer(options) {\n    this.options = options || {};\n\n    this.name = 'virtualization';\n    this.layout = this.options.layout;\n  }\n\n  Renderer.prototype.draw = function (data, cb) {\n    // a. define data set\n    var value = this.layout.data.value;\n    var count = _.size(value);\n    var first = 0;\n    var last = count - 1;\n\n    // b. render test pass / take initial measures\n    if (!this.__measures) {\n      var smpl = measure.sample.call(this.layout);\n      this.__measures = _.pick(smpl, 'avgRowHeight', 'estimateHeight', 'thead');\n\n      // b.1 set height based on measures estimate\n      this.layout.$el.css({\n        'padding-top': px.pixelify(this.__measures.estimateHeight),\n      });\n    }\n\n    // c. find visible viewport\n    data.vpMeasures = data.vpMeasures || measure.viewport.call(this.layout);\n\n    // d. find rendable rows\n    first = rowAtOffset.call(this, data.vpMeasures.top - this.__measures.thead);\n    last = rowAtOffset.call(this, data.vpMeasures.bottom - this.__measures.thead);\n\n    // d.1 add a few rows before and after our calculations to account for measurment estimation err\n    var errMarginRowCount = 5;\n\n    first -= errMarginRowCount;\n    last += errMarginRowCount;\n\n    first = Math.max(0, first);\n    last = Math.min((last < 0) ? count - 1 : last, count - 1);\n\n    var pTop = estimateHeight.call(this, 0, first - 1);\n    var pBottom = estimateHeight.call(this, last + 1, count - 1);\n\n    data.rows = value.slice(first, last + 1);\n\n    _.extend(data.css, {\n      'padding-top': px.pixelify(pTop + px.parse(data.css['padding-top'])),\n      'padding-bottom': px.pixelify(pBottom + px.parse(data.css['padding-bottom'])),\n    });\n\n    if (this.first === first && this.last === last) {\n      data.canSkipDraw = true;\n    }\n\n    // e. yield to render\n    cb(undefined, data);\n\n    // f. take new measures and update avg row height\n    // todo [akamel] [perf] 7.5%\n    var tblMeasure = measure.dimensions.call(this.layout);\n    _.each(tblMeasure.rows, function (height, i) {\n      value[i + first].__height = height;\n    });\n\n    var heights = _.chain(value)\n      .map(function (row) {\n        return row.__height;\n      }).compact().value();\n\n    if (_.size(heights)) {\n      this.__measures.avgRowHeight = _.reduce(heights, function (memo, num) {\n        return memo + num;\n      }, 0) / _.size(heights);\n    }\n\n    this.first = first;\n    this.last = last;\n  };\n\n  Renderer.prototype.update = function () {\n    delete this.__measures;\n  };\n\n  Renderer.partial = function (options) {\n    return function (o) {\n      return new Renderer(_.defaults({}, o, options));\n    };\n  };\n\n  return Renderer;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/layout/renderer/virtualization.js\n **/","import _ from 'underscore';\nimport projections from '../projection/index';\n\nconst projectionConfigs = {\n  AggregateRow(config) {\n    const configAgg = {};\n\n    if (_.has(config.aggregate, 'top')) {\n      configAgg['aggregate.top'] = config.aggregate.top;\n    }\n\n    if (_.has(config.aggregate, 'bottom')) {\n      configAgg['aggregate.bottom'] = config.aggregate.bottom;\n    }\n\n    return configAgg;\n  },\n\n  JSData(config) {\n    return {\n      'jsdata.entity': config.dataSource.resource,\n      'jsdata.query': config.dataSource.query,\n      'jsdata.options': config.dataSource.options,\n    };\n  },\n\n  Map(config) {\n    const properties = _.reduce(config.columns, (memo, { name, value, field }) => {\n      memo[name] = value || (item => _.reduce((field || name).split('/'), (memo, prop) => memo[prop], item));\n      return memo;\n    }, {});\n\n    return {\n      map(item) {\n        return _.reduce(config.columns, (memo, { name }) => {\n          memo[name] = properties[name](item);\n          return memo;\n        }, {});\n      },\n    };\n  },\n\n  Columns(config) {\n    return {\n      columns: _.reduce(config.columns, (columns, column) => {\n        const $metadata = {};\n\n        if (column.attributes) {\n          $metadata['attr.body'] = column.attributes;\n        }\n\n        if (column.headerAttributes) {\n          $metadata['attr.head'] = column.headerAttributes;\n        }\n\n        columns[column.name] = {\n          sortable: column.sortable,\n          $metadata,\n        };\n\n        return columns;\n      }, {}),\n    };\n  },\n\n  ColumnI18n(config) {\n    return {\n      'column.i18n': _.reduce(config.columns, (columnI18n, column) => {\n        columnI18n[column.name] = column.title || column.name;\n        return columnI18n;\n      }, {}),\n    };\n  },\n\n  ColumnQueryable(config) {\n    const columnIn = _.chain(config.columns)\n      .reject(_.property('hidden'))\n      .map(_.property('name'))\n      .value();\n    const columnLock = _.chain(config.columns)\n      .filter(_.property('locked'))\n      .map(_.property('name'))\n      .value();\n    const colqConfig = {\n      'column.lock': columnLock,\n      'column.in': columnIn,\n    };\n\n    if (config.selectable) {\n      columnIn.unshift('checkbox');\n      columnLock.unshift('checkbox');\n    }\n\n    if (_.has(config.columnShifter, 'totalColumns')) {\n      colqConfig['column.take'] = config.columnShifter.totalColumns;\n    }\n    return colqConfig;\n  },\n\n  ColumnShifter() {},\n\n  ColumnTemplate(config) {\n    return {\n      'column.template': _.reduce(config.columns, (columnTmpl, column) => {\n        if (column.headerTemplate) {\n          columnTmpl[column.name] = column.headerTemplate;\n        }\n        return columnTmpl;\n      }, {}),\n    };\n  },\n\n  Editable(config) {\n    return {\n      'column.editable': _.chain(config.columns)\n        .filter(_.property('editable'))\n        .map(_.property('name'))\n        .value(),\n    };\n  },\n\n  PropertyTemplate(config) {\n    return {\n      'property.template': _.reduce(config.columns, (propTmpl, column) => {\n        if (column.template) {\n          propTmpl[column.name] = column.template;\n        }\n        return propTmpl;\n      }, {}),\n    };\n  },\n\n  RowIndex() { },\n\n  RowCheckbox(config) {\n    return {\n      'row.check.id': _.chain(config)\n        .result('dataSource')\n        .result('schema')\n        .result('key', 'rowIndex')\n        .value(),\n      'row.check.single': config.selectable === 'single',\n      'column.checked': 'checkbox',\n      'row.check.allow': function (model) {\n        var type = _.chain(model).result('$metadata').result('type').value();\n\n        return !_.contains([\n          'segmentation',\n          'aggregate',\n        ], type);\n      },\n    };\n  },\n\n  Page(config) {\n    return {\n      'page.size': config.pageable.pageSize,\n      'page.number': 0,\n    };\n  },\n};\n\nexport default definePlugin => definePlugin('projection', [\n  'config',\n], function (config) {\n  let projection = null;\n\n  function pipeProjection(name) {\n    const Projection = projections[name];\n    const configProj = projectionConfigs[name](config);\n    const projectionDest = new Projection(configProj);\n\n    if (projection) {\n      projection = projection.pipe(projectionDest);\n    } else {\n      projection = projectionDest;\n    }\n  }\n\n  if (config.dataSource.type === 'js-data') {\n    pipeProjection('JSData');\n  } else {\n    throw new Error(`dataSource.type \"${config.dataSource.type}\" is not supported`);\n  }\n\n  pipeProjection('Map');\n  if (config.aggregate) {\n    pipeProjection('AggregateRow');\n  }\n  pipeProjection('ColumnI18n');\n  pipeProjection('ColumnQueryable');\n\n  if (_.has(config.columnShifter, 'totalColumns')) {\n    pipeProjection('ColumnShifter');\n  }\n\n  pipeProjection('ColumnTemplate');\n  pipeProjection('PropertyTemplate');\n  if (config.selectable) {\n    pipeProjection('RowIndex');\n    pipeProjection('RowCheckbox');\n  }\n\n  if (_.has(config.pageable, 'pageSize')) {\n    pipeProjection('Page');\n  }\n  if (_.find(config.columns, _.property('editable'))) {\n    pipeProjection('Editable');\n  }\n\n  return projection;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/factory/projection-plugin.js\n **/","module.exports = {\n  AggregateRow: require('./aggregate-row'),\n  Base: require('./base'),\n  ColumnI18n: require('./column-i18n'),\n  ColumnQueryable: require('./column-queryable'),\n  ColumnShifter: require('./column-shifter'),\n  ColumnTemplate: require('./column-template'),\n  EditableString: require('./editable-string'),\n  Editable: require('./editable'),\n  JSData: require('./jsdata'),\n  Map: require('./map'),\n  MemoryQueryable: require('./memory-queryable'),\n  Memory: require('./memory'),\n  Mock: require('./mock'),\n  Odata: require('./odata'),\n  Page: require('./page'),\n  PropertyTemplate: require('./property-template'),\n  RowCheckbox: require('./row-checkbox'),\n  RowTriStateCheckboxProjection: require('./row-tri-state-checkbox'),\n  RowIndex: require('./row-index'),\n  Sink: require('./sink'),\n  ColumnGroup: require('./column-group'),\n  Columns: require('./columns').default,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/index.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n], function (_, Backbone, BaseProjection) {\n  var createRows = function (fn, data) {\n    var rows = fn(data);\n\n    _.each(rows, function (row) {\n      row.$metadata = _.extend({}, row.$metadata, { type: 'aggregate' });\n    });\n\n    return rows;\n  };\n\n  var Model = BaseProjection.extend({\n\n    defaults: {\n      'aggregate.top': null,\n      'aggregate.bottom': null,\n    },\n\n    name: 'aggregate-row',\n\n    update: function (options) {\n      var value, topFn, rowTop, bottomFn, rowBottom;\n\n      if (Model.__super__.update.call(this, options)) {\n        value = this.src.data.get('value');\n\n        if (value) {\n          topFn = this.get('aggregate.top');\n          bottomFn = this.get('aggregate.bottom');\n          rowTop = _.isFunction(topFn) ? createRows(topFn, this.src.data) : null;\n          rowBottom = _.isFunction(bottomFn) ? createRows(bottomFn, this.src.data) : null;\n\n          if (rowTop) {\n            value = _.flatten(rowTop).concat(value);\n          }\n\n          if (rowBottom) {\n            value = value.concat(_.flatten(rowBottom));\n          }\n\n          this.patch({\n            value: value,\n          });\n        }\n      }\n    },\n\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/aggregate-row.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/model/response',\n], function (_, Backbone, Response) {\n  var Model = Backbone.Model.extend({\n    initialize: function () {\n      _.bindAll(this, 'onSrcUpdate', 'beforeSet', 'afterSet', 'update');\n      this.data = new Response();\n      this.src = undefined;\n      this.on('change', function (model) {\n        // todo [akamel] the model here is the settings model\n        this.update({ model: model });\n      }.bind(this));\n    },\n\n    constructor: function () {\n      // used to figure out which options to set localy and which ones to pass down the pipe\n      this.localKeys = _.keys(this.defaults);\n      // todo [akamel] this might prevent us from overriding initialize\n      Model.__super__.constructor.apply(this, arguments);\n    },\n\n    pipe: function (to) {\n      if (to) {\n        to.setSrc(this);\n      }\n\n      return to;\n    },\n\n    setSrc: function (src) {\n      this.src = src;\n      if (this.src) {\n        this.src.data.off('change', this.onSrcUpdate);\n        this.src.off('all', this.bubble);\n      }\n\n      if (this.src) {\n        this.src.data.on('change', this.onSrcUpdate);\n        this.src.on('all', this.bubble);\n      }\n\n      this.update();\n    },\n\n    patch: function (delta) {\n      var src = this.src ? this.src.data.toJSON() : {};\n      delta = _.isObject(delta) ? delta : {};\n\n      this.data.set(_.defaults(delta, this.attributes, src));\n    },\n\n    beforeSet: function (/* local, other */) {},\n    afterSet: function () {},\n\n    onSrcUpdate: function (/* model */) {\n      this.update(/* { model : model } */);\n    },\n    bubble: function () {\n      var key = _.first(arguments);\n\n      if (_.has(this.events, key)) {\n        var fct = this[this.events[key]];\n        if (_.isFunction(fct)) {\n          fct.apply(this, _.rest(arguments));\n        }\n      }\n\n      // todo [akamel] can this result in multiple redraw calls?\n      if (this.src) {\n        this.src.bubble.apply(this.src, _.toArray(arguments));\n      }\n    },\n\n    update: function (options) {\n      options = options || {};\n\n      if (this.src) {\n        if (options.deep) {\n          this.src.update(options);\n          return false;\n        }\n\n        return true;\n      }\n\n      return false;\n    },\n  });\n\n  Model.prototype.set = function (key, value, options) {\n    var obj = {};\n\n    if (_.isString(key)) {\n      obj[key] = value;\n    } else {\n      obj = key;\n      options = value;\n    }\n\n    var local = _.pick(obj, this.localKeys);\n    var other = _.omit(obj, this.localKeys);\n\n    this.beforeSet(local, other);\n\n    var ret = Model.__super__.set.call(this, local, options);\n\n    // todo [akamel] if we set options that span multiple data sources we will trigger change multiple times in the chain??\n    // pass along non-local options\n    if (_.size(other)) {\n      if (this.src) {\n        this.src.set(other, options);\n      }\n    }\n    this.afterSet();\n\n    return ret;\n  };\n\n  Model.keyRegex = /^([\\w_\\-$]+):(.+)$/;\n\n  Model.prototype.get = function (key) {\n    var match = Model.keyRegex.exec(key);\n\n    if (match) {\n      var type = match[1];\n      var name = match[2];\n\n      switch (type) {\n        case 'projection': {\n          var p = this;\n          do {\n            if (p.name === name) {\n              return p;\n            }\n            p = p.src;\n          } while (p);\n          break;\n        }\n        default: {\n          throw new Error('unknown special get key type');\n        }\n      }\n    } else {\n      var ret = Model.__super__.get.apply(this, arguments);\n\n      if (_.isUndefined(ret)) {\n        if (this.src) {\n          ret = this.src.get.apply(this.src, arguments);\n        }\n      }\n\n      return ret;\n    }\n  };\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/base.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n], function (_, Backbone) {\n  return Backbone.Model.extend({\n    defaults: {\n      value: [],\n      select: null,\n      count: 0,\n      aggregate: [],\n    },\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/model/response.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.i18n': {\n        '': function (name) {\n          return name;\n        },\n      },\n    },\n    name: 'column-i18n',\n    beforeSet: function (local) {\n      if (_.has(local, 'column.i18n')) {\n        if (!_.isObject(local['column.i18n'])) {\n          local['column.i18n'] = this.defaults['column.i18n'];\n        }\n      }\n    },\n    update: function (options) {\n      // todo [akamel] when calling a deep update; suppress onchange event based updates\n      // Model.__super__.update.call(this, options);\n\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var colOptions = this.get('column.i18n');\n        var columns = model.get('columns') || {};\n        var select = model.get('select') || _.keys(columns);\n        var $default = colOptions[''];\n\n        var i18nColumns = {};\n        _.each(select, function (element) {\n          var opt = colOptions[element];\n          if (_.isUndefined(opt)) {\n            opt = $default;\n          }\n\n          i18nColumns[element] = _.defaults({\n            $text: _.isFunction(opt) ? opt(element) : opt,\n            property: element,\n          }, columns[element]);\n        });\n\n        this.patch({\n          columns: i18nColumns,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/column-i18n.js\n **/","define([\n  'lib/underscore',\n], function (_) {\n  function from(arr) {\n    var obj = _.first(arr);\n\n    return _.keys(obj || {});\n  }\n\n  return { from: from };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/schema/properties.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.skip': 0,\n      'column.take': Number.MAX_VALUE,\n      'column.lock': [],\n      'column.filter': function () {\n        return true;\n      },\n      'column.in': undefined,\n    },\n    name: 'column-queryable',\n    update: function (options) {\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var take = this.get('column.take');\n        var skip = this.get('column.skip');\n        var lock = this.get('column.lock') || [];\n        var filter = this.get('column.filter');\n        // todo [akamel] consider renaming to column.select\n        var $in = this.get('column.in');\n        var select = _.size(model.get('columns')) ? _.map(model.get('columns'), function (i) {\n          return i.property;\n        }) : model.get('select');\n        var unlocked = _.isFunction(filter) ? _.filter($in || select, filter) : ($in || select);\n        var lookup = model.get('columns');\n        var set = _.chain(unlocked).difference(lock).value();\n        var col = set;\n\n        if (!_.isNumber(take)) {\n          take = Number.MAX_VALUE;\n        }\n\n        take = Math.max(take - _.size(lock), 0);\n        if (_.size(set) < skip) {\n          skip = 0;\n          // this.set({ 'columns.skip' : 0 }, { silent : true });\n        }\n\n        // start query\n        var skipped = _.first(set, skip);\n\n        if (skip) {\n          col = _.rest(set, skip);\n        }\n\n        var remaining = _.rest(col, take);\n\n        col = _.union(lock, _.first(col, take));\n        // end query\n\n        _.each(col, function (element) {\n          if (!lookup[element]) {\n            lookup[element] = { property: element };\n          }\n          lookup[element].$lock = _.contains(lock, element);\n        });\n\n        this.patch({\n          'select': col,\n          // todo [akamel] rename to column.in???\n          // , 'columns.select'  : set\n          'columns.skipped': skipped,\n          'columns.remaining': remaining,\n          // , 'columns.count'   : _.size(res)\n          // todo [akamel] do we still need to update skip?\n          'column.skip': skip,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/column-queryable.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n    },\n    name: 'column-shifter',\n    events: {\n      'layout:click:header': 'thClick',\n    },\n    update: function (options) {\n      // todo [akamel] when calling a deep update; suppress onchange event based updates\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        // todo [akamel] have 'columns' crated at the source so we don't have to put this all over the place\n        var columns = model.get('columns');\n        var select = model.get('select');\n        var colSkipped = model.get('columns.skipped');\n        var colRemaining = model.get('columns.remaining');\n\n        var unlockedAt = Math.max(_.findIndex(select, function (col) {\n          return columns[col] && !columns[col].$lock;\n        }), 0);\n\n        var hasLess = _.size(colSkipped);\n        var hasMore = _.size(colRemaining);\n\n        var colLess = {\n          property: 'column.skip.less',\n          $metadata: {\n            'attr.head': { class: ['skip-less'] },\n            'enabled': hasLess,\n          },\n          $html: '<span class=\"glyphicon glyphicon-triangle-left\" />',\n        };\n        var colMore = {\n          property: 'column.skip.more',\n          $metadata: {\n            'attr.head': { class: ['skip-more'] },\n            'enabled': hasMore,\n          },\n          $html: '<span class=\"glyphicon glyphicon-triangle-right\" />',\n        };\n\n        if (!hasLess) {\n          colLess.$metadata['attr.head'].class.push('disabled');\n        }\n\n        if (!hasMore) {\n          colMore.$metadata['attr.head'].class.push('disabled');\n        }\n\n        select.splice(unlockedAt, 0, colLess.property);\n        columns[colLess.property] = colLess;\n        select.push(colMore.property);\n        columns[colMore.property] = colMore;\n\n        this.patch({\n          columns: columns,\n          select: select,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n    thClick: function (e, arg) {\n      if (_.has(arg.column, '$metadata') && arg.column.$metadata.enabled) {\n        var ret = 0;\n        var skip = this.get('column.skip');\n\n        // todo [akamel] is this logic solid?\n        switch (arg.property) {\n          case 'column.skip.less': {\n            ret = _.isNumber(skip) ? Math.max(skip - 1, 0) : 0;\n            break;\n          }\n          case 'column.skip.more': {\n            ret = _.isNumber(skip) ? skip + 1 : 0;\n            break;\n          }\n          default:\n        }\n\n        this.set({ 'column.skip': ret });\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/column-shifter.js\n **/","define([\n  'lib/underscore',\n  'component/grid/projection/base',\n], function (_, BaseProjection) {\n  'use strict';\n\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.template': {},\n    },\n    name: 'column-template',\n    update: function (options) {\n      // todo [akamel] when calling a deep update; suppress onchange event based updates\n      // Model.__super__.update.call(this, options);\n\n      // TODO [imang]: columns: ideally we should not need to read from select.\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var colTemplate = this.get('column.template');\n        var columns = model.get('columns');\n        _.each(columns, function (item, property) {\n          var ret = _.clone(item);\n          var templateValue = colTemplate[property];\n\n          if (_.has(colTemplate, property)) {\n            ret.$html = _.isFunction(templateValue) ? templateValue(ret) : templateValue;\n          }\n\n          columns[property] = ret;\n        });\n\n        this.patch({ columns: columns });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/column-template.js\n **/","/**\n *\n * Important!!!\n *\n * The initial check-in is for unblock the simple grid in advanced campaign creation and\n * may cause bugs if you try to use it with some more complex grid. Please DO NOT use this\n * projection until we update this and remove the comments here.\n *\n * todo [yucongj, wewei] add the model to maintail the input data.\n *\n */\n\ndefine([\n  'lib/underscore',\n  'lib/jquery',\n  'component/grid/projection/base',\n  'component/grid/layout/template/row.editable.string.jade',\n], function (_, jquery, BaseProjection, editableTemplate) {\n  'use strict';\n\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.editable.string': {},\n    },\n    name: 'column-editable-string',\n    update: function (options) {\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var columnEditable = this.get('column.editable.string');\n        var value = _.map(model.get('value'), function (item) {\n          var ret = _.clone(item);\n\n          _.each(columnEditable, function (value, key) {\n            if (_.has(ret, key)) {\n              if (!_.isObject(ret[key])) {\n                var obj = new Object(ret[key]); //eslint-disable-line\n\n                if (_.isUndefined(ret[key])) {\n                  obj.$undefined = true;\n                }\n\n                if (_.isNull(ret[key])) {\n                  obj.$null = true;\n                }\n\n                ret[key] = obj;\n              }\n\n              var defaultValue = (ret[key].$undefined || ret[key].$null) ? value.defaultValue : ret[key];\n\n              ret[key].$html = editableTemplate({ defaultValue: defaultValue });\n            }\n          });\n\n          return ret;\n        });\n\n        this.patch({ value: value });\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/editable-string.js\n **/","var jade = require(\"/Users/wewei/Repos/lyweiwei/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (defaultValue) {\nbuf.push(\"<input type=\\\"text\\\"\" + (jade.attr(\"value\", defaultValue, true, true)) + \" style=\\\"width:100%\\\" class=\\\"grid-text-input\\\">\");}.call(this,\"defaultValue\" in locals_for_with?locals_for_with.defaultValue:typeof defaultValue!==\"undefined\"?defaultValue:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/row.editable.string.jade\n ** module id = 27\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/jquery',\n  'component/grid/projection/base',\n  'component/grid/layout/template/editable.jade',\n  'component/popup-editor/index',\n  '../../less/editable.less',\n], function (_, $, BaseProjection, editableTemplate, PopupEditor) {\n  'use strict';\n\n  function isReadonlyRow(item) {\n    return !item || (item.$metadata && _.contains([\n      'aggregate',\n      'segmentation',\n    ], item.$metadata.type));\n  }\n\n  return BaseProjection.extend({\n    defaults: {\n      'column.editable': [],\n    },\n    name: 'column-editable',\n    events: {\n      'layout:click:cell': 'tdClick',\n    },\n\n    beforeSet: function (local) {\n      var editable = function () {\n        return true;\n      };\n\n      if (_.has(local, 'column.editable')) {\n        var conditions = _.reduce(local['column.editable'], function (conds, editableColumn) {\n          if (_.isString(editableColumn)) {\n            conds[editableColumn] = editable;\n          } else if (_.isObject(editableColumn) && _.isString(editableColumn.name)) {\n            conds[editableColumn.name] = _.isFunction(editableColumn.condition) ? editableColumn.condition : editable;\n          }\n          return conds;\n        }, {});\n\n        this.isEditable = function (key, item) {\n          return _.isFunction(conditions[key]) && conditions[key](item);\n        };\n      }\n    },\n\n    update: function (options) {\n      if (BaseProjection.prototype.update.call(this, options)) {\n        var model = this.src.data;\n        var columns = model.get('columns');\n        var iconClasses = this.get('editable.icon.class') || ['glyphicon', 'glyphicon-pencil'];\n\n        _.each(this.get('column.editable'), function (editableColumn) {\n          var key = _.isString(editableColumn) ? editableColumn : editableColumn.name;\n          if (key) {\n            var column = columns[key] || { property: key };\n            var $metadata = column.$metadata = column.$metadata || {};\n            var attrBody = $metadata['attr.body'] = $metadata['attr.body'] || {};\n            var className = attrBody.class || [];\n\n            if (_.isString(className)) {\n              className = className.split(/\\s+/);\n            }\n            attrBody.class = _.union(className, ['grid-editable-cell']);\n\n            columns[key] = column;\n          }\n        });\n\n        var value = _.map(model.get('value'), function (item) {\n          return isReadonlyRow(item) ? item : _.mapObject(item, function (value, key) {\n            if (this.isEditable(key, item)) {\n              if (!_.isObject(value)) {\n                value = new Object(value); // eslint-disable-line\n              }\n\n              value.$html = editableTemplate({\n                $html: value.$html || String(value),\n                classes: iconClasses,\n              });\n            }\n            return value;\n          }, this);\n        }, this);\n\n        this.patch({ value: value });\n      }\n    },\n\n    tdClick: function (e, arg) {\n      var schema = null;\n      var metadata = arg.column.$metadata;\n      // TODO: wewei\n      // let's rethink this\n      var property = (metadata && metadata.map) || arg.property;\n\n      if (!isReadonlyRow(arg.model) &&\n      this.isEditable(arg.property, arg.model) &&\n      e.target.tagName !== 'A' &&\n      $(e.target).closest('.is-not-trigger').length === 0) {\n        schema = arg.grid.options.get('schema');\n        PopupEditor.prompt({\n          template: 'inline',\n          model: _.clone(arg.model),\n          schema: schema,\n          fields: [{\n            showLabel: false,\n            property: property,\n          }],\n          position: $(e.target).closest('td').position(),\n        }).then(function (model) {\n          if (model) {\n            this.trigger('edit', model);\n          }\n        }.bind(this));\n      }\n    },\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/editable.js\n **/","var jade = require(\"/Users/wewei/Repos/lyweiwei/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function ($html, classes) {\nbuf.push(\"<div title=\\\"Edit\\\"\" + (jade.cls(['grid-edit-icon',classes], [null,true])) + \"></div>\" + (null == (jade_interp = $html) ? \"\" : jade_interp));}.call(this,\"$html\" in locals_for_with?locals_for_with.$html:typeof $html!==\"undefined\"?$html:undefined,\"classes\" in locals_for_with?locals_for_with.classes:typeof classes!==\"undefined\"?classes:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/editable.jade\n ** module id = 29\n ** module chunks = 0\n **/","define([\n  'jquery',\n  'bluebird',\n  'backbone',\n  './index.jade',\n], function ($, Promise, Backbone, template) {\n  var PopupEditor = Backbone.View.extend({\n    events: {\n      'click .save': function () {\n        this.trigger('save', this.model);\n      },\n      'click .cancel': function () {\n        this.trigger('cancel');\n      },\n      'change .editor': function (e) {\n        this.model[this.property] = e.target.value;\n      },\n    },\n\n    initialize: function (options) {\n      this.position = options.position;\n      this.model = options.model;\n      this.property = options.fields[0].property;\n    },\n\n    render: function () {\n      this.$el.html(template({ value: this.model[this.property] }));\n      this.$el.css({\n        position: 'absolute',\n        left: this.position.left,\n        top: this.position.top,\n      });\n      this.dismiss = function () {\n        this.trigger('cancel');\n      }.bind(this);\n\n      window.setTimeout(function () {\n        $(window).on('click', this.dismiss);\n      }, 0);\n      return this;\n    },\n\n    remove: function () {\n      $(window).off('click', this.dismiss);\n      Backbone.View.prototype.remove.apply(this, arguments);\n    },\n  });\n\n  return {\n    prompt: function (options) {\n      return new Promise(function (resolve /* , reject */) {\n        var editor = new PopupEditor(options);\n\n        document.body.appendChild(editor.render().el);\n\n        editor.on('save', function (model) {\n          resolve(model);\n          editor.remove();\n        });\n\n        editor.on('cancel', function () {\n          resolve();\n          editor.remove();\n        });\n      });\n    },\n  };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/popup-editor/index.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_31__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bluebird\"\n ** module id = 31\n ** module chunks = 0\n **/","var jade = require(\"/Users/wewei/Repos/lyweiwei/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (value) {\nbuf.push(\"<form style=\\\"padding: 5px; background: #e0e0e0\\\" class=\\\"form-inline\\\"><input type=\\\"text\\\"\" + (jade.attr(\"value\", value, true, true)) + \" class=\\\"form-control editor\\\">&nbsp<button type=\\\"button\\\" class=\\\"btn btn-primary save\\\">Save</button>&nbsp<button type=\\\"button\\\" class=\\\"btn btn-default cancel\\\">Cancel</button></form>\");}.call(this,\"value\" in locals_for_with?locals_for_with.value:typeof value!==\"undefined\"?value:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/popup-editor/index.jade\n ** module id = 32\n ** module chunks = 0\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./editable.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./editable.less\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/less-loader/index.js!./editable.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./less/editable.less\n ** module id = 33\n ** module chunks = 0\n **/","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".grid-editable-cell {\\n  position: relative;\\n}\\n.grid-editable-cell .grid-edit-icon {\\n  display: none;\\n  position: absolute;\\n  top: 2px;\\n  right: 2px;\\n  font-size: 10px;\\n}\\n.grid-editable-cell:hover .grid-edit-icon {\\n  display: block;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/less-loader!./less/editable.less\n ** module id = 34\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\n// css base code, injected by the css-loader\r\nmodule.exports = function() {\r\n\tvar list = [];\r\n\r\n\t// return the list of modules as css string\r\n\tlist.toString = function toString() {\r\n\t\tvar result = [];\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar item = this[i];\r\n\t\t\tif(item[2]) {\r\n\t\t\t\tresult.push(\"@media \" + item[2] + \"{\" + item[1] + \"}\");\r\n\t\t\t} else {\r\n\t\t\t\tresult.push(item[1]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result.join(\"\");\r\n\t};\r\n\r\n\t// import a list of modules into the list\r\n\tlist.i = function(modules, mediaQuery) {\r\n\t\tif(typeof modules === \"string\")\r\n\t\t\tmodules = [[null, modules, \"\"]];\r\n\t\tvar alreadyImportedModules = {};\r\n\t\tfor(var i = 0; i < this.length; i++) {\r\n\t\t\tvar id = this[i][0];\r\n\t\t\tif(typeof id === \"number\")\r\n\t\t\t\talreadyImportedModules[id] = true;\r\n\t\t}\r\n\t\tfor(i = 0; i < modules.length; i++) {\r\n\t\t\tvar item = modules[i];\r\n\t\t\t// skip already imported module\r\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\r\n\t\t\t//  when a module is imported multiple times with different media queries.\r\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\r\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\r\n\t\t\t\tif(mediaQuery && !item[2]) {\r\n\t\t\t\t\titem[2] = mediaQuery;\r\n\t\t\t\t} else if(mediaQuery) {\r\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlist.push(item);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn list;\r\n};\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader/lib/css-base.js\n ** module id = 35\n ** module chunks = 0\n **/","/*\r\n\tMIT License http://www.opensource.org/licenses/mit-license.php\r\n\tAuthor Tobias Koppers @sokra\r\n*/\r\nvar stylesInDom = {},\r\n\tmemoize = function(fn) {\r\n\t\tvar memo;\r\n\t\treturn function () {\r\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\r\n\t\t\treturn memo;\r\n\t\t};\r\n\t},\r\n\tisOldIE = memoize(function() {\r\n\t\treturn /msie [6-9]\\b/.test(window.navigator.userAgent.toLowerCase());\r\n\t}),\r\n\tgetHeadElement = memoize(function () {\r\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\r\n\t}),\r\n\tsingletonElement = null,\r\n\tsingletonCounter = 0,\r\n\tstyleElementsInsertedAtTop = [];\r\n\r\nmodule.exports = function(list, options) {\r\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\r\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\r\n\t}\r\n\r\n\toptions = options || {};\r\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\r\n\t// tags it will allow on a page\r\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\r\n\r\n\t// By default, add <style> tags to the bottom of <head>.\r\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\r\n\r\n\tvar styles = listToStyles(list);\r\n\taddStylesToDom(styles, options);\r\n\r\n\treturn function update(newList) {\r\n\t\tvar mayRemove = [];\r\n\t\tfor(var i = 0; i < styles.length; i++) {\r\n\t\t\tvar item = styles[i];\r\n\t\t\tvar domStyle = stylesInDom[item.id];\r\n\t\t\tdomStyle.refs--;\r\n\t\t\tmayRemove.push(domStyle);\r\n\t\t}\r\n\t\tif(newList) {\r\n\t\t\tvar newStyles = listToStyles(newList);\r\n\t\t\taddStylesToDom(newStyles, options);\r\n\t\t}\r\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\r\n\t\t\tvar domStyle = mayRemove[i];\r\n\t\t\tif(domStyle.refs === 0) {\r\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\r\n\t\t\t\t\tdomStyle.parts[j]();\r\n\t\t\t\tdelete stylesInDom[domStyle.id];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n}\r\n\r\nfunction addStylesToDom(styles, options) {\r\n\tfor(var i = 0; i < styles.length; i++) {\r\n\t\tvar item = styles[i];\r\n\t\tvar domStyle = stylesInDom[item.id];\r\n\t\tif(domStyle) {\r\n\t\t\tdomStyle.refs++;\r\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\r\n\t\t\t}\r\n\t\t\tfor(; j < item.parts.length; j++) {\r\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tvar parts = [];\r\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\r\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\r\n\t\t\t}\r\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction listToStyles(list) {\r\n\tvar styles = [];\r\n\tvar newStyles = {};\r\n\tfor(var i = 0; i < list.length; i++) {\r\n\t\tvar item = list[i];\r\n\t\tvar id = item[0];\r\n\t\tvar css = item[1];\r\n\t\tvar media = item[2];\r\n\t\tvar sourceMap = item[3];\r\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\r\n\t\tif(!newStyles[id])\r\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\r\n\t\telse\r\n\t\t\tnewStyles[id].parts.push(part);\r\n\t}\r\n\treturn styles;\r\n}\r\n\r\nfunction insertStyleElement(options, styleElement) {\r\n\tvar head = getHeadElement();\r\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\r\n\tif (options.insertAt === \"top\") {\r\n\t\tif(!lastStyleElementInsertedAtTop) {\r\n\t\t\thead.insertBefore(styleElement, head.firstChild);\r\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\r\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\r\n\t\t} else {\r\n\t\t\thead.appendChild(styleElement);\r\n\t\t}\r\n\t\tstyleElementsInsertedAtTop.push(styleElement);\r\n\t} else if (options.insertAt === \"bottom\") {\r\n\t\thead.appendChild(styleElement);\r\n\t} else {\r\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\r\n\t}\r\n}\r\n\r\nfunction removeStyleElement(styleElement) {\r\n\tstyleElement.parentNode.removeChild(styleElement);\r\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\r\n\tif(idx >= 0) {\r\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\r\n\t}\r\n}\r\n\r\nfunction createStyleElement(options) {\r\n\tvar styleElement = document.createElement(\"style\");\r\n\tstyleElement.type = \"text/css\";\r\n\tinsertStyleElement(options, styleElement);\r\n\treturn styleElement;\r\n}\r\n\r\nfunction createLinkElement(options) {\r\n\tvar linkElement = document.createElement(\"link\");\r\n\tlinkElement.rel = \"stylesheet\";\r\n\tinsertStyleElement(options, linkElement);\r\n\treturn linkElement;\r\n}\r\n\r\nfunction addStyle(obj, options) {\r\n\tvar styleElement, update, remove;\r\n\r\n\tif (options.singleton) {\r\n\t\tvar styleIndex = singletonCounter++;\r\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\r\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\r\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\r\n\t} else if(obj.sourceMap &&\r\n\t\ttypeof URL === \"function\" &&\r\n\t\ttypeof URL.createObjectURL === \"function\" &&\r\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\r\n\t\ttypeof Blob === \"function\" &&\r\n\t\ttypeof btoa === \"function\") {\r\n\t\tstyleElement = createLinkElement(options);\r\n\t\tupdate = updateLink.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t\tif(styleElement.href)\r\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\r\n\t\t};\r\n\t} else {\r\n\t\tstyleElement = createStyleElement(options);\r\n\t\tupdate = applyToTag.bind(null, styleElement);\r\n\t\tremove = function() {\r\n\t\t\tremoveStyleElement(styleElement);\r\n\t\t};\r\n\t}\r\n\r\n\tupdate(obj);\r\n\r\n\treturn function updateStyle(newObj) {\r\n\t\tif(newObj) {\r\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\r\n\t\t\t\treturn;\r\n\t\t\tupdate(obj = newObj);\r\n\t\t} else {\r\n\t\t\tremove();\r\n\t\t}\r\n\t};\r\n}\r\n\r\nvar replaceText = (function () {\r\n\tvar textStore = [];\r\n\r\n\treturn function (index, replacement) {\r\n\t\ttextStore[index] = replacement;\r\n\t\treturn textStore.filter(Boolean).join('\\n');\r\n\t};\r\n})();\r\n\r\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\r\n\tvar css = remove ? \"\" : obj.css;\r\n\r\n\tif (styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\r\n\t} else {\r\n\t\tvar cssNode = document.createTextNode(css);\r\n\t\tvar childNodes = styleElement.childNodes;\r\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\r\n\t\tif (childNodes.length) {\r\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\r\n\t\t} else {\r\n\t\t\tstyleElement.appendChild(cssNode);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction applyToTag(styleElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar media = obj.media;\r\n\r\n\tif(media) {\r\n\t\tstyleElement.setAttribute(\"media\", media)\r\n\t}\r\n\r\n\tif(styleElement.styleSheet) {\r\n\t\tstyleElement.styleSheet.cssText = css;\r\n\t} else {\r\n\t\twhile(styleElement.firstChild) {\r\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\r\n\t\t}\r\n\t\tstyleElement.appendChild(document.createTextNode(css));\r\n\t}\r\n}\r\n\r\nfunction updateLink(linkElement, obj) {\r\n\tvar css = obj.css;\r\n\tvar sourceMap = obj.sourceMap;\r\n\r\n\tif(sourceMap) {\r\n\t\t// http://stackoverflow.com/a/26603875\r\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\r\n\t}\r\n\r\n\tvar blob = new Blob([css], { type: \"text/css\" });\r\n\r\n\tvar oldSrc = linkElement.href;\r\n\r\n\tlinkElement.href = URL.createObjectURL(blob);\r\n\r\n\tif(oldSrc)\r\n\t\tURL.revokeObjectURL(oldSrc);\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/style-loader/addStyles.js\n ** module id = 36\n ** module chunks = 0\n **/","define([\n  'bluebird',\n  'lib/underscore',\n  'component/grid/projection/base',\n  'component/grid/schema/properties.js',\n], function (Promise, _, BaseProjection, schemaProperties) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'jsdata.query': undefined,\n      'jsdata.entity': undefined,\n      'jsdata.options': undefined,\n      'skip': undefined,\n      'take': undefined,\n      'filter': undefined,\n      'orderby': [],\n      'select': [],\n    },\n    name: 'jsdata',\n\n    update: function () {\n      var entity = this.get('jsdata.entity');\n      var options = _.defaults(this.get('jsdata.options'), { all: true });\n      var op = {};\n\n      this.p$fetchData || this.trigger('update:beginning');\n\n      var take = this.get('take');\n\n      if (take) {\n        op.limit = take;\n      }\n\n      var skip = this.get('skip');\n\n      if (skip) {\n        op.offset = skip;\n      }\n\n      var filter = this.get('filter');\n\n      if (filter) {\n        op.where = filter;\n      }\n\n      var query = this.get('jsdata.query');\n\n      if (query) {\n        op.query = query;\n      }\n\n      var orderby = this.get('orderby');\n\n      if (orderby && orderby.length) {\n        op.orderBy = _.reduce(orderby, function (arr, obj) {\n          _.each(obj, function (value, key) {\n            arr.push([key, value > 0 ? 'ASC' : 'DESC']);\n          });\n          return arr;\n        }, []);\n      }\n\n      var p$fetchData = this.p$fetchData = entity.findAll(op, options)\n        .then(function (data) {\n          if (this.p$fetchData === p$fetchData) {\n            var delta = {\n              value: data,\n              count: data.totalCount,\n              select: schemaProperties.from(data),\n            };\n            if (_.has(data, 'raw')) {\n              delta.rawValue = data.raw;\n            }\n            this.patch(delta);\n          }\n        }.bind(this))\n        .catch(function (jqXHR, textStatus, errorThrown) {\n          if (this.p$fetchData === p$fetchData) {\n            this.patch({\n              error: errorThrown,\n            });\n          }\n        }.bind(this))\n        .finally(function () {\n          if (this.p$fetchData === p$fetchData) {\n            this.trigger('update:finished');\n            this.p$fetchData = null;\n          }\n        }.bind(this));\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/jsdata.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection, schemaProperties /* , Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      // todo [akamel] consider supporting a select on this level?\n      map: _.identity,\n    },\n    name: 'map',\n    update: function (options) {\n      // Model.__super__.update.call(this, options);\n\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var map = this.get('map');\n        var value = _.isFunction(map) ? _.map(model.get('value'), map) : model.get('value');\n\n        value = _.flatten(value);\n\n        this.patch({\n          value: value,\n          select: _.without(schemaProperties.from(value), '$metadata'),\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/map.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection, schemaProperties /* , Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'skip': 0,\n      'take': Number.MAX_VALUE,\n      'filter': function () {\n        return true;\n      },\n      'orderby': [],\n      'select': [],\n      'column.sortable': {},\n    },\n    name: 'map-queryable',\n    beforeSet: function (local) {\n      if (_.has(local, 'filter')) {\n        if (!_.isFunction(local.filter)) {\n          local.filter = this.defaults.filter;\n        }\n      }\n    },\n    update: function (options) {\n      // Model.__super__.update.call(this, options);\n\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var order = _.chain(this.get('orderby')).first().pairs().first().value();\n\n        var orderKey = _.first(order);\n        var orderDir = _.last(order);\n\n        var value = _.chain(model.get('value')).filter(this.get('filter'));\n        var sortFunc = this.get('column.sortable')[orderKey];\n\n        if (orderKey) {\n          if (_.isFunction(sortFunc)) {\n            value = _.chain(sortFunc(value.value(), orderDir));\n          } else {\n            value = value.sortBy(orderKey);\n            if (orderDir === -1) {\n              value = value.reverse();\n            }\n          }\n        }\n\n        value = value\n          .rest(this.get('skip'))\n          .first(this.get('take'))\n          .value();\n\n        var select = this.get('select');\n        if (!_.size(select)) {\n          select = schemaProperties.from(value);\n        }\n\n        this.patch({\n          value: value,\n          select: select,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/memory-queryable.js\n **/","define(['component/grid/projection/base'], function (BaseProjection) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      seed: [],\n    },\n    update: function () {\n      this.trigger('update:beginning');\n\n      var value = this.get('seed');\n\n      this.data.set({\n        value: value,\n        count: value.length,\n      });\n\n      this.trigger('update:finished');\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/memory.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n], function (_, Backbone, BaseProjection) {\n  var wrds = ['troubles', 'kahlua', 'poncho', 'suzie', 'baheyya'];\n  var idx = 0;\n\n  function randomRow() {\n    var wrd1 = wrds[_.random(0, wrds.length - 1)];\n    var wrd2 = wrds[_.random(0, wrds.length - 1)];\n\n    return {\n      index: idx++,\n      name: wrd1 + ' ' + wrd2,\n      age: _.random(0, 22),\n    };\n  }\n\n  var Model = BaseProjection.extend({\n    defaults: {\n      n: 5000,\n    },\n    name: 'mock',\n    update: function () {\n      this.trigger('update:beginning');\n      var value = [];\n\n      _(this.get('n')).times(function () {\n        value.push(randomRow());\n      });\n\n      this.data.set({\n        value: value,\n        count: value.length,\n      });\n      this.trigger('update:finished');\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/mock.js\n **/","define([\n  'bluebird',\n  'lib/underscore',\n  'lib/backbone',\n  'lib/jquery',\n  'component/grid/projection/base',\n  'component/grid/projection/mock',\n  'component/grid/schema/properties',\n], function (Promise, _, Backbone, $, BaseProjection, MemoryMock, schemaProperties) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      verb: 'get',\n      url: undefined,\n      skip: undefined,\n      take: undefined,\n      filter: undefined,\n      orderby: [],\n      select: [],\n    },\n    name: 'odata',\n    update: function () {\n      this.p$fetchData || this.trigger('update:beginning');\n\n      var url = this.get('url');\n\n      url = _.isFunction(url) ? url() : url;\n      var op = {\n        url: url,\n        $format: 'json',\n      // todo [akamel] this is odata v3 specific\n        $count: true,\n      };\n\n      var take = this.get('take');\n      if (take) {\n        op.$top = take;\n      }\n\n      var skip = this.get('skip');\n      if (skip) {\n        op.$skip = skip;\n      }\n\n      // todo [akamel] only supports one order column\n      var orderby = this.get('orderby');\n      if (_.size(orderby)) {\n        var col = _.first(orderby);\n        var key = _.keys(col)[0];\n        var dir = col[key];\n\n        op.$orderby = key + ' ' + (dir > 0 ? 'asc' : 'desc');\n      }\n\n      var p$fetchData = this.p$fetchData = new Promise(function (resolve, reject) {\n        $.getJSON(op.url, _.omit(op, 'url'))\n          .success(resolve)\n          .error(function (jqXHR, textStatus, errorThrown) {\n            reject(errorThrown);\n          });\n      }).then(function (data) {\n        if (p$fetchData === this.p$fetchData) {\n          var delta = {\n            value: data.value,\n            rawValue: data,\n            select: schemaProperties.from(data.value),\n            count: data['@odata.count'],\n            error: undefined,\n          };\n          this.patch(delta);\n        }\n      }.bind(this)).catch(function (error) {\n        if (p$fetchData === this.p$fetchData) {\n          this.patch({ error: error });\n        }\n      }).finally(function () {\n        if (p$fetchData === this.p$fetchData) {\n          this.trigger('update:finished');\n          this.p$fetchData = null;\n        }\n      }.bind(this));\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/odata.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'page.size': 20,\n      'page.number': 0, // zero based\n    },\n    name: 'page',\n    // todo [akamel] what if we piped after the data was set?\n    beforeSet: function (local, other) {\n      var size = _.has(local, 'page.size') ? local['page.size'] : this.get('page.size');\n      var number = _.has(local, 'page.number') ? local['page.number'] : this.get('page.number');\n\n      // todo [akamel] sanetize size and number here\n      size = Math.max(size, 0);\n      number = Math.max(number, 0);\n\n      _.extend(other, {\n        take: size,\n        skip: size * number,\n      });\n    },\n    update: function (options) {\n      var model = this.src.data;\n      var size = Math.max(this.get('page.size'), 0);\n      var count = Math.max(0, model.get('count'));\n\n      options = options || {};\n\n      if (options.deep) {\n        if (this.src) {\n          var number = Math.max(this.get('page.number'), 0);\n\n          this.src.set({\n            take: size,\n            skip: size * number,\n          }, { silent: true });\n        }\n      }\n\n      // Model.__super__.update.call(this, options);\n\n      // if we came in with an update:deep\n      if (Model.__super__.update.call(this, options)) {\n        var pageCount = Math.ceil(count / size);\n\n        this.patch({ 'page.count': pageCount });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/page.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'property.template': {},\n    },\n    name: 'property-template',\n    update: function (options) {\n      // Model.__super__.update.call(this, options);\n\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var opt = this.get('property.template');\n        var value = _.map(model.get('value'), function (item) {\n          var ret = _.clone(item);\n\n          _.each(opt, function (value, key) {\n            if (_.has(ret, key)) {\n              var res = value({\n                model: item,\n                property: key,\n              });\n\n              if (!_.isObject(ret[key])) {\n                var obj = new Object(ret[key]); // eslint-disable-line\n\n                if (_.isUndefined(ret[key])) {\n                  obj.$undefined = true;\n                }\n\n                if (_.isNull(ret[key])) {\n                  obj.$null = true;\n                }\n\n                ret[key] = obj;\n              }\n\n              ret[key].$html = res;\n            }\n          });\n\n          return ret;\n        });\n\n        this.patch({ value: value });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/property-template.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/layout/template/selectable.jade',\n], function (_, Backbone, BaseProjection, selectableTemplate) {\n  'use strict';\n\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.checked': 'checkbox',   // the checkbox column\n      'row.check.id': 'Id',\n      'row.check.list': [],\n      'row.check.checked.all': false, // used to store user's check value for the special case no rows or all rows is disabled\n      'row.check.single': false,\n      'row.check.allow': function () {\n        return true;\n      },\n    },\n    name: 'row-check',\n    events: {\n      'layout:click:cell': 'tdClick',\n      'layout:click:header': 'thClick',\n    },\n    reset: function () {\n      this.set({\n        'row.check.checked.all': false,\n        'row.check.list': [],\n      });\n    },\n    update: function (options) {\n      // Model.__super__.update.call(this, options);\n\n      if (Model.__super__.update.call(this, options)) {\n        var checkId = this.get('row.check.id');\n        var ids = _.pluck(this.src.data.get('value'), checkId);\n        var checked = _.intersection(this.get('row.check.list'), ids);\n        var checkedLookup = _.object(checked, []);\n        var col = this.get('column.checked');\n        var columns = _.clone(this.src.data.get('columns'));\n        var checkedAll = true;\n        var hasCheckboxable = false;\n        var checkboxAllow = this.get('row.check.allow');\n        var checkboxColumn = _.find(columns, function (item) {\n          return item.property === col;\n        });\n        var isSingle = this.get('row.check.single');\n\n        this.set('row.check.list', checked, { silent: true });\n\n        // todo [akamel] it is not clear how 'hasCheckboxable' is used\n        var value = _.map(this.src.data.get('value'), function (item) {\n          var ret = _.clone(item);\n          var checked = false;\n          var disabled = true;\n          var isAllowed = _.isFunction(checkboxAllow) ? checkboxAllow(ret) : checkboxAllow;\n\n          if (isAllowed) {\n            checked = _.has(checkedLookup, ret[checkId]);\n            checkedAll = checkedAll && checked;\n            disabled = false;\n            hasCheckboxable = true;\n\n            ret[col] = _.extend({}, ret[col], {\n              $html: selectableTemplate({\n                type: isSingle ? 'radio' : 'checkbox',\n                checked: checked,\n                disabled: disabled,\n              }),\n            });\n          }\n\n          return ret;\n        });\n\n        // set the checkbox in th\n        if (!_.isUndefined(checkboxColumn)) {\n          if (isSingle) {\n            checkboxColumn.$html = '<span/>';\n          } else {\n            var disabled = _.size(ids) === 0;\n            if (hasCheckboxable) {\n              checkboxColumn.$html = selectableTemplate({\n                type: 'checkbox',\n                checked: checkedAll,\n                disabled: disabled,\n              });\n              this.attributes['row.check.checked.all'] = checkedAll;\n            } else {\n              checkboxColumn.$html = selectableTemplate({\n                type: 'checkbox',\n                checked: this.get('row.check.checked.all'),\n                disabled: disabled,\n              });\n            }\n          }\n        }\n\n        this.patch({\n          value: value,\n          columns: columns,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n    tdClick: function (e, arg) {\n      var checkboxProperty = this.get('column.checked');\n      var isSingle = this.get('row.check.single');\n\n      if (arg.property === checkboxProperty) {\n        var list = this.get('row.check.list');\n        var id = arg.model[this.get('row.check.id')];\n\n        if (isSingle) {\n          this.set({ 'row.check.list': [id] });\n        } else {\n          this.set({\n            'row.check.list': arg.checked ? list.concat([id]) : _.without(list, id),\n          });\n        }\n\n        this.update();\n      }\n    },\n    thClick: function (e, arg) {\n      var checkboxProperty = this.get('column.checked');\n\n      if (arg.property === checkboxProperty) {\n        var list = [];\n\n        if (arg.checked) {\n          var checkId = this.get('row.check.id');\n          // TODO [akamel] this concept of check allow is strange\n          var checkboxAllow = this.get('row.check.allow');\n\n          // get the list of allowed rows' id\n          list = _.chain(this.data.get('value'))\n            .filter(function (item) {\n              return (_.isFunction(checkboxAllow) ? checkboxAllow(item) : checkboxAllow) && !_.isUndefined(item[checkId]);\n            })\n            .map(function (item) {\n              return item[checkId];\n            })\n            .value();\n        }\n\n        this.set({\n          'row.check.list': list,\n          'row.check.checked.all': arg.checked,\n        });\n\n        this.update();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/row-checkbox.js\n **/","var jade = require(\"/Users/wewei/Repos/lyweiwei/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (checked, disabled, type) {\nbuf.push(\"<input\" + (jade.attr(\"type\", type, true, true)) + (jade.attr(\"checked\", checked, true, true)) + (jade.attr(\"disabled\", disabled, true, true)) + \" class=\\\"column-selection\\\">\");}.call(this,\"checked\" in locals_for_with?locals_for_with.checked:typeof checked!==\"undefined\"?checked:undefined,\"disabled\" in locals_for_with?locals_for_with.disabled:typeof disabled!==\"undefined\"?disabled:undefined,\"type\" in locals_for_with?locals_for_with.type:typeof type!==\"undefined\"?type:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/selectable.jade\n ** module id = 46\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/layout/template/row.tri-state-checked.jade',\n], function (_, Backbone, BaseProjection, defaultRowCheckTemp) {\n  'use strict';\n\n  var CheckTransitionRule = {};\n\n  // CheckTransitionRule functions determine the state transition of a checkbox.\n  // State transition depends on the current state and wheather a short or full cycle is requested.\n  // When the short  cycle is requested the checkbox cannot return to the indeterminate state,\n  // event if it started in this state.\n  // Two directions of transition are available:\n  // ... -> indeterminate -> checked -> unchecked -> ...\n  // ... -> indeterminate -> unchecked -> checked -> ...\n  CheckTransitionRule.indeterminateToChecked = (function () {\n    var nextState = {\n      unchecked: function (shortCycle) {\n        return shortCycle ? 'checked' : 'indeterminate';\n      },\n      checked: _.constant('unchecked'),\n      indeterminate: _.constant('checked'),\n    };\n\n    return function (shortCycle, currentState) {\n      return _.has(nextState, currentState) && nextState[currentState](shortCycle) || 'unchecked';\n    };\n  })();\n\n  CheckTransitionRule.indeterminateToUnchecked = (function () {\n    var nextState = {\n      unchecked: _.constant('checked'),\n      checked: function (shortCycle) {\n        return shortCycle ? 'unchecked' : 'indeterminate';\n      },\n      indeterminate: _.constant('unchecked'),\n    };\n\n    return function (shortCycle, currentState) {\n      return _.has(nextState, currentState) && nextState[currentState](shortCycle) || 'unchecked';\n    };\n  })();\n\n  CheckTransitionRule.indeterminateToCheckedFullCycle = function (currentState) {\n    return CheckTransitionRule.indeterminateToChecked(false, currentState);\n  };\n\n  CheckTransitionRule.indeterminateToUncheckedFullCycle = function (currentState) {\n    return CheckTransitionRule.indeterminateToUnchecked(false, currentState);\n  };\n\n  CheckTransitionRule.indeterminateToCheckedShortCycle = function (currentState) {\n    return CheckTransitionRule.indeterminateToChecked(true, currentState);\n  };\n\n  CheckTransitionRule.indeterminateToUncheckedShortCycle = function (currentState) {\n    return CheckTransitionRule.indeterminateToUnchecked(true, currentState);\n  };\n\n  function getAllCheckState(checkStateCounters, count) {\n    return _.findKey(checkStateCounters, function (c) {\n      return c === count;\n    }) || 'unchecked';\n  }\n\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.checked': 'checkbox',  // the checkbox column\n      'row.check.id': 'Id',\n      'row.check.map': {},\n      'row.check.all': { state: 'unchecked' },    // used to store user's check value for the special case no rows or all rows is disabled\n      'row.check.allow': function () {\n        return true;\n      },\n      'row.check.click-anywhere': false,\n      'row.check.transition': CheckTransitionRule.indeterminateToCheckedShortCycle,\n      'row.check.all.transition': CheckTransitionRule.indeterminateToCheckedShortCycle,\n      'row.check.template': defaultRowCheckTemp,\n    },\n    name: 'row-check',\n    events: {\n      'layout:click:cell': 'tdClick',\n      'layout:click:header': 'thClick',\n    },\n    reset: function () {\n      this.set({\n        'row.check.checked.all': false,\n        'row.check.map': {},\n      });\n    },\n    update: function (options) {\n      if (!Model.__super__.update.call(this, options)) {\n        return;\n      }\n\n      var checkId = this.get('row.check.id');\n      var ids = _.pluck(this.src.data.get('value'), checkId);\n      var checkMap = this.get('row.check.map');\n      var col = this.get('column.checked');\n      var columns = _.clone(this.src.data.get('columns'));\n      var checkStateCounters = _.object(\n          ['unchecked', 'checked', 'indeterminate'],\n          [0, 0, 0]\n        );\n      var hasCheckboxable = false;\n      var checkboxAllow = this.get('row.check.allow');\n      var checkboxColumn = _.find(columns, function (item) {\n        return item.property === col;\n      });\n      var rowCheckTemp = this.get('row.check.template');\n\n      var value = _.map(this.src.data.get('value'), function (item) {\n        var ret = _.clone(item);\n        var check = checkMap[ret[checkId]] || { state: 'unchecked' };\n        var disabled = true;\n        var isAllowed = _.isFunction(checkboxAllow) ? checkboxAllow(ret) : checkboxAllow;\n\n        checkStateCounters[check.state]++;\n\n        if (isAllowed) {\n          disabled = false;\n          hasCheckboxable = true;\n        }\n\n        ret[col] = _.extend({}, ret[col], {\n          $html: rowCheckTemp({ checkState: check.state, disabled: disabled }),\n        });\n\n        return ret;\n      });\n\n      // set the checkbox in th\n      if (!_.isUndefined(checkboxColumn)) {\n        var disabledAllCheck = _.size(ids) === 0;\n\n        if (hasCheckboxable) {\n          var checkState = getAllCheckState(checkStateCounters, ids.length);\n\n          checkboxColumn.$html = rowCheckTemp({ checkState: checkState, disabled: disabledAllCheck });\n          this.attributes['row.check.all'] = _.extend(this.attributes['row.check.all'], { state: checkState });\n        } else {\n          checkboxColumn.$html = rowCheckTemp({ checkState: this.get('row.check.all').state, disabled: disabledAllCheck });\n        }\n      }\n\n      this.patch({\n        value: value,\n        columns: columns,\n      });\n    },\n    tdClick: function (e, arg) {\n      var checkboxProperty = this.get('column.checked');\n      var clickAnywhere = this.get('row.check.click-anywhere');\n\n      if (arg.property === checkboxProperty || clickAnywhere) {\n        var checkMap = _.clone(this.get('row.check.map'));\n        var id = arg.model[this.get('row.check.id')];\n        var defaultTransition = this.get('row.check.transition');\n        var check = _.extend({id: id, transition: defaultTransition, state: 'unchecked'}, checkMap[id]);\n\n        check.state = check.transition(check.state);\n        checkMap[id] = check;\n\n        this.set({\n          'row.check.map': checkMap,\n        });\n\n        e.stopImmediatePropagation();\n      }\n    },\n    thClick: function (e, arg) {\n      var checkboxProperty = this.get('column.checked');\n\n      if (arg.property === checkboxProperty) {\n        var checkMap = _.clone(this.get('row.check.map'));\n        var checkId = this.get('row.check.id');\n        var allCheck = this.get('row.check.all');\n        var checkState = allCheck.state;\n        var allCheckTransitionRule = this.get('row.check.all.transition');\n        var CheckTransitionRule = this.get('row.check.transition');\n\n        allCheck.state = allCheckTransitionRule(checkState);\n\n        checkMap = _.object(\n          this.data.get('value')\n          .map(function (item) {\n            var id = item[checkId];\n            var check = _.extend({id: id, transition: CheckTransitionRule}, checkMap[id], {state: allCheck.state});\n\n            return [id, check];\n          })\n        );\n\n        this.set({\n          'row.check.map': checkMap,\n          'row.check.all': allCheck,\n        });\n\n        e.stopImmediatePropagation();\n      }\n    },\n  });\n\n  function CheckDiff(added, changed, removed, unchanged) {\n    this.added = added || {};\n    this.changed = changed || {};\n    this.removed = removed || {};\n    this.unchanged = unchanged || {};\n  }\n\n  CheckDiff.prototype.hasChanges = function () {\n    return _.keys(this.changed).length + _.keys(this.added).length > 0;\n  };\n\n  function diffCheckMap(before, after, defaultState) {\n    defaultState = defaultState || { state: 'unchecked' };\n\n    var checkDiff = new CheckDiff();\n\n    _.keys(before).forEach(function (key) {\n      var beforeState = before[key];\n      var afterState = after[key];\n\n      if (!afterState) {\n        checkDiff.removed[key] = beforeState;\n      } else if (beforeState.state === afterState.state) {\n        checkDiff.unchanged[key] = afterState;\n      } else {\n        checkDiff.changed[key] = { before: beforeState, after: afterState };\n      }\n    });\n\n    _.keys(after).forEach(function (key) {\n      var afterState = after[key];\n      var beforeState = before[key];\n\n      if (!beforeState && defaultState.state !== afterState.state) {\n        checkDiff.added[key] = afterState;\n      }\n    });\n\n    return checkDiff;\n  }\n\n  function statCheckMap(checkMap, defaultState) {\n    defaultState = defaultState || { state: 'unchecked' };\n    var checked = [];\n    var indeterminate = [];\n    var unchecked = [];\n\n    _.keys(checkMap).forEach(function (key) {\n      var check = checkMap[key];\n\n      if (check.state === 'checked' && check.state !== defaultState.state) {\n        checked.push(check);\n      } else if (check.state === 'unchecked' && check.state !== defaultState.state) {\n        unchecked.push(check);\n      } else if (check.state !== defaultState.state) {\n        indeterminate.push(check);\n      }\n    });\n\n    return {\n      checked: checked,\n      unchecked: unchecked,\n      indeterminate: indeterminate,\n    };\n  }\n\n  function fullStatCheckMap(before, after, defaultState) {\n    return _.extend(statCheckMap(after, defaultState), diffCheckMap(before, after, defaultState));\n  }\n\n  Model.CheckTransitionRule = CheckTransitionRule;\n  Model.fullStatCheckMap = fullStatCheckMap;\n  Model.statCheckMap = statCheckMap;\n  Model.diffCheckMap = diffCheckMap;\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/row-tri-state-checkbox.js\n **/","var jade = require(\"/Users/wewei/Repos/lyweiwei/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (checkState) {\nvar classes = [].concat(checkState === 'indeterminate' ? ['glyphicon', 'glyphicon-minus'] : checkState === 'checked' ? ['glyphicon', 'glyphicon-ok'] : [])\nbuf.push(\"<div class=\\\"column-tri-state-checkbox\\\"><span\" + (jade.cls([classes], [true])) + \"></span></div>\");}.call(this,\"checkState\" in locals_for_with?locals_for_with.checkState:typeof checkState!==\"undefined\"?checkState:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/row.tri-state-checked.jade\n ** module id = 48\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {},\n    name: 'row-index',\n    update: function (options) {\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var skip = this.get('skip');\n        var value = _.map(model.get('value'), function (i, idx) {\n          var ret = _.clone(i);\n          ret.rowIndex = idx + (_.isFinite(skip) ? skip : 0) + 1;\n          return ret;\n        });\n\n        this.patch({ value: value });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/row-index.js\n **/","define([\n  'lib/underscore',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n], function (_, BaseProjection, schemaProperties) {\n  var Model = BaseProjection.extend({\n\n    defaults: {\n      seed: null,\n    },\n\n    name: 'sink',\n\n    update: function () {\n      var value;\n\n      value = this.get('seed');\n\n      if (value) {\n        var select = schemaProperties.from(value);\n        this.patch({\n          value: value,\n          select: select,\n          count: _.size(value),\n        });\n      }\n    },\n\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/sink.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.group': {},\n      'column.groupExpansion': [],\n      'column.select': null,\n    },\n    name: 'column-group',\n\n    events: {\n      'layout:click:header': 'onClickHeader',\n    },\n\n    update: function (options) {\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var columnGroup = this.get('column.group') || {};\n        var groupExpansion = {};\n        _.each(this.get('column.groupExpansion') || [], function (columnName) {\n          groupExpansion[columnName] = true;\n        });\n        var select = this.get('column.select') || model.get('select');\n        var columns = model.get('columns');\n        var subSelect = [];\n        var isApplyGroup = false;\n\n        _.each(columnGroup, function (subColumns, name) {\n          if (!_.has(columns, name)) {\n            return;\n          }\n          isApplyGroup = true;\n          columns[name].group = subColumns;\n          // remove the columns that appear in the select\n          select = _.difference(select, subColumns);\n          columns[name].groupExpansion = _.has(groupExpansion, name);\n        }, this);\n        var selectExpand = select.slice(0);\n\n        _.each(select, function (columnName) {\n          var column = columns[columnName];\n          var subColumns = column.group;\n          if (column.groupExpansion) {\n            var nameIndex = selectExpand.indexOf(columnName);\n            selectExpand.splice.apply(selectExpand, [nameIndex, 1].concat(subColumns));\n            subSelect = subSelect.concat(subColumns);\n          }\n        }, this);\n\n        this.patch({\n          columns: columns,\n          select: select,\n          subSelect: subSelect,\n          selectExpand: selectExpand,\n          isApplyGroup: isApplyGroup,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n\n    onClickHeader: function (e, arg) {\n      if (!e.target.classList.contains('glyphicon')) {\n        return;\n      }\n      var column = arg.column;\n      if (_.isArray(column.group)) {\n        var groupExpansion = this.get('column.groupExpansion') || [];\n        if (column.groupExpansion) {\n          groupExpansion = _.without(groupExpansion, column.property);\n        } else {\n          groupExpansion = _.union(groupExpansion, [column.property]);\n        }\n        this.set({ 'column.groupExpansion': groupExpansion });\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/column-group.js\n **/","import BaseProjection from './base';\n\nconst ColumnsProjection = BaseProjection.extend({\n  defaults: {\n    columns: {},\n  },\n\n  name: 'columns',\n\n  update(options) {\n    if (BaseProjection.prototype.update.call(this, options)) {\n      this.patch({\n        columns: this.get('columns'),\n      });\n    }\n  },\n\n});\n\nexport default ColumnsProjection;\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/projection/columns.js\n **/","import _ from 'underscore';\nimport GridView from '../grid-view';\nimport layout from '../layout/index';\n\nexport default definePlugin => definePlugin('gridView', [\n  'config',\n  'projection',\n  'renderers',\n], function (config, projection, renderers) {\n  return new GridView({\n    projection,\n    el: config.el,\n    container: _.chain(config)\n      .result('scrollable')\n      .result('fixedHeader')\n      .result('container')\n      .value(),\n    schema: config.dataSource.schema,\n    Layout: layout.TableLayout.partial({\n      renderers,\n      template: layout.templates.table,\n      hideHeaders: config.hideHeaders,\n    }),\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/factory/grid-view-plugin.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/model/index',\n  'component/grid/windowContainer',\n  'component/grid/elementContainer',\n], function (_, Backbone, Options, WindowContainer, ElementContainer) {\n  var GridView = Backbone.View.extend({\n    // todo [akamel] document available options\n    initialize: function (options) {\n      options = options || {};\n\n      this.options = new Options(options);\n\n      var container = selectContainer(options.container);\n\n      // todo [akamel] assert that layout is a ctor\n      this.layout = new options.Layout({\n        el: this.el,\n        grid: this,\n        container: container,\n      });\n\n      this.projection = options.projection;\n\n      this.projection.data.on('change', function () {\n        this.trigger.apply(this, ['change:data'].concat(_.toArray(arguments)));\n      }.bind(this));\n\n      this.options.on('change', function () {\n        this.trigger.apply(this, ['change:options'].concat(_.toArray(arguments)));\n      }.bind(this));\n\n      this.projection.on('all', function () {\n        this.trigger.apply(this, ['data:' + _.first(arguments)].concat(_.rest(arguments)));\n      }.bind(this));\n\n      this.layout.on('all', function () {\n        var key = 'layout:' + _.first(arguments);\n        var arg = [key].concat(_.rest(arguments));\n\n        this.projection.bubble.apply(this.projection, arg);\n        this.trigger.apply(this, arg);\n      }.bind(this));\n\n      // todo [akamel] this is a temporary implementation of orderby; should be in layout not in grid\n      this.on('layout:click:header', function (e, arg) {\n        var column = arg.column;\n\n        if (column.sortable) {\n          var orderby = {};\n\n          var key = _.isString(column.sortable) ? column.sortable : column.property;\n\n          orderby[key] = column.$orderby ? column.$orderby.dir * -1 : 1;\n\n          this.projection.set({ 'orderby': [orderby], 'page.number': 0 });\n        }\n      }.bind(this));\n\n      var local = _.omit(options, 'projection', 'layout');\n      this.options.set(local);\n    },\n\n    remove: function () {\n      this.layout.remove();\n      Backbone.View.prototype.remove.apply(this, arguments);\n    },\n\n    set: function () {\n      this.options.set.apply(this.options, _.toArray(arguments));\n    },\n\n    render: function (options) {\n      options = options || {};\n\n      this.layout.render();\n\n      if (options.fetch) {\n        this.projection.update({ deep: true });\n      }\n\n      return this;\n    },\n\n    getSelection: function () {\n      return this.projection.get('row.check.list') || [];\n    },\n\n  });\n\n  function selectContainer(userContainer) {\n    if (userContainer && window !== userContainer && ElementContainer.isValidContainer(userContainer)) {\n      return new ElementContainer({ el: userContainer });\n    }\n\n    return new WindowContainer();\n  }\n\n  return GridView;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/grid-view.js\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n], function (_, Backbone) {\n  return Backbone.Model.extend({\n    defaults: {\n      layout: undefined,\n      projection: undefined,\n    },\n  });\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/model/index.js\n **/","define([\n  'lib/underscore',\n  'lib/jquery',\n  'component/grid/containerBase',\n], function (_, $, ContainerBase) {\n  var WindowContainer = ContainerBase.extend({\n    constructor: function (options) {\n      options = _.extend({}, options, { el: window });\n      ContainerBase.prototype.constructor.apply(this, [options].concat(_.rest(arguments)));\n    },\n\n    offset: function (element) {\n      return $(element).offset();\n    },\n  });\n\n  return WindowContainer;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/windowContainer.js\n **/","define([\n  'lib/underscore',\n  'lib/jquery',\n  'lib/backbone',\n], function (_, $, Backbone) {\n  var ContainerBase = Backbone.View.extend({\n    events: {\n      scroll: 'onScroll',\n      resize: 'onResize',\n    },\n\n    onScroll: function (e) {\n      this.trigger('scroll:container', e);\n    },\n\n    onResize: function (e) {\n      this.trigger('resize:container', e);\n    },\n\n    offset: function (/* element, scrollTop, scrollLeft */) {\n      throw new Error(\"Offset function not implemented\");\n    },\n  });\n\n  return ContainerBase;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/containerBase.js\n **/","define([\n  'lib/underscore',\n  'lib/jquery',\n  'component/grid/containerBase',\n], function (_, $, ContainerBase) {\n  var ElementContainer = ContainerBase.extend({\n    offset: function (element) {\n      var position = $(element).position();\n\n      return {\n        top: position.top + this.$el.scrollTop(),\n        left: position.left + this.$el.scrollLeft(),\n      };\n    },\n  });\n\n  ElementContainer.isValidContainer = function (userContainer) {\n    return ['absolute', 'relative', 'fixed'].indexOf($(userContainer).css('position')) >= 0;\n  };\n\n  return ElementContainer;\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/elementContainer.js\n **/"],"sourceRoot":""}