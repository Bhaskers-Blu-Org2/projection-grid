{"version":3,"sources":["webpack/universalModuleDefinition","webpack/bootstrap 74b59b9400d8900d9a07","webpack-src:///projection-grid-example/js/index.js","webpack-src:///projection-grid-example/js/grid-view.js","external \"underscore\"","external \"backbone\"","webpack-src:///projection-grid-example/js/model/index.js","webpack-src:///projection-grid-example/js/windowContainer.js","external \"jquery\"","webpack-src:///projection-grid-example/js/containerBase.js","webpack-src:///projection-grid-example/js/elementContainer.js","webpack-src:///projection-grid-example/js/projection/index.js","webpack-src:///projection-grid-example/js/projection/aggregate-row.js","webpack-src:///projection-grid-example/js/projection/base.js","webpack-src:///projection-grid-example/js/model/response.js","webpack-src:///projection-grid-example/js/projection/column-i18n.js","webpack-src:///projection-grid-example/js/schema/properties.js","webpack-src:///projection-grid-example/js/projection/column-queryable.js","webpack-src:///projection-grid-example/js/projection/column-shifter.js","webpack-src:///projection-grid-example/js/projection/column-template.js","webpack-src:///projection-grid-example/js/projection/editable-string.js","webpack-src:///projection-grid-example/js/layout/template/row.editable.string.jade","webpack-src:///projection-grid-example/node_modules/jade/lib/runtime.js","ignored /Users/wewei/Repos/Microsoft/projection-grid/node_modules/jade/lib fs","webpack-src:///projection-grid-example/js/projection/editable.js","webpack-src:///projection-grid-example/js/layout/template/editable.jade","webpack-src:///projection-grid-example/js/popup-editor/index.js","external \"bluebird\"","webpack-src:///projection-grid-example/js/popup-editor/index.jade","webpack-src:///projection-grid-example/js/projection/jsdata.js","webpack-src:///projection-grid-example/js/projection/map.js","webpack-src:///projection-grid-example/js/projection/memory-queryable.js","webpack-src:///projection-grid-example/js/projection/memory.js","webpack-src:///projection-grid-example/js/projection/mock.js","webpack-src:///projection-grid-example/js/projection/odata.js","webpack-src:///projection-grid-example/js/projection/page.js","webpack-src:///projection-grid-example/js/projection/property-template.js","webpack-src:///projection-grid-example/js/projection/row-checkbox.js","webpack-src:///projection-grid-example/js/layout/template/row.checked.jade","webpack-src:///projection-grid-example/js/projection/row-tri-state-checkbox.js","webpack-src:///projection-grid-example/js/layout/template/row.tri-state-checked.jade","webpack-src:///projection-grid-example/js/projection/row-index.js","webpack-src:///projection-grid-example/js/projection/sink.js","webpack-src:///projection-grid-example/js/projection/column-group.js","webpack-src:///projection-grid-example/js/layout/index.js","webpack-src:///projection-grid-example/js/layout/table.js","webpack-src:///projection-grid-example/js/layout/template/table.jade","webpack-src:///projection-grid-example/js/layout/renderer/index.js","webpack-src:///projection-grid-example/js/layout/renderer/fixed-header.js","webpack-src:///projection-grid-example/js/layout/measure.js","webpack-src:///projection-grid-example/js/layout/px.js","webpack-src:///projection-grid-example/js/layout/renderer/virtualization.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;ACtCA;AACA;AACA;AACA;AACA;;;;;;;iECJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;;AAEA;AACA;AACA,QAAO;;AAEP;AACA;AACA,QAAO;;AAEP;AACA;AACA,QAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA,QAAO;;AAEP,sEAAqE;AACrE;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,gCAA+B,yCAAyC;AACxE;AACA,QAAO;;AAEP;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;;AAEA;AACA,iCAAgC,aAAa;AAC7C;;AAEA;AACA,MAAK;;AAEL,IAAG;;AAEH;AACA;AACA,oCAAmC,oBAAoB;AACvD;;AAEA;AACA;;AAEA;AACA,EAAC;;;;;;;AChGD,gD;;;;;;ACAA,gD;;;;;;iECAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH,EAAC;;;;;;;iECVD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA2B,YAAY,aAAa;AACpD;AACA,MAAK;;AAEL;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;ACjBD,gD;;;;;;iECAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iECzBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;;AAEA;AACA,EAAC;;;;;;;ACrBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;iECtBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gDAA+C,oBAAoB;AACnE,MAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAW;AACX;AACA;AACA,MAAK;;AAEL,IAAG;;AAEH;AACA,EAAC;;;;;;;iECtDD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAqB,eAAe;AACpC,QAAO;AACP,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA,MAAK;;AAEL,gDAA+C;AAC/C,6BAA4B;;AAE5B;AACA,uBAAsB,gBAAgB;AACtC,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,EAAC;;;;;;;iEC9JD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL,IAAG;AACH,EAAC;;;;;;;iECZD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,mDAAkD;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX,UAAS;;AAET;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iEC1DD;AACA;AACA;AACA;AACA;;AAEA,4BAA2B;AAC3B;;AAEA,WAAU;AACV,EAAC;;;;;;;iECVD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAuB,qBAAqB,GAAG,gBAAgB;AAC/D;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,gCAA+B;AAC/B;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iEClFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;AACL;AACA,mDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA;;AAEA;AACA;AACA;AACA,2BAA0B,uBAAuB;AACjD;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA,2BAA0B,uBAAuB;AACjD;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,mBAAkB,qBAAqB;AACvC;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iEC9FD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA2B;AAC3B,MAAK;AACL;AACA;AACA,mDAAkD;AAClD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAS;;AAET,qBAAoB,mBAAmB;AACvC,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;ACxCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAkC;AAClC,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gDAA+C;;AAE/C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,kDAAiD,6BAA6B;AAC9E;AACA,YAAW;;AAEX;AACA,UAAS;;AAET,qBAAoB,eAAe;AACnC;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;AC/DD;;AAEA;AACA;AACA;AACA;AACA,EAAC,mCAAmC,EAAE;AACtC,yIAAwI,sIAAsI;AAC9Q,E;;;;;;ACRA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA,oBAAmB,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,EAAE;AACb,aAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,EAAE;AACb,aAAY;AACZ;AACA;AACA;AACA;AACA,gFAA+E,iBAAiB,EAAE;AAClG;AACA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,gBAAgB;AAC3B,aAAY;AACZ;AACA;AACA;AACA,kBAAiB,oBAAoB;AACrC;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,MAAK,SAAS;AACd,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB,aAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;AACA;AACA,8CAA6C;AAC7C;AACA;AACA;AACA;AACA;AACA,wEAAuE;AACvE,IAAG;AACH;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;AACA;;AAEA;;AAEA;AACA,oBAAmB,iBAAiB;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,aAAY;AACZ;AACA;;AAEA;AACA,cAAa;AACb,aAAY;AACZ,aAAY;AACZ,eAAc;AACd;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACrPA,gB;;;;;;iECAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA,UAAS,IAAI;;AAEb;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA0C;AAC1C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA,2CAA0C;AAC1C;;AAEA;AACA;AACA;AACA,gBAAe;AACf;AACA;AACA,YAAW;AACX,UAAS;;AAET,qBAAoB,eAAe;AACnC;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA,UAAS;AACT;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL,IAAG;AACH,EAAC;;;;;;;AC/GD;;AAEA;AACA;AACA;AACA;AACA,EAAC,mCAAmC,EAAE;AACtC,yJAAwJ,8MAA8M;AACtW,E;;;;;;iECRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;AACP,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA,+BAA8B,mCAAmC;AACjE;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,QAAO;;AAEP;AACA;AACA,QAAO;AACP;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP,MAAK;AACL;AACA,EAAC;;;;;;;ACnED,iD;;;;;;ACAA;;AAEA;AACA;AACA;AACA;AACA,EAAC,mCAAmC,EAAE;AACtC,sCAAqC,gTAAgT,0GAA0G;AAC/b,E;;;;;;iECRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,6DAA4D,YAAY;AACxE;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA,UAAS;AACT,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iECzFD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iECnCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,4BAA2B;AAC3B,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAW;AACX;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iECxED;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAO;;AAEP;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iECpBD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA,QAAO;AACP;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iECzCD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,UAAS;AACT;AACA,wBAAuB;;AAEvB;AACA,UAAS;AACT;AACA;AACA,UAAS;AACT,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iEC1ED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,GAAG,eAAe;AAC7B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,qBAAoB,0BAA0B;AAC9C,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iEC5DD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA6B;AAC7B,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAe;;AAEf;AACA,gDAA+C;;AAE/C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW;;AAEX;AACA,UAAS;;AAET,qBAAoB,eAAe;AACnC,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iEC1DD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET,8CAA6C,eAAe;;AAE5D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAgC;AAChC;AACA;AACA;AACA,cAAa;AACb,YAAW;;AAEX;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA,YAAW;AACX;AACA;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,UAAS;;AAET;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;ACjJD;;AAEA;AACA;AACA;AACA;AACA,EAAC,mCAAmC,EAAE;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAE,0NAA0N;AAC5N,E;;;;;;iEC7BA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,0BAAyB;AACzB,yBAAwB,qBAAqB;AAC7C;AACA;AACA,QAAO;AACP;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,4BAA2B;AAC3B,QAAO;AACP,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA,gDAA+C;AAC/C;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,+BAA8B;AAC9B,gCAA+B,8CAA8C;AAC7E,UAAS;;AAET;AACA,QAAO;;AAEP;AACA;AACA;;AAEA;AACA;;AAEA,gDAA+C,qDAAqD;AACpG,0FAAyF,oBAAoB;AAC7G,UAAS;AACT,gDAA+C,0EAA0E;AACzH;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,+BAA8B,oDAAoD;;AAElF;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,mCAAkC,kCAAkC,4BAA4B,wBAAwB;;AAExH;AACA,YAAW;AACX;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qCAAoC;;AAEpC;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP,mCAAkC;AAClC;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA,qCAAoC;AACpC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,EAAC;;;;;;;ACpRD;;AAEA;AACA;AACA;AACA;AACA,EAAC,mCAAmC,EAAE;AACtC;AACA,gHAA+G,8HAA8H;AAC7O,E;;;;;;iECTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET,qBAAoB,eAAe;AACnC,QAAO;AACP;AACA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;iEC7BD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL,IAAG;;AAEH;AACA,EAAC;;;;;;;iEC/BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAwB;AACxB;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT,QAAO;AACP;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,mBAAkB,0CAA0C;AAC5D;AACA,MAAK;AACL,IAAG;;AAEH;AACA,EAAC;;;;;;;ACpFD;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;;;;;;iECNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,8BAA6B,eAAe;AAC5C,QAAO;;AAEP;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C;AAC7C;AACA,kBAAiB;;AAEjB;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA,QAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,8BAA6B,eAAe;;AAE5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,QAAO;;AAEP;AACA,MAAK;;AAEL;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,QAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;;AAEA;;AAEA,kBAAiB,qBAAqB;AACtC,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,QAAO;AACP,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,oCAAmC,SAAS,QAAQ,EAAE;AACtD;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,YAAW;AACX,UAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA,mBAAkB,kDAAkD;AACpE;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;;AAEP;AACA,MAAK;;AAEL;AACA;;AAEA;AACA,MAAK;AACL,IAAG;;AAEH;AACA,yBAAwB,mBAAmB;AAC3C;;AAEA;AACA,EAAC;;;;;;;ACxQD;;AAEA;AACA;AACA;AACA;AACA,EAAC,mCAAmC,EAAE;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,2CAA0C,oKAAoK,mDAAmD,IAAI;AACrQ;AACA;AACA;AACA;AACA;AACA;AACA,mCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA6C,kCAAkC,gBAAgB;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA,wCAAuC,SAAS;AAChD;;AAEA,gCAA+B;AAC/B,2CAA0C,4BAA4B;AACtE;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ,gCAA+B;AAC/B,2CAA0C,4BAA4B;AACtE;AACA,EAAC;AACD;AACA;;AAEA,6CAA4C,cAAc;AAC1D;;AAEA;AACA;;AAEA,IAAG;AACH;AACA;AACA,aAAY;;AAEZ;AACA;;AAEA;AACA,EAAC;;AAED;AACA;;AAEA;AACA,EAAC;;AAED,+BAA8B,suBAA8vB;AAC5xB,E;;;;;;AC5QA;AACA;AACA;AACA;;;;;;;iECHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,uDAAsD;;AAEtD;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAuB,aAAa;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP,MAAK;AACL;AACA;AACA,QAAO;;AAEP;AACA;AACA;;AAEA;AACA;AACA,wCAAuC;AACvC;AACA;;AAEA;AACA,EAAC;;;;;;;iEClGD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;;;;;;AC9ED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAC;;;;;;;AClBD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wBAAuB,WAAW;AAClC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,QAAO;;AAEP;AACA;AACA;AACA,QAAO;AACP;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wCAAuC;AACvC;AACA;;AAEA;AACA,EAAC","file":"projection-grid.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"underscore\"), require(\"backbone\"), require(\"jquery\"), require(\"bluebird\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"underscore\", \"backbone\", \"jquery\", \"bluebird\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"projection-grid\"] = factory(require(\"underscore\"), require(\"backbone\"), require(\"jquery\"), require(\"bluebird\"));\n\telse\n\t\troot[\"projection-grid\"] = factory(root[\"underscore\"], root[\"backbone\"], root[\"jquery\"], root[\"bluebird\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_25__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 74b59b9400d8900d9a07\n **/","module.exports = {\n  GridView: require('./grid-view'),\n  projections: require('./projection/index'),\n  layout: require('./layout/index'),\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/index.js\n ** module id = 0\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/model/index',\n  'component/grid/windowContainer',\n  'component/grid/elementContainer',\n], function (_, Backbone, Options, WindowContainer, ElementContainer) {\n  var GridView = Backbone.View.extend({\n    // todo [akamel] document available options\n    initialize: function (options) {\n      options = options || {};\n\n      this.options = new Options(options);\n\n      var container = selectContainer(options.container);\n\n      // todo [akamel] assert that layout is a ctor\n      this.layout = new options.Layout({\n        el: this.el,\n        grid: this,\n        container: container,\n      });\n\n      this.projection = options.projection;\n\n      this.projection.data.on('change', function () {\n        this.trigger.apply(this, ['change:data'].concat(_.toArray(arguments)));\n      }.bind(this));\n\n      this.options.on('change', function () {\n        this.trigger.apply(this, ['change:options'].concat(_.toArray(arguments)));\n      }.bind(this));\n\n      this.projection.on('all', function () {\n        this.trigger.apply(this, ['data:' + _.first(arguments)].concat(_.rest(arguments)));\n      }.bind(this));\n\n      this.layout.on('all', function () {\n        var key = 'layout:' + _.first(arguments);\n        var arg = [key].concat(_.rest(arguments));\n\n        this.projection.bubble.apply(this.projection, arg);\n        this.trigger.apply(this, arg);\n      }.bind(this));\n\n      // todo [akamel] this is a temporary implementation of orderby; should be in layout not in grid\n      this.on('layout:click:header', function (e, arg) {\n        var column = arg.column;\n\n        if (column.sortable) {\n          var orderby = {};\n\n          var key = _.isString(column.sortable) ? column.sortable : column.property;\n\n          orderby[key] = column.$orderby ? column.$orderby.dir * -1 : 1;\n\n          this.projection.set({ 'orderby': [orderby], 'page.number': 0 });\n        }\n      }.bind(this));\n\n      var local = _.omit(options, 'projection', 'layout');\n      this.options.set(local);\n    },\n\n    remove: function () {\n      this.layout.remove();\n      Backbone.View.prototype.remove.apply(this, arguments);\n    },\n\n    set: function () {\n      this.options.set.apply(this.options, _.toArray(arguments));\n    },\n\n    render: function (options) {\n      options = options || {};\n\n      this.layout.render();\n\n      if (options.fetch) {\n        this.projection.update({ deep: true });\n      }\n\n      return this;\n    },\n\n  });\n\n  function selectContainer(userContainer) {\n    if (userContainer && window !== userContainer && ElementContainer.isValidContainer(userContainer)) {\n      return new ElementContainer({ el: userContainer });\n    }\n\n    return new WindowContainer();\n  }\n\n  return GridView;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/grid-view.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"backbone\"\n ** module id = 3\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n], function (_, Backbone) {\n  return Backbone.Model.extend({\n    defaults: {\n      layout: undefined,\n      projection: undefined,\n    },\n  });\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/model/index.js\n ** module id = 4\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/jquery',\n  'component/grid/containerBase',\n], function (_, $, ContainerBase) {\n  var WindowContainer = ContainerBase.extend({\n    constructor: function (options) {\n      options = _.extend({}, options, { el: window });\n      ContainerBase.prototype.constructor.apply(this, [options].concat(_.rest(arguments)));\n    },\n\n    offset: function (element) {\n      return $(element).offset();\n    },\n  });\n\n  return WindowContainer;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/windowContainer.js\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 6\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/jquery',\n  'lib/backbone',\n], function (_, $, Backbone) {\n  var ContainerBase = Backbone.View.extend({\n    events: {\n      scroll: 'onScroll',\n      resize: 'onResize',\n    },\n\n    onScroll: function (e) {\n      this.trigger('scroll:container', e);\n    },\n\n    onResize: function (e) {\n      this.trigger('resize:container', e);\n    },\n\n    offset: function (/* element, scrollTop, scrollLeft */) {\n      throw new Error(\"Offset function not implemented\");\n    },\n  });\n\n  return ContainerBase;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/containerBase.js\n ** module id = 7\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/jquery',\n  'component/grid/containerBase',\n], function (_, $, ContainerBase) {\n  var ElementContainer = ContainerBase.extend({\n    offset: function (element) {\n      var position = $(element).position();\n\n      return {\n        top: position.top + this.$el.scrollTop(),\n        left: position.left + this.$el.scrollLeft(),\n      };\n    },\n  });\n\n  ElementContainer.isValidContainer = function (userContainer) {\n    return ['absolute', 'relative', 'fixed'].indexOf($(userContainer).css('position')) >= 0;\n  };\n\n  return ElementContainer;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/elementContainer.js\n ** module id = 8\n ** module chunks = 0\n **/","module.exports = {\n  AggregateRow: require('./aggregate-row'),\n  Base: require('./base'),\n  ColumnI18n: require('./column-i18n'),\n  ColumnQueryable: require('./column-queryable'),\n  ColumnShifter: require('./column-shifter'),\n  ColumnTemplate: require('./column-template'),\n  EditableString: require('./editable-string'),\n  Editable: require('./editable'),\n  JSData: require('./jsdata'),\n  Map: require('./map'),\n  MemoryQueryable: require('./memory-queryable'),\n  Memory: require('./memory'),\n  Mock: require('./mock'),\n  Odata: require('./odata'),\n  Page: require('./page'),\n  PropertyTemplate: require('./property-template'),\n  RowCheckbox: require('./row-checkbox'),\n  RowTriStateCheckboxProjection: require('./row-tri-state-checkbox'),\n  RowIndex: require('./row-index'),\n  Sink: require('./sink'),\n  ColumnGroup: require('./column-group'),\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/index.js\n ** module id = 9\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n], function (_, Backbone, BaseProjection) {\n  var createRows = function (fn, data) {\n    var rows = fn(data);\n\n    _.each(rows, function (row) {\n      row.$metadata = _.extend(row.$metadata, { type: 'aggregate' });\n    });\n\n    return rows;\n  };\n\n  var Model = BaseProjection.extend({\n\n    defaults: {\n      'aggregate.top': null,\n      'aggregate.bottom': null,\n    },\n\n    name: 'aggregate-row',\n\n    update: function (options) {\n      var value, topFn, rowTop, bottomFn, rowBottom;\n\n      if (Model.__super__.update.call(this, options)) {\n        value = this.src.data.get('value');\n\n        if (value) {\n          topFn = this.get('aggregate.top');\n          bottomFn = this.get('aggregate.bottom');\n          rowTop = _.isFunction(topFn) ? createRows(topFn, this.src.data) : null;\n          rowBottom = _.isFunction(bottomFn) ? createRows(bottomFn, this.src.data) : null;\n\n          if (rowTop) {\n            value = _.flatten(rowTop).concat(value);\n          }\n\n          if (rowBottom) {\n            value = value.concat(_.flatten(rowBottom));\n          }\n\n          this.patch({\n            value: value,\n          });\n        }\n      }\n    },\n\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/aggregate-row.js\n ** module id = 10\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/model/response',\n], function (_, Backbone, Response) {\n  var Model = Backbone.Model.extend({\n    initialize: function () {\n      _.bindAll(this, 'onSrcUpdate', 'beforeSet', 'afterSet', 'update');\n      this.data = new Response();\n      this.src = undefined;\n      this.on('change', function (model) {\n        // todo [akamel] the model here is the settings model\n        this.update({ model: model });\n      }.bind(this));\n    },\n\n    constructor: function () {\n      // used to figure out which options to set localy and which ones to pass down the pipe\n      this.localKeys = _.keys(this.defaults);\n      // todo [akamel] this might prevent us from overriding initialize\n      Model.__super__.constructor.apply(this, arguments);\n    },\n\n    pipe: function (to) {\n      if (to) {\n        to.setSrc(this);\n      }\n\n      return to;\n    },\n\n    setSrc: function (src) {\n      this.src = src;\n      if (this.src) {\n        this.src.data.off('change', this.onSrcUpdate);\n        this.src.off('all', this.bubble);\n      }\n\n      if (this.src) {\n        this.src.data.on('change', this.onSrcUpdate);\n        this.src.on('all', this.bubble);\n      }\n\n      this.update();\n    },\n\n    patch: function (delta) {\n      var src = this.src ? this.src.data.toJSON() : {};\n      delta = _.isObject(delta) ? delta : {};\n\n      this.data.set(_.defaults(delta, this.attributes, src));\n    },\n\n    beforeSet: function (/* local, other */) {},\n    afterSet: function () {},\n\n    onSrcUpdate: function (/* model */) {\n      this.update(/* { model : model } */);\n    },\n    bubble: function () {\n      var key = _.first(arguments);\n\n      if (_.has(this.events, key)) {\n        var fct = this[this.events[key]];\n        if (_.isFunction(fct)) {\n          fct.apply(this, _.rest(arguments));\n        }\n      }\n\n      // todo [akamel] can this result in multiple redraw calls?\n      if (this.src) {\n        this.src.bubble.apply(this.src, _.toArray(arguments));\n      }\n    },\n\n    update: function (options) {\n      options = options || {};\n\n      if (this.src) {\n        if (options.deep) {\n          this.src.update(options);\n          return false;\n        }\n\n        return true;\n      }\n\n      return false;\n    },\n  });\n\n  Model.prototype.set = function (key, value, options) {\n    var obj = {};\n\n    if (_.isString(key)) {\n      obj[key] = value;\n    } else {\n      obj = key;\n      options = value;\n    }\n\n    var local = _.pick(obj, this.localKeys);\n    var other = _.omit(obj, this.localKeys);\n\n    this.beforeSet(local, other);\n\n    var ret = Model.__super__.set.call(this, local, options);\n\n    // todo [akamel] if we set options that span multiple data sources we will trigger change multiple times in the chain??\n    // pass along non-local options\n    if (_.size(other)) {\n      if (this.src) {\n        this.src.set(other, options);\n      }\n    }\n    this.afterSet();\n\n    return ret;\n  };\n\n  Model.keyRegex = /^([\\w_\\-$]+):(.+)$/;\n\n  Model.prototype.get = function (key) {\n    var match = Model.keyRegex.exec(key);\n\n    if (match) {\n      var type = match[1];\n      var name = match[2];\n\n      switch (type) {\n        case 'projection': {\n          var p = this;\n          do {\n            if (p.name === name) {\n              return p;\n            }\n            p = p.src;\n          } while (p);\n          break;\n        }\n        default: {\n          throw new Error('unknown special get key type');\n        }\n      }\n    } else {\n      var ret = Model.__super__.get.apply(this, arguments);\n\n      if (_.isUndefined(ret)) {\n        if (this.src) {\n          ret = this.src.get.apply(this.src, arguments);\n        }\n      }\n\n      return ret;\n    }\n  };\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/base.js\n ** module id = 11\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n], function (_, Backbone) {\n  return Backbone.Model.extend({\n    defaults: {\n      value: [],\n      select: [],\n      count: 0,\n      aggregate: [],\n    },\n  });\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/model/response.js\n ** module id = 12\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.i18n': {\n        '': function (name) {\n          return name;\n        },\n      },\n    },\n    name: 'column-i18n',\n    beforeSet: function (local) {\n      if (_.has(local, 'column.i18n')) {\n        if (!_.isObject(local['column.i18n'])) {\n          local['column.i18n'] = this.defaults['column.i18n'];\n        }\n      }\n    },\n    update: function (options) {\n      // todo [akamel] when calling a deep update; suppress onchange event based updates\n      // Model.__super__.update.call(this, options);\n\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var colOptions = this.get('column.i18n');\n        var columns = model.get('columns') || {};\n        var select = _.size(columns) ? _.keys(columns) : model.get('select');\n        var $default = colOptions[''];\n\n        var i18nColumns = {};\n        _.each(select, function (element) {\n          var opt = colOptions[element];\n          if (_.isUndefined(opt)) {\n            opt = $default;\n          }\n\n          i18nColumns[element] = _.defaults({\n            $text: _.isFunction(opt) ? opt(element) : opt,\n            property: element,\n          }, columns[element]);\n        });\n\n        this.patch({\n          columns: i18nColumns,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/column-i18n.js\n ** module id = 13\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n], function (_) {\n  function from(arr) {\n    var obj = _.first(arr);\n\n    return _.keys(obj || {});\n  }\n\n  return { from: from };\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/schema/properties.js\n ** module id = 14\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.skip': 0,\n      'column.take': Number.MAX_VALUE,\n      'column.lock': [],\n      'column.filter': function () {\n        return true;\n      },\n      'column.in': undefined,\n    },\n    name: 'column-queryable',\n    update: function (options) {\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var take = this.get('column.take');\n        var skip = this.get('column.skip');\n        var lock = this.get('column.lock') || [];\n        var filter = this.get('column.filter');\n        // todo [akamel] consider renaming to column.select\n        var $in = this.get('column.in');\n        var select = _.size(model.get('columns')) ? _.map(model.get('columns'), function (i) {\n          return i.property;\n        }) : model.get('select');\n        var unlocked = _.isFunction(filter) ? _.filter($in || select, filter) : ($in || select);\n        var lookup = model.get('columns');\n        var set = _.chain(unlocked).difference(lock).value();\n        var col = set;\n\n        if (!_.isNumber(take)) {\n          take = Number.MAX_VALUE;\n        }\n\n        take = Math.max(take - _.size(lock), 0);\n        if (_.size(set) < skip) {\n          skip = 0;\n          // this.set({ 'columns.skip' : 0 }, { silent : true });\n        }\n\n        // start query\n        var skipped = _.first(set, skip);\n\n        if (skip) {\n          col = _.rest(set, skip);\n        }\n\n        var remaining = _.rest(col, take);\n\n        col = _.union(lock, _.first(col, take));\n        // end query\n\n        _.each(col, function (element) {\n          if (!lookup[element]) {\n            lookup[element] = { property: element };\n          }\n          lookup[element].$lock = _.contains(lock, element);\n        });\n\n        this.patch({\n          'select': col,\n          // todo [akamel] rename to column.in???\n          // , 'columns.select'  : set\n          'columns.skipped': skipped,\n          'columns.remaining': remaining,\n          // , 'columns.count'   : _.size(res)\n          // todo [akamel] do we still need to update skip?\n          'column.skip': skip,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/column-queryable.js\n ** module id = 15\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n    },\n    name: 'column-shifter',\n    events: {\n      'layout:click:header': 'thClick',\n    },\n    update: function (options) {\n      // todo [akamel] when calling a deep update; suppress onchange event based updates\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        // todo [akamel] have 'columns' crated at the source so we don't have to put this all over the place\n        var columns = model.get('columns');\n        var select = model.get('select');\n        var colSkipped = model.get('columns.skipped');\n        var colRemaining = model.get('columns.remaining');\n\n        var unlockedAt = Math.max(_.findIndex(select, function (col) {\n          return columns[col] && !columns[col].$lock;\n        }), 0);\n\n        var hasLess = _.size(colSkipped);\n        var hasMore = _.size(colRemaining);\n\n        var colLess = {\n          property: 'column.skip.less',\n          $metadata: {\n            'attr.head': { class: ['skip-less'] },\n            'enabled': hasLess,\n          },\n          $html: '<span class=\"glyphicon glyphicon-triangle-left\" />',\n        };\n        var colMore = {\n          property: 'column.skip.more',\n          $metadata: {\n            'attr.head': { class: ['skip-more'] },\n            'enabled': hasMore,\n          },\n          $html: '<span class=\"glyphicon glyphicon-triangle-right\" />',\n        };\n\n        if (!hasLess) {\n          colLess.$metadata['attr.head'].class.push('disabled');\n        }\n\n        if (!hasMore) {\n          colMore.$metadata['attr.head'].class.push('disabled');\n        }\n\n        select.splice(unlockedAt, 0, colLess.property);\n        columns[colLess.property] = colLess;\n        select.push(colMore.property);\n        columns[colMore.property] = colMore;\n\n        this.patch({\n          columns: columns,\n          select: select,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n    thClick: function (e, arg) {\n      if (_.has(arg.column, '$metadata') && arg.column.$metadata.enabled) {\n        var ret = 0;\n        var skip = this.get('column.skip');\n\n        // todo [akamel] is this logic solid?\n        switch (arg.property) {\n          case 'column.skip.less': {\n            ret = _.isNumber(skip) ? Math.max(skip - 1, 0) : 0;\n            break;\n          }\n          case 'column.skip.more': {\n            ret = _.isNumber(skip) ? skip + 1 : 0;\n            break;\n          }\n          default:\n        }\n\n        this.set({ 'column.skip': ret });\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/column-shifter.js\n ** module id = 16\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'component/grid/projection/base',\n], function (_, BaseProjection) {\n  'use strict';\n\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.template': {},\n    },\n    name: 'column-template',\n    update: function (options) {\n      // todo [akamel] when calling a deep update; suppress onchange event based updates\n      // Model.__super__.update.call(this, options);\n\n      // TODO [imang]: columns: ideally we should not need to read from select.\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var colTemplate = this.get('column.template');\n        var columns = model.get('columns');\n        _.each(columns, function (item, property) {\n          var ret = _.clone(item);\n          var templateValue = colTemplate[property];\n\n          if (_.has(colTemplate, property)) {\n            ret.$html = _.isFunction(templateValue) ? templateValue(ret) : templateValue;\n          }\n\n          columns[property] = ret;\n        });\n\n        this.patch({ columns: columns });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/column-template.js\n ** module id = 17\n ** module chunks = 0\n **/","/**\n *\n * Important!!!\n *\n * The initial check-in is for unblock the simple grid in advanced campaign creation and\n * may cause bugs if you try to use it with some more complex grid. Please DO NOT use this\n * projection until we update this and remove the comments here.\n *\n * todo [yucongj, wewei] add the model to maintail the input data.\n *\n */\n\ndefine([\n  'lib/underscore',\n  'lib/jquery',\n  'component/grid/projection/base',\n  'component/grid/layout/template/row.editable.string.jade',\n], function (_, jquery, BaseProjection, editableTemplate) {\n  'use strict';\n\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.editable.string': {},\n    },\n    name: 'column-editable-string',\n    update: function (options) {\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var columnEditable = this.get('column.editable.string');\n        var value = _.map(model.get('value'), function (item) {\n          var ret = _.clone(item);\n\n          _.each(columnEditable, function (value, key) {\n            if (_.has(ret, key)) {\n              if (!_.isObject(ret[key])) {\n                var obj = new Object(ret[key]); //eslint-disable-line\n\n                if (_.isUndefined(ret[key])) {\n                  obj.$undefined = true;\n                }\n\n                if (_.isNull(ret[key])) {\n                  obj.$null = true;\n                }\n\n                ret[key] = obj;\n              }\n\n              var defaultValue = (ret[key].$undefined || ret[key].$null) ? value.defaultValue : ret[key];\n\n              ret[key].$html = editableTemplate({ defaultValue: defaultValue });\n            }\n          });\n\n          return ret;\n        });\n\n        this.patch({ value: value });\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/editable-string.js\n ** module id = 18\n ** module chunks = 0\n **/","var jade = require(\"/Users/wewei/Repos/Microsoft/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (defaultValue) {\nbuf.push(\"<input type=\\\"text\\\"\" + (jade.attr(\"value\", defaultValue, true, true)) + \" style=\\\"width:100%\\\" class=\\\"grid-text-input\\\">\");}.call(this,\"defaultValue\" in locals_for_with?locals_for_with.defaultValue:typeof defaultValue!==\"undefined\"?defaultValue:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/row.editable.string.jade\n ** module id = 19\n ** module chunks = 0\n **/","'use strict';\n\n/**\n * Merge two attribute objects giving precedence\n * to values in object `b`. Classes are special-cased\n * allowing for arrays and merging/joining appropriately\n * resulting in a string.\n *\n * @param {Object} a\n * @param {Object} b\n * @return {Object} a\n * @api private\n */\n\nexports.merge = function merge(a, b) {\n  if (arguments.length === 1) {\n    var attrs = a[0];\n    for (var i = 1; i < a.length; i++) {\n      attrs = merge(attrs, a[i]);\n    }\n    return attrs;\n  }\n  var ac = a['class'];\n  var bc = b['class'];\n\n  if (ac || bc) {\n    ac = ac || [];\n    bc = bc || [];\n    if (!Array.isArray(ac)) ac = [ac];\n    if (!Array.isArray(bc)) bc = [bc];\n    a['class'] = ac.concat(bc).filter(nulls);\n  }\n\n  for (var key in b) {\n    if (key != 'class') {\n      a[key] = b[key];\n    }\n  }\n\n  return a;\n};\n\n/**\n * Filter null `val`s.\n *\n * @param {*} val\n * @return {Boolean}\n * @api private\n */\n\nfunction nulls(val) {\n  return val != null && val !== '';\n}\n\n/**\n * join array as classes.\n *\n * @param {*} val\n * @return {String}\n */\nexports.joinClasses = joinClasses;\nfunction joinClasses(val) {\n  return (Array.isArray(val) ? val.map(joinClasses) :\n    (val && typeof val === 'object') ? Object.keys(val).filter(function (key) { return val[key]; }) :\n    [val]).filter(nulls).join(' ');\n}\n\n/**\n * Render the given classes.\n *\n * @param {Array} classes\n * @param {Array.<Boolean>} escaped\n * @return {String}\n */\nexports.cls = function cls(classes, escaped) {\n  var buf = [];\n  for (var i = 0; i < classes.length; i++) {\n    if (escaped && escaped[i]) {\n      buf.push(exports.escape(joinClasses([classes[i]])));\n    } else {\n      buf.push(joinClasses(classes[i]));\n    }\n  }\n  var text = joinClasses(buf);\n  if (text.length) {\n    return ' class=\"' + text + '\"';\n  } else {\n    return '';\n  }\n};\n\n\nexports.style = function (val) {\n  if (val && typeof val === 'object') {\n    return Object.keys(val).map(function (style) {\n      return style + ':' + val[style];\n    }).join(';');\n  } else {\n    return val;\n  }\n};\n/**\n * Render the given attribute.\n *\n * @param {String} key\n * @param {String} val\n * @param {Boolean} escaped\n * @param {Boolean} terse\n * @return {String}\n */\nexports.attr = function attr(key, val, escaped, terse) {\n  if (key === 'style') {\n    val = exports.style(val);\n  }\n  if ('boolean' == typeof val || null == val) {\n    if (val) {\n      return ' ' + (terse ? key : key + '=\"' + key + '\"');\n    } else {\n      return '';\n    }\n  } else if (0 == key.indexOf('data') && 'string' != typeof val) {\n    if (JSON.stringify(val).indexOf('&') !== -1) {\n      console.warn('Since Jade 2.0.0, ampersands (`&`) in data attributes ' +\n                   'will be escaped to `&amp;`');\n    };\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will eliminate the double quotes around dates in ' +\n                   'ISO form after 2.0.0');\n    }\n    return ' ' + key + \"='\" + JSON.stringify(val).replace(/'/g, '&apos;') + \"'\";\n  } else if (escaped) {\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will stringify dates in ISO form after 2.0.0');\n    }\n    return ' ' + key + '=\"' + exports.escape(val) + '\"';\n  } else {\n    if (val && typeof val.toISOString === 'function') {\n      console.warn('Jade will stringify dates in ISO form after 2.0.0');\n    }\n    return ' ' + key + '=\"' + val + '\"';\n  }\n};\n\n/**\n * Render the given attributes object.\n *\n * @param {Object} obj\n * @param {Object} escaped\n * @return {String}\n */\nexports.attrs = function attrs(obj, terse){\n  var buf = [];\n\n  var keys = Object.keys(obj);\n\n  if (keys.length) {\n    for (var i = 0; i < keys.length; ++i) {\n      var key = keys[i]\n        , val = obj[key];\n\n      if ('class' == key) {\n        if (val = joinClasses(val)) {\n          buf.push(' ' + key + '=\"' + val + '\"');\n        }\n      } else {\n        buf.push(exports.attr(key, val, false, terse));\n      }\n    }\n  }\n\n  return buf.join('');\n};\n\n/**\n * Escape the given string of `html`.\n *\n * @param {String} html\n * @return {String}\n * @api private\n */\n\nvar jade_encode_html_rules = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;'\n};\nvar jade_match_html = /[&<>\"]/g;\n\nfunction jade_encode_char(c) {\n  return jade_encode_html_rules[c] || c;\n}\n\nexports.escape = jade_escape;\nfunction jade_escape(html){\n  var result = String(html).replace(jade_match_html, jade_encode_char);\n  if (result === '' + html) return html;\n  else return result;\n};\n\n/**\n * Re-throw the given `err` in context to the\n * the jade in `filename` at the given `lineno`.\n *\n * @param {Error} err\n * @param {String} filename\n * @param {String} lineno\n * @api private\n */\n\nexports.rethrow = function rethrow(err, filename, lineno, str){\n  if (!(err instanceof Error)) throw err;\n  if ((typeof window != 'undefined' || !filename) && !str) {\n    err.message += ' on line ' + lineno;\n    throw err;\n  }\n  try {\n    str = str || require('fs').readFileSync(filename, 'utf8')\n  } catch (ex) {\n    rethrow(err, null, lineno)\n  }\n  var context = 3\n    , lines = str.split('\\n')\n    , start = Math.max(lineno - context, 0)\n    , end = Math.min(lines.length, lineno + context);\n\n  // Error context\n  var context = lines.slice(start, end).map(function(line, i){\n    var curr = i + start + 1;\n    return (curr == lineno ? '  > ' : '    ')\n      + curr\n      + '| '\n      + line;\n  }).join('\\n');\n\n  // Alter exception message\n  err.path = filename;\n  err.message = (filename || 'Jade') + ':' + lineno\n    + '\\n' + context + '\\n\\n' + err.message;\n  throw err;\n};\n\nexports.DebugItem = function DebugItem(lineno, filename) {\n  this.lineno = lineno;\n  this.filename = filename;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/jade/lib/runtime.js\n ** module id = 20\n ** module chunks = 0\n **/","/* (ignored) */\n\n\n/*****************\n ** WEBPACK FOOTER\n ** fs (ignored)\n ** module id = 21\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/jquery',\n  'component/grid/projection/base',\n  'component/grid/layout/template/editable.jade',\n  'component/popup-editor/index',\n], function (_, $, BaseProjection, editableTemplate, PopupEditor) {\n  'use strict';\n\n  function isReadonlyRow(item) {\n    return !item || (item.$metadata && _.contains([\n      'aggregate',\n      'segmentation',\n    ], item.$metadata.type));\n  }\n\n  return BaseProjection.extend({\n    defaults: {\n      'column.editable': [],\n    },\n    name: 'column-editable',\n    events: {\n      'layout:click:cell': 'tdClick',\n    },\n\n    beforeSet: function (local) {\n      var editable = function () {\n        return true;\n      };\n\n      if (_.has(local, 'column.editable')) {\n        var conditions = _.reduce(local['column.editable'], function (conds, editableColumn) {\n          if (_.isString(editableColumn)) {\n            conds[editableColumn] = editable;\n          } else if (_.isObject(editableColumn) && _.isString(editableColumn.name)) {\n            conds[editableColumn.name] = _.isFunction(editableColumn.condition) ? editableColumn.condition : editable;\n          }\n          return conds;\n        }, {});\n\n        this.isEditable = function (key, item) {\n          return _.isFunction(conditions[key]) && conditions[key](item);\n        };\n      }\n    },\n\n    update: function (options) {\n      if (BaseProjection.prototype.update.call(this, options)) {\n        var model = this.src.data;\n        var columns = model.get('columns');\n        var iconClasses = this.get('editable.icon.class') || ['glyphicon', 'glyphicon-pencil'];\n\n        _.each(this.get('column.editable'), function (editableColumn) {\n          var key = _.isString(editableColumn) ? editableColumn : editableColumn.name;\n          if (key) {\n            var column = columns[key] || { property: key };\n            var $metadata = column.$metadata = column.$metadata || {};\n            var attrBody = $metadata['attr.body'] = $metadata['attr.body'] || {};\n            var className = attrBody.class || [];\n\n            if (_.isString(className)) {\n              className = className.split(/\\s+/);\n            }\n            attrBody.class = _.union(className, ['grid-editable-cell']);\n\n            columns[key] = column;\n          }\n        });\n\n        var value = _.map(model.get('value'), function (item) {\n          return isReadonlyRow(item) ? item : _.mapObject(item, function (value, key) {\n            if (this.isEditable(key, item)) {\n              if (!_.isObject(value)) {\n                value = new Object(value); // eslint-disable-line\n              }\n\n              value.$html = editableTemplate({\n                $html: value.$html || String(value),\n                classes: iconClasses,\n              });\n            }\n            return value;\n          }, this);\n        }, this);\n\n        this.patch({ value: value });\n      }\n    },\n\n    tdClick: function (e, arg) {\n      var schema = null;\n\n      if (!isReadonlyRow(arg.model) && this.isEditable(arg.property, arg.model) && e.target.tagName !== 'A') {\n        schema = arg.grid.options.get('schema');\n        PopupEditor.prompt({\n          template: 'inline',\n          model: _.clone(arg.model),\n          schema: schema,\n          fields: [{\n            showLabel: false,\n            property: arg.property,\n          }],\n          position: $(e.target).closest('td').position(),\n        }).then(function (model) {\n          if (model) {\n            this.trigger('edit', model);\n          }\n        }.bind(this));\n      }\n    },\n  });\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/editable.js\n ** module id = 22\n ** module chunks = 0\n **/","var jade = require(\"/Users/wewei/Repos/Microsoft/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function ($html, classes) {\nbuf.push(\"<div title=\\\"Edit\\\"\" + (jade.cls(['grid-edit-icon',classes], [null,true])) + \"></div>\" + (null == (jade_interp = $html) ? \"\" : jade_interp));}.call(this,\"$html\" in locals_for_with?locals_for_with.$html:typeof $html!==\"undefined\"?$html:undefined,\"classes\" in locals_for_with?locals_for_with.classes:typeof classes!==\"undefined\"?classes:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/editable.jade\n ** module id = 23\n ** module chunks = 0\n **/","define([\n  'jquery',\n  'bluebird',\n  'backbone',\n  './index.jade',\n], function ($, Promise, Backbone, template) {\n  var PopupEditor = Backbone.View.extend({\n    events: {\n      'click .save': function () {\n        this.trigger('save', this.model);\n      },\n      'click .cancel': function () {\n        this.trigger('cancel');\n      },\n      'change .editor': function (e) {\n        this.model[this.property] = e.target.value;\n      },\n    },\n\n    initialize(options) {\n      this.position = options.position;\n      this.model = options.model;\n      this.property = options.fields[0].property;\n    },\n\n    render() {\n      this.$el.html(template({ value: this.model[this.property] }));\n      this.$el.css({\n        position: 'absolute',\n        left: this.position.left,\n        top: this.position.top,\n      });\n      this.dismiss = function () {\n        this.trigger('cancel');\n      }.bind(this);\n\n      window.setTimeout(function () {\n        $(window).on('click', this.dismiss);\n      }, 0);\n      return this;\n    },\n\n    remove() {\n      $(window).off('click', this.dismiss);\n      Backbone.View.prototype.remove.apply(this, arguments);\n    },\n  });\n\n  return {\n    prompt: function (options) {\n      return new Promise(function (resolve /* , reject */) {\n        var editor = new PopupEditor(options);\n\n        document.body.appendChild(editor.render().el);\n\n        editor.on('save', function (model) {\n          resolve(model);\n          editor.remove();\n        });\n\n        editor.on('cancel', function () {\n          resolve();\n          editor.remove();\n        });\n      });\n    },\n  };\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/popup-editor/index.js\n ** module id = 24\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_25__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"bluebird\"\n ** module id = 25\n ** module chunks = 0\n **/","var jade = require(\"/Users/wewei/Repos/Microsoft/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (value) {\nbuf.push(\"<form style=\\\"padding: 5px; background: #e0e0e0\\\" class=\\\"form-inline\\\"><input type=\\\"text\\\"\" + (jade.attr(\"value\", value, true, true)) + \" class=\\\"form-control editor\\\">&nbsp<button type=\\\"button\\\" class=\\\"btn btn-primary save\\\">Save</button>&nbsp<button type=\\\"button\\\" class=\\\"btn btn-default cancel\\\">Cancel</button></form>\");}.call(this,\"value\" in locals_for_with?locals_for_with.value:typeof value!==\"undefined\"?value:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/popup-editor/index.jade\n ** module id = 26\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'component/grid/projection/base',\n], function (_, BaseProjection) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'jsdata.query': undefined,\n      'jsdata.entity': undefined,\n      'jsdata.options': undefined,\n      'skip': undefined,\n      'take': undefined,\n      'filter': undefined,\n      'orderby': [],\n      'select': [],\n    },\n    name: 'jsdata',\n\n    update: function () {\n      if (!this.isUpdating) {\n        this.isUpdating = true;\n        this.on('update:finished', function () {\n          this.isUpdating = false;\n        });\n        this.doUpdate();\n      }\n    },\n\n    doUpdate: function () {\n      var self = this;\n      var entity = this.get('jsdata.entity');\n      var options = _.defaults(this.get('jsdata.options'), { all: true });\n      var op = {};\n\n      this.trigger('update:beginning');\n\n      var take = this.get('take');\n\n      if (take) {\n        op.limit = take;\n      }\n\n      var skip = this.get('skip');\n\n      if (skip) {\n        op.offset = skip;\n      }\n\n      var filter = this.get('filter');\n\n      if (filter) {\n        op.where = filter;\n      }\n\n      var query = this.get('jsdata.query');\n\n      if (query) {\n        op.query = query;\n      }\n\n      var orderby = this.get('orderby');\n\n      if (orderby && orderby.length) {\n        op.orderBy = _.chain(orderby)\n          .map(_.pairs)\n          .map(function (pair) {\n            return [pair[0], pair[1] > 0 ? 'ASC' : 'DESC'];\n          })\n          .value();\n      }\n\n      entity.findAll(op, options)\n        .then(function (data) {\n          self.patch({\n            value: data,\n            count: data.totalCount,\n          });\n        })\n        .catch(function (jqXHR, textStatus, errorThrown) {\n          self.patch({\n            error: errorThrown,\n          });\n        })\n        .finally(function () {\n          self.trigger('update:finished');\n        });\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/jsdata.js\n ** module id = 27\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection, schemaProperties /* , Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      // todo [akamel] consider supporting a select on this level?\n      map: _.identity,\n    },\n    name: 'map',\n    update: function (options) {\n      // Model.__super__.update.call(this, options);\n\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var map = this.get('map');\n        var value = _.isFunction(map) ? _.map(model.get('value'), map) : model.get('value');\n\n        value = _.flatten(value);\n\n        this.patch({\n          value: value,\n          select: _.without(schemaProperties.from(value), '$metadata'),\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/map.js\n ** module id = 28\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection, schemaProperties /* , Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'skip': 0,\n      'take': Number.MAX_VALUE,\n      'filter': function () {\n        return true;\n      },\n      'orderby': [],\n      'select': [],\n      'column.sortable': {},\n    },\n    name: 'map-queryable',\n    beforeSet: function (local) {\n      if (_.has(local, 'filter')) {\n        if (!_.isFunction(local.filter)) {\n          local.filter = this.defaults.filter;\n        }\n      }\n    },\n    update: function (options) {\n      // Model.__super__.update.call(this, options);\n\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var order = _.chain(this.get('orderby')).first().pairs().first().value();\n\n        var orderKey = _.first(order);\n        var orderDir = _.last(order);\n\n        var value = _.chain(model.get('value')).filter(this.get('filter'));\n        var sortFunc = this.get('column.sortable')[orderKey];\n\n        if (orderKey) {\n          if (_.isFunction(sortFunc)) {\n            value = _.chain(sortFunc(value.value(), orderDir));\n          } else {\n            value = value.sortBy(orderKey);\n            if (orderDir === -1) {\n              value = value.reverse();\n            }\n          }\n        }\n\n        value = value\n          .rest(this.get('skip'))\n          .first(this.get('take'))\n          .value();\n\n        var select = this.get('select');\n        if (!_.size(select)) {\n          select = schemaProperties.from(value);\n        }\n\n        this.patch({\n          value: value,\n          select: select,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/memory-queryable.js\n ** module id = 29\n ** module chunks = 0\n **/","define(['component/grid/projection/base'], function (BaseProjection) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      seed: [],\n    },\n    update: function () {\n      this.trigger('update:beginning');\n\n      var value = this.get('seed');\n\n      this.data.set({\n        value: value,\n        count: value.length,\n      });\n\n      this.trigger('update:finished');\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/memory.js\n ** module id = 30\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n], function (_, Backbone, BaseProjection) {\n  var wrds = ['troubles', 'kahlua', 'poncho', 'suzie', 'baheyya'];\n  var idx = 0;\n\n  function randomRow() {\n    var wrd1 = wrds[_.random(0, wrds.length - 1)];\n    var wrd2 = wrds[_.random(0, wrds.length - 1)];\n\n    return {\n      index: idx++,\n      name: wrd1 + ' ' + wrd2,\n      age: _.random(0, 22),\n    };\n  }\n\n  var Model = BaseProjection.extend({\n    defaults: {\n      n: 5000,\n    },\n    name: 'mock',\n    update: function () {\n      this.trigger('update:beginning');\n      var value = [];\n\n      _(this.get('n')).times(function () {\n        value.push(randomRow());\n      });\n\n      this.data.set({\n        value: value,\n        count: value.length,\n      });\n      this.trigger('update:finished');\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/mock.js\n ** module id = 31\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'lib/jquery',\n  'component/grid/projection/base',\n  'component/grid/projection/mock',\n  'component/grid/schema/properties',\n], function (_, Backbone, $, BaseProjection, MemoryMock, schemaProperties) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      verb: 'get',\n      url: undefined,\n      skip: undefined,\n      take: undefined,\n      filter: undefined,\n      orderby: [],\n      select: [],\n    },\n    name: 'odata',\n    update: function () {\n      this.trigger('update:beginning');\n      var url = this.get('url');\n\n      url = _.isFunction(url) ? url() : url;\n      var op = {\n        url: url,\n        $format: 'json',\n      // todo [akamel] this is odata v3 specific\n        $count: true,\n      };\n\n      var take = this.get('take');\n      if (take) {\n        op.$top = take;\n      }\n\n      var skip = this.get('skip');\n      if (skip) {\n        op.$skip = skip;\n      }\n\n      // todo [akamel] only supports one order column\n      var orderby = this.get('orderby');\n      if (_.size(orderby)) {\n        var col = _.first(orderby);\n        var key = _.keys(col)[0];\n        var dir = col[key];\n\n        op.$orderby = key + ' ' + (dir > 0 ? 'asc' : 'desc');\n      }\n\n      $.getJSON(op.url, _.omit(op, 'url'))\n        .success(function (data) {\n          var delta = {\n            value: data.value,\n            select: schemaProperties.from(data.value),\n            count: data['@odata.count'],\n            error: undefined,\n          };\n\n          this.patch(delta);\n        }.bind(this))\n        .error(function (jqXHR, textStatus, errorThrown) {\n          var delta = { error: errorThrown };\n\n          this.patch(delta);\n        }.bind(this))\n        .complete(function () {\n          this.trigger('update:finished');\n        }.bind(this));\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/odata.js\n ** module id = 32\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'page.size': 20,\n      'page.number': 0, // zero based\n    },\n    name: 'page',\n    // todo [akamel] what if we piped after the data was set?\n    beforeSet: function (local, other) {\n      var size = _.has(local, 'page.size') ? local['page.size'] : this.get('page.size');\n      var number = _.has(local, 'page.number') ? local['page.number'] : this.get('page.number');\n\n      // todo [akamel] sanetize size and number here\n      size = Math.max(size, 0);\n      number = Math.max(number, 0);\n\n      _.extend(other, {\n        take: size,\n        skip: size * number,\n      });\n    },\n    update: function (options) {\n      var model = this.src.data;\n      var size = Math.max(this.get('page.size'), 0);\n      var count = Math.max(0, model.get('count'));\n\n      options = options || {};\n\n      if (options.deep) {\n        if (this.src) {\n          var number = Math.max(this.get('page.number'), 0);\n\n          this.src.set({\n            take: size,\n            skip: size * number,\n          }, { silent: true });\n        }\n      }\n\n      // Model.__super__.update.call(this, options);\n\n      // if we came in with an update:deep\n      if (Model.__super__.update.call(this, options)) {\n        var pageCount = Math.ceil(count / size);\n\n        this.patch({ 'page.count': pageCount });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/page.js\n ** module id = 33\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'property.template': {},\n    },\n    name: 'property-template',\n    update: function (options) {\n      // Model.__super__.update.call(this, options);\n\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var opt = this.get('property.template');\n        var value = _.map(model.get('value'), function (item) {\n          var ret = _.clone(item);\n\n          _.each(opt, function (value, key) {\n            if (_.has(ret, key)) {\n              var res = value({\n                model: item,\n                property: key,\n              });\n\n              if (!_.isObject(ret[key])) {\n                var obj = new Object(ret[key]); // eslint-disable-line\n\n                if (_.isUndefined(ret[key])) {\n                  obj.$undefined = true;\n                }\n\n                if (_.isNull(ret[key])) {\n                  obj.$null = true;\n                }\n\n                ret[key] = obj;\n              }\n\n              ret[key].$html = res;\n            }\n          });\n\n          return ret;\n        });\n\n        this.patch({ value: value });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/property-template.js\n ** module id = 34\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/layout/template/row.checked.jade',\n], function (_, Backbone, BaseProjection, rowCheckTemp) {\n  'use strict';\n\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.checked': 'checkbox',   // the checkbox column\n      'row.check.id': 'Id',\n      'row.check.list': [],\n      'row.check.checked.all': false, // used to store user's check value for the special case no rows or all rows is disabled\n      'row.check.allow': function () {\n        return true;\n      },\n    },\n    name: 'row-check',\n    events: {\n      'layout:click:cell': 'tdClick',\n      'layout:click:header': 'thClick',\n    },\n    reset: function () {\n      this.set({\n        'row.check.checked.all': false,\n        'row.check.list': [],\n      });\n    },\n    update: function (options) {\n      // Model.__super__.update.call(this, options);\n\n      if (Model.__super__.update.call(this, options)) {\n        var checkId = this.get('row.check.id');\n        var ids = _.pluck(this.src.data.get('value'), checkId);\n        var checked = _.intersection(this.get('row.check.list'), ids);\n        var checkedLookup = _.object(checked, []);\n        var col = this.get('column.checked');\n        var columns = _.clone(this.src.data.get('columns'));\n        var checkedAll = true;\n        var hasCheckboxable = false;\n        var checkboxAllow = this.get('row.check.allow');\n        var checkboxColumn = _.find(columns, function (item) {\n          return item.property === col;\n        });\n\n        this.set('row.check.list', checked, { silent: true });\n\n        // todo [akamel] it is not clear how 'hasCheckboxable' is used\n        var value = _.map(this.src.data.get('value'), function (item) {\n          var ret = _.clone(item);\n          var checked = false;\n          var disabled = true;\n          var isAllowed = _.isFunction(checkboxAllow) ? checkboxAllow(ret) : checkboxAllow;\n\n          if (isAllowed) {\n            checked = _.has(checkedLookup, ret[checkId]);\n            checkedAll = checkedAll && checked;\n            disabled = false;\n            hasCheckboxable = true;\n          }\n\n          ret[col] = _.extend({}, ret[col], {\n            $html: rowCheckTemp({\n              checked: checked,\n              disabled: disabled,\n            }),\n          });\n\n          return ret;\n        });\n\n        // set the checkbox in th\n        if (!_.isUndefined(checkboxColumn)) {\n          var disabled = _.size(ids) === 0;\n          if (hasCheckboxable) {\n            checkboxColumn.$html = rowCheckTemp({\n              checked: checkedAll,\n              disabled: disabled,\n            });\n            this.attributes['row.check.checked.all'] = checkedAll;\n          } else {\n            checkboxColumn.$html = rowCheckTemp({\n              checked: this.get('row.check.checked.all'),\n              disabled: disabled,\n            });\n          }\n        }\n\n        this.patch({\n          value: value,\n          columns: columns,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n    tdClick: function (e, arg) {\n      var checkboxProperty = this.get('column.checked');\n\n      if (arg.property === checkboxProperty) {\n        var list = this.get('row.check.list');\n        var id = arg.model[this.get('row.check.id')];\n\n        this.set({\n          'row.check.list': arg.checked ? list.concat([id]) : _.without(list, id),\n        });\n\n        this.update();\n      }\n    },\n    thClick: function (e, arg) {\n      var checkboxProperty = this.get('column.checked');\n\n      if (arg.property === checkboxProperty) {\n        var list = [];\n\n        if (arg.checked) {\n          var checkId = this.get('row.check.id');\n          // TODO [akamel] this concept of check allow is strange\n          var checkboxAllow = this.get('row.check.allow');\n\n          // get the list of allowed rows' id\n          list = _.chain(this.data.get('value'))\n            .filter(function (item) {\n              return (_.isFunction(checkboxAllow) ? checkboxAllow(item) : checkboxAllow) && !_.isUndefined(item[checkId]);\n            })\n            .map(function (item) {\n              return item[checkId];\n            })\n            .value();\n        }\n\n        this.set({\n          'row.check.list': list,\n          'row.check.checked.all': arg.checked,\n        });\n\n        this.update();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/row-checkbox.js\n ** module id = 35\n ** module chunks = 0\n **/","var jade = require(\"/Users/wewei/Repos/Microsoft/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (checked, disabled) {\nif ( checked)\n{\nif ( disabled)\n{\nbuf.push(\"<input type=\\\"checkbox\\\" checked disabled class=\\\"column-checkbox\\\">\");\n}\nelse\n{\nbuf.push(\"<input type=\\\"checkbox\\\" checked class=\\\"column-checkbox\\\">\");\n}\n}\nelse\n{\nif ( disabled)\n{\nbuf.push(\"<input type=\\\"checkbox\\\" disabled class=\\\"column-checkbox\\\">\");\n}\nelse\n{\nbuf.push(\"<input type=\\\"checkbox\\\" class=\\\"column-checkbox\\\">\");\n}\n}}.call(this,\"checked\" in locals_for_with?locals_for_with.checked:typeof checked!==\"undefined\"?checked:undefined,\"disabled\" in locals_for_with?locals_for_with.disabled:typeof disabled!==\"undefined\"?disabled:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/row.checked.jade\n ** module id = 36\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/layout/template/row.tri-state-checked.jade',\n], function (_, Backbone, BaseProjection, defaultRowCheckTemp) {\n  'use strict';\n\n  var CheckTransitionRule = {};\n\n  // CheckTransitionRule functions determine the state transition of a checkbox.\n  // State transition depends on the current state and wheather a short or full cycle is requested.\n  // When the short  cycle is requested the checkbox cannot return to the indeterminate state,\n  // event if it started in this state.\n  // Two directions of transition are available:\n  // ... -> indeterminate -> checked -> unchecked -> ...\n  // ... -> indeterminate -> unchecked -> checked -> ...\n  CheckTransitionRule.indeterminateToChecked = (function () {\n    var nextState = {\n      unchecked: function (shortCycle) {\n        return shortCycle ? 'checked' : 'indeterminate';\n      },\n      checked: _.constant('unchecked'),\n      indeterminate: _.constant('checked'),\n    };\n\n    return function (shortCycle, currentState) {\n      return _.has(nextState, currentState) && nextState[currentState](shortCycle) || 'unchecked';\n    };\n  })();\n\n  CheckTransitionRule.indeterminateToUnchecked = (function () {\n    var nextState = {\n      unchecked: _.constant('checked'),\n      checked: function (shortCycle) {\n        return shortCycle ? 'unchecked' : 'indeterminate';\n      },\n      indeterminate: _.constant('unchecked'),\n    };\n\n    return function (shortCycle, currentState) {\n      return _.has(nextState, currentState) && nextState[currentState](shortCycle) || 'unchecked';\n    };\n  })();\n\n  CheckTransitionRule.indeterminateToCheckedFullCycle = function (currentState) {\n    return CheckTransitionRule.indeterminateToChecked(false, currentState);\n  };\n\n  CheckTransitionRule.indeterminateToUncheckedFullCycle = function (currentState) {\n    return CheckTransitionRule.indeterminateToUnchecked(false, currentState);\n  };\n\n  CheckTransitionRule.indeterminateToCheckedShortCycle = function (currentState) {\n    return CheckTransitionRule.indeterminateToChecked(true, currentState);\n  };\n\n  CheckTransitionRule.indeterminateToUncheckedShortCycle = function (currentState) {\n    return CheckTransitionRule.indeterminateToUnchecked(true, currentState);\n  };\n\n  function getAllCheckState(checkStateCounters, count) {\n    return _.findKey(checkStateCounters, function (c) {\n      return c === count;\n    }) || 'unchecked';\n  }\n\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.checked': 'checkbox',  // the checkbox column\n      'row.check.id': 'Id',\n      'row.check.map': {},\n      'row.check.all': { state: 'unchecked' },    // used to store user's check value for the special case no rows or all rows is disabled\n      'row.check.allow': function () {\n        return true;\n      },\n      'row.check.click-anywhere': false,\n      'row.check.transition': CheckTransitionRule.indeterminateToCheckedShortCycle,\n      'row.check.all.transition': CheckTransitionRule.indeterminateToCheckedShortCycle,\n      'row.check.template': defaultRowCheckTemp,\n    },\n    name: 'row-check',\n    events: {\n      'layout:click:cell': 'tdClick',\n      'layout:click:header': 'thClick',\n    },\n    reset: function () {\n      this.set({\n        'row.check.checked.all': false,\n        'row.check.map': {},\n      });\n    },\n    update: function (options) {\n      if (!Model.__super__.update.call(this, options)) {\n        return;\n      }\n\n      var checkId = this.get('row.check.id');\n      var ids = _.pluck(this.src.data.get('value'), checkId);\n      var checkMap = this.get('row.check.map');\n      var col = this.get('column.checked');\n      var columns = _.clone(this.src.data.get('columns'));\n      var checkStateCounters = _.object(\n          ['unchecked', 'checked', 'indeterminate'],\n          [0, 0, 0]\n        );\n      var hasCheckboxable = false;\n      var checkboxAllow = this.get('row.check.allow');\n      var checkboxColumn = _.find(columns, function (item) {\n        return item.property === col;\n      });\n      var rowCheckTemp = this.get('row.check.template');\n\n      var value = _.map(this.src.data.get('value'), function (item) {\n        var ret = _.clone(item);\n        var check = checkMap[ret[checkId]] || { state: 'unchecked' };\n        var disabled = true;\n        var isAllowed = _.isFunction(checkboxAllow) ? checkboxAllow(ret) : checkboxAllow;\n\n        checkStateCounters[check.state]++;\n\n        if (isAllowed) {\n          disabled = false;\n          hasCheckboxable = true;\n        }\n\n        ret[col] = _.extend({}, ret[col], {\n          $html: rowCheckTemp({ checkState: check.state, disabled: disabled }),\n        });\n\n        return ret;\n      });\n\n      // set the checkbox in th\n      if (!_.isUndefined(checkboxColumn)) {\n        var disabledAllCheck = _.size(ids) === 0;\n\n        if (hasCheckboxable) {\n          var checkState = getAllCheckState(checkStateCounters, ids.length);\n\n          checkboxColumn.$html = rowCheckTemp({ checkState: checkState, disabled: disabledAllCheck });\n          this.attributes['row.check.all'] = _.extend(this.attributes['row.check.all'], { state: checkState });\n        } else {\n          checkboxColumn.$html = rowCheckTemp({ checkState: this.get('row.check.all').state, disabled: disabledAllCheck });\n        }\n      }\n\n      this.patch({\n        value: value,\n        columns: columns,\n      });\n    },\n    tdClick: function (e, arg) {\n      var checkboxProperty = this.get('column.checked');\n      var clickAnywhere = this.get('row.check.click-anywhere');\n\n      if (arg.property === checkboxProperty || clickAnywhere) {\n        var checkMap = _.clone(this.get('row.check.map'));\n        var id = arg.model[this.get('row.check.id')];\n        var defaultTransition = this.get('row.check.transition');\n        var check = _.extend({ transition: defaultTransition, state: 'unchecked' }, checkMap[id]);\n\n        check.state = check.transition(check.state);\n        checkMap[id] = check;\n\n        this.set({\n          'row.check.map': checkMap,\n        });\n      }\n    },\n    thClick: function (e, arg) {\n      var checkboxProperty = this.get('column.checked');\n\n      if (arg.property === checkboxProperty) {\n        var checkMap = _.clone(this.get('row.check.map'));\n        var checkId = this.get('row.check.id');\n        var allCheck = this.get('row.check.all');\n        var checkState = allCheck.state;\n        var allCheckTransitionRule = this.get('row.check.all.transition');\n        var CheckTransitionRule = this.get('row.check.transition');\n\n        allCheck.state = allCheckTransitionRule(checkState);\n\n        checkMap = _.object(\n          this.data.get('value')\n          .map(function (item) {\n            var check = _.extend({ transition: CheckTransitionRule }, checkMap[item[checkId]], { state: allCheck.state });\n\n            return [item[checkId], check];\n          })\n        );\n\n        this.set({\n          'row.check.map': checkMap,\n          'row.check.all': allCheck,\n        });\n      }\n    },\n  });\n\n  function CheckDiff(added, changed, removed, unchanged) {\n    this.added = added || {};\n    this.changed = changed || {};\n    this.removed = removed || {};\n    this.unchanged = unchanged || {};\n  }\n\n  CheckDiff.prototype.hasChanges = function () {\n    return _.keys(this.changed).length + _.keys(this.added).length > 0;\n  };\n\n  function diffCheckMap(before, after, defaultState) {\n    defaultState = defaultState || { state: 'unchecked' };\n\n    var checkDiff = new CheckDiff();\n\n    _.keys(before).forEach(function (key) {\n      var beforeState = before[key];\n      var afterState = after[key];\n\n      if (!afterState) {\n        checkDiff.removed[key] = beforeState;\n      } else if (beforeState.state === afterState.state) {\n        checkDiff.unchanged[key] = afterState;\n      } else {\n        checkDiff.changed[key] = { before: beforeState, after: afterState };\n      }\n    });\n\n    _.keys(after).forEach(function (key) {\n      var afterState = after[key];\n      var beforeState = before[key];\n\n      if (!beforeState && defaultState.state !== afterState.state) {\n        checkDiff.added[key] = afterState;\n      }\n    });\n\n    return checkDiff;\n  }\n\n  function statCheckMap(checkMap, defaultState) {\n    defaultState = defaultState || { state: 'unchecked' };\n    var checked = [];\n    var indeterminate = [];\n    var unchecked = [];\n\n    _.keys(checkMap).forEach(function (key) {\n      var check = checkMap[key];\n\n      if (check.state === 'checked' && check.state !== defaultState.state) {\n        checked.push(check);\n      } else if (check.state === 'unchecked' && check.state !== defaultState.state) {\n        unchecked.push(check);\n      } else if (check.state !== defaultState.state) {\n        indeterminate.push(check);\n      }\n    });\n\n    return {\n      checked: checked,\n      unchecked: unchecked,\n      indeterminate: indeterminate,\n    };\n  }\n\n  function fullStatCheckMap(before, after, defaultState) {\n    return _.extend(statCheckMap(after, defaultState), diffCheckMap(before, after, defaultState));\n  }\n\n  Model.CheckTransitionRule = CheckTransitionRule;\n  Model.fullStatCheckMap = fullStatCheckMap;\n  Model.statCheckMap = statCheckMap;\n  Model.diffCheckMap = diffCheckMap;\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/row-tri-state-checkbox.js\n ** module id = 37\n ** module chunks = 0\n **/","var jade = require(\"/Users/wewei/Repos/Microsoft/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function (checkState) {\nvar classes = [].concat(checkState === 'indeterminate' ? ['glyphicon', 'glyphicon-minus'] : checkState === 'checked' ? ['glyphicon', 'glyphicon-ok'] : [])\nbuf.push(\"<div class=\\\"column-tri-state-checkbox\\\"><span\" + (jade.cls([classes], [true])) + \"></span></div>\");}.call(this,\"checkState\" in locals_for_with?locals_for_with.checkState:typeof checkState!==\"undefined\"?checkState:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/row.tri-state-checked.jade\n ** module id = 38\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection /* , schemaProperties, Response */) {\n  var Model = BaseProjection.extend({\n    defaults: {},\n    name: 'row-index',\n    update: function (options) {\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var skip = this.get('skip');\n        var value = _.map(model.get('value'), function (i, idx) {\n          var ret = _.clone(i);\n          ret.rowIndex = idx + (_.isFinite(skip) ? skip : 0) + 1;\n          return ret;\n        });\n\n        this.patch({ value: value });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/row-index.js\n ** module id = 39\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'component/grid/projection/base',\n  'component/grid/schema/properties',\n], function (_, BaseProjection, schemaProperties) {\n  var Model = BaseProjection.extend({\n\n    defaults: {\n      seed: null,\n    },\n\n    name: 'sink',\n\n    update: function () {\n      var value;\n\n      value = this.get('seed');\n\n      if (value) {\n        var select = schemaProperties.from(value);\n        this.patch({\n          value: value,\n          select: select,\n          count: _.size(value),\n        });\n      }\n    },\n\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/sink.js\n ** module id = 40\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/backbone',\n  'component/grid/projection/base',\n  'component/grid/model/response',\n], function (_, Backbone, BaseProjection) {\n  var Model = BaseProjection.extend({\n    defaults: {\n      'column.group': {},\n      'column.groupExpansion': [],\n      'column.select': null,\n    },\n    name: 'column-group',\n\n    events: {\n      'layout:click:header': 'onClickHeader',\n    },\n\n    update: function (options) {\n      if (Model.__super__.update.call(this, options)) {\n        var model = this.src.data;\n        var columnGroup = this.get('column.group') || {};\n        var groupExpansion = {};\n        _.each(this.get('column.groupExpansion') || [], function (columnName) {\n          groupExpansion[columnName] = true;\n        });\n        var select = this.get('column.select') || model.get('select');\n        var columns = model.get('columns');\n        var subSelect = [];\n        var isApplyGroup = false;\n\n        _.each(columnGroup, function (subColumns, name) {\n          if (!_.has(columns, name)) {\n            return;\n          }\n          isApplyGroup = true;\n          columns[name].group = subColumns;\n          // remove the columns that appear in the select\n          select = _.difference(select, subColumns);\n          columns[name].groupExpansion = _.has(groupExpansion, name);\n        }, this);\n        var selectExpand = select.slice(0);\n\n        _.each(select, function (columnName) {\n          var column = columns[columnName];\n          var subColumns = column.group;\n          if (column.groupExpansion) {\n            var nameIndex = selectExpand.indexOf(columnName);\n            selectExpand.splice.apply(selectExpand, [nameIndex, 1].concat(subColumns));\n            subSelect = subSelect.concat(subColumns);\n          }\n        }, this);\n\n        this.patch({\n          columns: columns,\n          select: select,\n          subSelect: subSelect,\n          selectExpand: selectExpand,\n          isApplyGroup: isApplyGroup,\n        });\n      } else {\n        // todo [akamel] unset our properties only\n        // this.unset();\n      }\n    },\n\n    onClickHeader: function (e, arg) {\n      if (!e.target.classList.contains('glyphicon')) {\n        return;\n      }\n      var column = arg.column;\n      if (_.isArray(column.group)) {\n        var groupExpansion = this.get('column.groupExpansion') || [];\n        if (column.groupExpansion) {\n          groupExpansion = _.without(groupExpansion, column.property);\n        } else {\n          groupExpansion = _.union(groupExpansion, [column.property]);\n        }\n        this.set({ 'column.groupExpansion': groupExpansion });\n      }\n    },\n  });\n\n  return Model;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/projection/column-group.js\n ** module id = 41\n ** module chunks = 0\n **/","module.exports = {\n  TableLayout: require('./table'),\n  templates: {\n    table: require('./template/table.jade'),\n  },\n  renderers: require('./renderer/index'),\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/index.js\n ** module id = 42\n ** module chunks = 0\n **/","define([\n  'lib/underscore',\n  'lib/jquery',\n  'lib/backbone',\n], function (_, $, Backbone) {\n  var View = Backbone.View.extend({\n    events: {\n      'click th': 'thClick',\n      'click td': 'tdClick',\n      'change td>input.grid-text-input': 'editableStringChange',\n    },\n\n    initialize: function (options) {\n      _.bindAll(this, 'update', 'thClick', 'tdClick', 'dataFor');\n\n      this.options = _.extend(this.options, options);\n\n      // TODO [akamel] rename? this isn't a backbone data obj?\n      this.data = undefined;\n\n      this.container = options.container;\n      this.grid = options.grid;\n\n      this.renderers = _.map(this.options.renderers, function (Renderer) {\n        return new Renderer({ layout: this });\n      }.bind(this));\n\n      // TODO [akamel] make this conditional if these renderes are enabled\n      this.onViewPortChange = this.onViewPortChange.bind(this);\n      this.listenTo(this.container, 'scroll:container', this.onViewPortChange);\n      this.listenTo(this.container, 'resize:container', this.onViewPortChange);\n    },\n\n    onViewPortChange: function () {\n      this.scheduleDraw();\n    },\n\n    remove: function () {\n      this.container.stopListening(this.container);\n      Backbone.View.prototype.remove.apply(this, arguments);\n    },\n\n    thClick: function (e) {\n      var arg = this.dataFor(e.currentTarget);\n\n      if (arg.column) {\n        this.trigger('click:header', e, arg);\n      }\n    },\n\n    tdClick: function (e) {\n      var arg = this.dataFor(e.currentTarget);\n\n      if (arg.column) {\n        this.trigger('click:cell', e, arg);\n      }\n    },\n\n    editableStringChange: function (e) {\n      var arg = this.dataFor(e.currentTarget);\n      var colEditableStr = this.grid.projection.get('column.editable.string');\n\n      if (arg.column) {\n        if (_.isObject(colEditableStr) && !_.isUndefined(colEditableStr[arg.property])) {\n          this.grid.projection.get('projection:column-editable-string').trigger('change:string', e, arg);\n        } else {\n          this.trigger('change:editable.string', e, arg);\n        }\n      }\n    },\n\n    dataFor: function (el) {\n      if (!$.contains(this.el, el)) {\n        return undefined;\n      }\n\n      var $el = $(el);\n      // TODO [akamel] can we use target instead?\n      var $tr = $el.closest('tr', this.el);\n      var $closestTD = $el.closest('td', this.el);\n      var $closestTH = $el.closest('th', this.el);\n      var $td = _.size($closestTD) ? $closestTD : $closestTH;\n      var virtualizer = this.getRenderer('virtualization');\n      var i = $tr.index() + (virtualizer ? virtualizer.first : 0);\n      var j = $td.index();\n      // TODO [akamel] 1- check if $td is th; 2- throw if el is neither th or td as it is assumed in this function\n      var isHeader = $td.closest('thead', this.el).length;\n      var ret = { header: isHeader };\n\n      // we are not in header\n      if (!isHeader) {\n        ret.model = this.data.value[i];\n      }\n      if (isHeader && i === 0) {\n        ret.property = this.data.select[j];\n      } else if (isHeader && i === 1) {\n        ret.property = this.data.subSelect[j];\n      } else {\n        ret.property = this.data.selectExpand[j];\n      }\n\n      ret.column = this.data.columns[ret.property];\n      if (ret.property === this.grid.projection.get('column.checked')) {\n        // TODO [akamel] this shouldn't be here\n        var checkbox = $el.find('.column-checkbox');\n        if (checkbox.length) {\n          ret.checked = checkbox[0].checked;\n        }\n      }\n      ret.grid = this.grid;\n\n      return ret;\n    },\n\n    // TODO [akamel] [perf] 8.5%\n    toHTML: function (value) {\n      var data = _.defaults({ value: value }, this.data);\n\n      _.each(data.columns, function (col) {\n        if (_.isObject(col.$metadata)) {\n          if (_.has(col.$metadata['attr.head'], 'class') && _.isArray(col.$metadata['attr.head'].class)) {\n            col.$metadata['attr.head'].class = col.$metadata['attr.head'].class.join(' ');\n          }\n\n          if (_.has(col.$metadata['attr.body'], 'class') && _.isArray(col.$metadata['attr.body'].class)) {\n            col.$metadata['attr.body'].class = col.$metadata['attr.body'].class.join(' ');\n          }\n\n         // TODO [akamel] merge attr that are on $metadata['attr']\n        }\n      });\n\n      return this.options.template(data);\n    },\n\n    update: function (model) {\n      _.each(this.renderers, function (renderer) {\n        renderer.update && renderer.update();\n      });\n\n      // TODO [akamel] consider moving this to a projection\n      var value = model.get('value');\n      // TODO [akamel] is this overriding the values we got from the projection //see column extend below\n      var columns = model.get('columns');\n      var colOptions = this.options.columns || {};\n      var orderby = {};\n\n      _.each(this.grid.projection.get('orderby'), function (element, index) {\n        var key = _.first(_.keys(element));\n        orderby[key] = {\n          dir: element[key],\n          index: index,\n        };\n      });\n\n      _.each(columns, function (col, property) {\n      // TODO [akamel] consider filtering which props to copy/override\n        var delta = {};\n        if (orderby[property]) {\n          delta.$orderby = orderby[property];\n        }\n\n        columns[property] = _.extend(col, colOptions[property], delta);\n      });\n\n      if (_.has(this.options.$metadata, 'class') && _.isArray(this.options.$metadata.class)) {\n        this.options.$metadata.class = this.options.$metadata.class.join(' ');\n      }\n\n      var delta = {\n        'value': value,\n        'columns': columns,\n        'columns.lookup': _.indexBy(columns, function (col) {\n          return col.property;\n        }),\n        '$metadata': this.options.$metadata,\n        'hideHeaders': this.options.hideHeaders,\n      };\n\n      this.data = _.defaults(delta, model.toJSON());\n\n      this.draw({ canSkipDraw: false });\n    },\n\n    scheduleDraw: function () {\n      if (!this.scheduledDraw) {\n        this.scheduledDraw = true;\n\n        window.requestAnimationFrame(function () {\n          this.scheduledDraw = false;\n          this.draw();\n        }.bind(this));\n      }\n    },\n\n    drawable: function () {\n      return this.data;\n    },\n\n    getRenderer: function (name) {\n      return _.find(this.renderers, function (r) {\n        return r.name === name;\n      });\n    },\n\n    draw: function (options) {\n      if (!this.drawable()) {\n        return;\n      }\n\n      this.trigger('render:beginning');\n\n      var renderers = this.renderers;\n      var i = 0;\n\n      var middleware = function (data, cb) {\n        var r = renderers[i++];\n        if (r) {\n          var clone = _.defaults({}, data, { css: {} });\n          delete clone.canSkipDraw;\n\n          r.draw(clone, _.once(function (err, res) {\n            res.canSkipDraw = data.canSkipDraw === true && res.canSkipDraw === true;\n            if (err) {\n              cb(err);\n            } else {\n              middleware(res || clone, cb);\n            }\n          }));\n        } else {\n          cb(undefined, data);\n        }\n      };\n\n      var canSkipDraw = _.has(options, 'canSkipDraw') ? options.canSkipDraw : true;\n\n      // this is _not_ and _cannot_ be async\n      middleware({ rows: this.data.value, canSkipDraw: canSkipDraw }, function (err, res) {\n        res.css && this.$el.css(res.css);\n\n        if (err) {\n          throw err;\n        }\n\n        if (res.canSkipDraw !== true) {\n          this.el.innerHTML = this.toHTML(res.rows);\n        }\n      }.bind(this));\n\n      this.trigger('render:finished');\n    },\n\n    render: function () {\n      this.grid.on('change:data', this.update);\n\n      // this.grid.projection.data.on('change', this.update);\n    },\n  });\n\n  View.partial = function (options) {\n    return View.extend({ options: options });\n  };\n\n  return View;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/table.js\n ** module id = 43\n ** module chunks = 0\n **/","var jade = require(\"/Users/wewei/Repos/Microsoft/projection-grid/node_modules/jade/lib/runtime.js\");\n\nmodule.exports = function template(locals) {\nvar buf = [];\nvar jade_mixins = {};\nvar jade_interp;\n;var locals_for_with = (locals || {});(function ($metadata, columns, hideHeaders, isApplyGroup, subSelect, undefined, value) {\njade_mixins[\"columnHeader\"] = jade_interp = function(column){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nif ( column.$orderby)\n{\nif ( column.$orderby.dir > 0)\n{\nbuf.push(\"<span class=\\\"grid-asc\\\"></span>\");\n}\nelse\n{\nbuf.push(\"<span class=\\\"grid-des\\\"></span>\");\n}\n}\nif ( (column && column.$html))\n{\nbuf.push(null == (jade_interp = column.$html) ? \"\" : jade_interp);\n}\nelse\n{\nbuf.push(jade.escape(null == (jade_interp = (typeof column.$text != 'undefined')? column.$text : (column.property || column)) ? \"\" : jade_interp));\n}\n};\njade_mixins[\"th\"] = jade_interp = function(column, hasGroup, isSubColumn){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nvar attr = (column.$metadata || {})['attr.head'] || {}\nvar cls = [];\nif ( column.sortable)\n{\ncls.push('sortable');\n}\nif ( column.$orderby)\n{\ncls.push('orderby');\n}\ncls = cls.join(' ');\nif ( isSubColumn )\n{\nvar colspan = 1, rowspan = 1;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \">\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</th>\");\n}\nelse if ( hasGroup && column.groupExpansion)\n{\nvar colspan = column.group.length, rowspan = 1;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \"><span class=\\\"pop-collapse glyphicon glyphicon-minus\\\"></span><div>\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</div></th>\");\n}\nelse if ( hasGroup && column.group)\n{\nvar colspan = 1, rowspan = 2;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \"><span class=\\\"pop-expand glyphicon glyphicon-plus\\\"></span><div>\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</div></th>\");\n}\nelse\n{\nvar colspan = 1, rowspan = 2;\nbuf.push(\"<th\" + (jade.attrs(jade.merge([{\"colspan\": jade.escape(colspan),\"rowspan\": jade.escape(rowspan),\"class\": (jade_interp = [true], jade.joinClasses([cls].map(jade.joinClasses).map(function (cls, i) {   return jade_interp[i] ? jade.escape(cls) : cls })))},attributes,attr]), true)) + \">\");\njade_mixins[\"columnHeader\"](column);\nbuf.push(\"</th>\");\n}\n};\njade_mixins[\"td\"] = jade_interp = function(row, column){\nvar block = (this && this.block), attributes = (this && this.attributes) || {};\nvar attr = (column.$metadata || {})['attr.body'] || {}\nbuf.push(\"<td\" + (jade.attrs(jade.merge([attributes,attr]), true)) + \">\");\nvar res = row[column.property]\nif ( (res && res.$html))\n{\nbuf.push(null == (jade_interp = res.$html) ? \"\" : jade_interp);\n}\nelse\n{\nbuf.push(jade.escape(null == (jade_interp = res) ? \"\" : jade_interp));\n}\nbuf.push(\"</td>\");\n};\nbuf.push(\"<table\" + (jade.attrs(jade.merge([{\"class\": \"table table-hover grid\"},$metadata || {}]), true)) + \">\");\nif ( !hideHeaders)\n{\nbuf.push(\"<thead>\");\nif ( isApplyGroup && subSelect.length === 0)\n{\nbuf.push(\"<tr class=\\\"table__row--header\\\">\");\n// iterate locals['select'] || []\n;(function(){\n  var $$obj = locals['select'] || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n}\nelse if ( isApplyGroup)\n{\nbuf.push(\"<tr class=\\\"table__row--header\\\">\");\n// iterate locals['select'] || []\n;(function(){\n  var $$obj = locals['select'] || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr><tr class=\\\"table__row--header table__row--sub-header\\\">\");\n// iterate locals['subSelect']\n;(function(){\n  var $$obj = locals['subSelect'];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true, true);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName], true, true);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n}\nelse\n{\nbuf.push(\"<tr class=\\\"table__row--header\\\">\");\n// iterate locals['select'] || []\n;(function(){\n  var $$obj = locals['select'] || [];\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName]);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"th\"](columns[columnName]);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n}\nbuf.push(\"</thead>\");\n}\nbuf.push(\"<tbody>\");\n// iterate value\n;(function(){\n  var $$obj = value;\n  if ('number' == typeof $$obj.length) {\n\n    for (var i = 0, $$l = $$obj.length; i < $$l; i++) {\n      var row = $$obj[i];\n\nvar attr = (row.$metadata || {}).attr\nbuf.push(\"<tr\" + (jade.attrs(jade.merge([{\"class\": \"table__row--body\"},attr]), true)) + \">\");\n// iterate locals['selectExpand'] || locals.select\n;(function(){\n  var $$obj = locals['selectExpand'] || locals.select;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n    }\n\n  } else {\n    var $$l = 0;\n    for (var i in $$obj) {\n      $$l++;      var row = $$obj[i];\n\nvar attr = (row.$metadata || {}).attr\nbuf.push(\"<tr\" + (jade.attrs(jade.merge([{\"class\": \"table__row--body\"},attr]), true)) + \">\");\n// iterate locals['selectExpand'] || locals.select\n;(function(){\n  var $$obj = locals['selectExpand'] || locals.select;\n  if ('number' == typeof $$obj.length) {\n\n    for (var $index = 0, $$l = $$obj.length; $index < $$l; $index++) {\n      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  } else {\n    var $$l = 0;\n    for (var $index in $$obj) {\n      $$l++;      var columnName = $$obj[$index];\n\njade_mixins[\"td\"](row, columns[columnName]);\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tr>\");\n    }\n\n  }\n}).call(this);\n\nbuf.push(\"</tbody></table>\");}.call(this,\"$metadata\" in locals_for_with?locals_for_with.$metadata:typeof $metadata!==\"undefined\"?$metadata:undefined,\"columns\" in locals_for_with?locals_for_with.columns:typeof columns!==\"undefined\"?columns:undefined,\"hideHeaders\" in locals_for_with?locals_for_with.hideHeaders:typeof hideHeaders!==\"undefined\"?hideHeaders:undefined,\"isApplyGroup\" in locals_for_with?locals_for_with.isApplyGroup:typeof isApplyGroup!==\"undefined\"?isApplyGroup:undefined,\"subSelect\" in locals_for_with?locals_for_with.subSelect:typeof subSelect!==\"undefined\"?subSelect:undefined,\"undefined\" in locals_for_with?locals_for_with.undefined:typeof undefined!==\"undefined\"?undefined:undefined,\"value\" in locals_for_with?locals_for_with.value:typeof value!==\"undefined\"?value:undefined));;return buf.join(\"\");\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/template/table.jade\n ** module id = 44\n ** module chunks = 0\n **/","module.exports = {\n  FixedHeader: require('./fixed-header'),\n  Virtualization: require('./virtualization'),\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/renderer/index.js\n ** module id = 45\n ** module chunks = 0\n **/","define([\n  'lib/jquery',\n  'lib/underscore',\n  'component/grid/layout/measure',\n  'component/grid/layout/px',\n], function ($, _, measure, px) {\n  function Renderer(options) {\n    this.options = options || {};\n\n    this.name = 'fixed-header';\n    this.layout = this.options.layout;\n  }\n\n  Renderer.prototype.draw = function (data, cb) {\n    data.vpMeasures = data.vpMeasures = measure.viewport.call(this.layout);\n    if (data.vpMeasures.top > 0) {\n      var $el = this.layout.$el;\n\n      // todo [akamel] assumes we have table rendered; measure/estimate otherwise\n\n      // a. compensate for header displacement\n      // .. as we set 'thead > tr' css position 'absolute'\n      var displacement = $el.find('thead tr').outerHeight();\n      _.extend(data.css, {\n        'padding-top': px.pixelify(px.parse(data.css['padding-top']) + displacement),\n      });\n\n      data.canSkipDraw = true;\n\n      // b. yield to render\n      cb(undefined, data);\n\n      // c. get newly rendered header\n      var $thead = $el.find('thead');\n      var $headTR = $el.find('thead > tr');\n      var $headTD = $headTR.first().children();\n      var $secondHeadTD = $headTR.eq(1).children();\n      var $bodyTD = $el.find('tbody > tr:first-child').children();\n\n      var $ref = $bodyTD;\n      var $target = $headTD;\n\n      // d. capture header col computed width\n      // todo [akamel] [perf] 16%\n      this.colWidth = this.colWidth || _.map($ref, function (td) {\n        return $(td).width();\n      });\n\n      // todo [akamel] [perf] 12% -- consider replacing with css rule generation\n      // e. freeze column width\n      // e.1 freeze col width\n      var colIndex = 0;\n      var secondHeadTDIndex = 0;\n      _.each($target, function (td) {\n        var colspan = parseInt($(td).attr('colspan'), 10);\n        var rowspan = parseInt($(td).attr('rowspan'), 10);\n        var width = 0;\n        for (var i = 0; i < colspan; ++i) {\n          var colWidth = px.pixelify(this.colWidth[colIndex + i]);\n          width += colWidth;\n          if (rowspan === 1) {\n            $secondHeadTD.eq(secondHeadTDIndex + i).width(colWidth);\n          }\n        }\n        $(td).width(width);\n        colIndex += colspan;\n        if (rowspan === 1) {\n          secondHeadTDIndex += colspan;\n        }\n      }.bind(this));\n\n      _.each($ref, function (td, index) {\n        $(td).width(px.pixelify(this.colWidth[index]));\n      }.bind(this));\n\n      // f. set position 'fixed' and lock header at top of table\n      $thead.css({\n        'position': this.layout.container.el === window ? 'fixed' : 'absolute',\n        'top': px.pixelify(this.layout.container.el === window ? 0 : this.layout.container.$el.scrollTop()),\n        'margin-left': px.pixelify(-data.vpMeasures.offsetLeft),\n        'z-index': 1000,\n      });\n    } else {\n      _.extend(data.css, {\n        'padding-top': px.pixelify(px.parse(data.css['padding-top'])),\n      });\n\n      cb(undefined, data);\n    }\n  };\n\n  Renderer.partial = function (options) {\n    return function (o) {\n      return new Renderer(_.defaults({}, o, options));\n    };\n  };\n\n  return Renderer;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/renderer/fixed-header.js\n ** module id = 46\n ** module chunks = 0\n **/","define([\n  'lib/jquery',\n  'lib/underscore',\n], function ($, _) {\n  function viewport(el, container) {\n    var $el = el ? $(el) : this.$el;\n\n    container = container || this.container;\n    var $viewport = container.$el;\n\n    var viewportTop = $viewport.scrollTop();\n    var viewportBottom = viewportTop + $viewport.height();\n    var viewportLeft = $viewport.scrollLeft();\n\n    var boundsTop = container.offset($el).top;\n    var boundsBottom = boundsTop + $el.innerHeight();\n    // var boundsLeft = $el.offset().left;\n\n    var visibleTop = Math.max(boundsTop, viewportTop);\n    var visibleBottom = Math.min(boundsBottom, viewportBottom);\n    // var visibleLeft = Math.max(boundsLeft, viewportLeft);\n\n    return {\n      top: visibleTop - boundsTop,\n      bottom: visibleBottom - boundsTop,\n      offsetLeft: viewportLeft,\n    };\n  }\n\n  function dimensions(el) {\n    var $el = el ? $(el) : this.$el;\n\n    // calculate heights\n    // a. header\n    var ret = {\n      rows: [],\n      thead: $el.find('thead > tr').outerHeight(),\n    };\n\n    // b. keep row info\n    $el.find('tbody').children('tr').each(function () {\n      ret.rows.push($(this).outerHeight());\n    });\n\n    // c. update average row height\n    var avg = _.reduce(ret.rows, function (memo, num) {\n      return memo + num;\n    }, 0) / (ret.rows.length === 0 ? 1 : ret.rows.length);\n\n    ret.avgRowHeight = avg;\n    ret.estimateHeight = (_.size(this.data.value) * avg) + ret.thead;\n\n    return ret;\n  }\n\n  function sample() {\n    // a. render test pass\n    var $tmpEl = $('<div style=\"visibility:hidden\" />');\n    var sample = _.first(this.data.value, 20);\n\n    this.$el.append($tmpEl);\n\n    $tmpEl[0].innerHTML = this.toHTML(sample);\n\n    // b. take measures\n    var ret = dimensions.call(this, $tmpEl);\n\n    // c. clean-up\n    $tmpEl.remove();\n\n    return ret;\n  }\n\n  return {\n    viewport: viewport,\n    dimensions: dimensions,\n    sample: sample,\n  };\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/measure.js\n ** module id = 47\n ** module chunks = 0\n **/","// todo [akamel] move to /component\ndefine(['lib/underscore'], function (_) {\n  function parse(a) {\n    return abs(parseFloat(a));\n  }\n\n  function abs(a) {\n    return _.isFinite(a) ? a : 0;\n  }\n\n  function pixelify(a) {\n    return abs(a) + 'px';\n  }\n\n  return {\n    parse: parse,\n    pixelify: pixelify,\n  };\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/px.js\n ** module id = 48\n ** module chunks = 0\n **/","// TODO [akamel] [bug] with large data set, jitters when scrolling to bottom\n\ndefine([\n  'lib/jquery',\n  'lib/underscore',\n  'component/grid/layout/measure',\n  'component/grid/layout/px',\n], function ($, _, measure, px) {\n  function rowHeight(row) {\n    return _.isNumber(row.__height) ? row.__height : this.__measures.avgRowHeight;\n  }\n\n  function estimateHeight(first, last) {\n    var rows = this.layout.data.value;\n\n    var ret = 0;\n    for (var i = first; i <= last; i++) {\n      ret += rowHeight.call(this, rows[i]);\n    }\n\n    return ret;\n  }\n\n  function rowAtOffset(offset) {\n    var rem = offset;\n\n    if (rem <= 0) {\n      return 0;\n    }\n\n    var ret = -1;\n    var count = _.size(this.layout.data.value);\n\n    while (rem > 0 && ret < count - 1) {\n      ret++;\n      rem -= rowHeight.call(this, ret);\n    }\n\n    return (ret < count) ? ret : -1;\n  }\n\n  function Renderer(options) {\n    this.options = options || {};\n\n    this.name = 'virtualization';\n    this.layout = this.options.layout;\n  }\n\n  Renderer.prototype.draw = function (data, cb) {\n    // a. define data set\n    var value = this.layout.data.value;\n    var count = _.size(value);\n    var first = 0;\n    var last = count - 1;\n\n    // b. render test pass / take initial measures\n    if (!this.__measures) {\n      var smpl = measure.sample.call(this.layout);\n      this.__measures = _.pick(smpl, 'avgRowHeight', 'estimateHeight', 'thead');\n\n      // b.1 set height based on measures estimate\n      this.layout.$el.css({\n        'padding-top': px.pixelify(this.__measures.estimateHeight),\n      });\n    }\n\n    // c. find visible viewport\n    data.vpMeasures = data.vpMeasures || measure.viewport.call(this.layout);\n\n    // d. find rendable rows\n    first = rowAtOffset.call(this, data.vpMeasures.top - this.__measures.thead);\n    last = rowAtOffset.call(this, data.vpMeasures.bottom - this.__measures.thead);\n\n    // d.1 add a few rows before and after our calculations to account for measurment estimation err\n    var errMarginRowCount = 5;\n\n    first -= errMarginRowCount;\n    last += errMarginRowCount;\n\n    first = Math.max(0, first);\n    last = Math.min((last < 0) ? count - 1 : last, count - 1);\n\n    var pTop = estimateHeight.call(this, 0, first - 1);\n    var pBottom = estimateHeight.call(this, last + 1, count - 1);\n\n    data.rows = value.slice(first, last + 1);\n\n    _.extend(data.css, {\n      'padding-top': px.pixelify(pTop + px.parse(data.css['padding-top'])),\n      'padding-bottom': px.pixelify(pBottom + px.parse(data.css['padding-bottom'])),\n    });\n\n    if (this.first === first && this.last === last) {\n      data.canSkipDraw = true;\n    }\n\n    // e. yield to render\n    cb(undefined, data);\n\n    // f. take new measures and update avg row height\n    // todo [akamel] [perf] 7.5%\n    var tblMeasure = measure.dimensions.call(this.layout);\n    _.each(tblMeasure.rows, function (height, i) {\n      value[i + first].__height = height;\n    });\n\n    var heights = _.chain(value)\n      .map(function (row) {\n        return row.__height;\n      }).compact().value();\n\n    if (_.size(heights)) {\n      this.__measures.avgRowHeight = _.reduce(heights, function (memo, num) {\n        return memo + num;\n      }, 0) / _.size(heights);\n    }\n\n    this.first = first;\n    this.last = last;\n  };\n\n  Renderer.prototype.update = function () {\n    delete this.__measures;\n  };\n\n  Renderer.partial = function (options) {\n    return function (o) {\n      return new Renderer(_.defaults({}, o, options));\n    };\n  };\n\n  return Renderer;\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./js/layout/renderer/virtualization.js\n ** module id = 49\n ** module chunks = 0\n **/"],"sourceRoot":""}